!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("fjplayer",[],t):"object"==typeof exports?exports.fjplayer=t():e.fjplayer=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=10)}([function(e,t,n){"use strict";function i(e){var t;if(this.gState=!0,this.debug={},this.gState)for(t in console)"function"==typeof console[t]&&(this.debug[t]=console[t].bind(window.console,e.constructor.name+": "));else for(t in console)"function"==typeof console[t]&&(this.debug[t]=function(){});return this.debug}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(t.FJCONFIG_CLASS="FJClass",t.FJCONFIG_TYPE="FJType",t.FJCONFIG_TITLE="FJTitle",t.FJCONFIG_SRC="FJSrc",t.FJCONFIG_POSTER="FJPoster",t.FJCONFIG_ADS_LINK_URL="FJAdsLinkUrl",t.FJCONFIG_CAN_ESCAPE="FJCanEscape",t.FJCONFIG_THUMBS="FJThumbs",t.FJCONFIG_SUBTITLES="FJSubtitles",t.FJCONFIG_ADS="FJAds",t.FJCONFIG_AUDIOS="FJAudios",t.FJCONFIG_OVERLAYS="FJOverlays",t.FJCONFIG_DRM="FJDrm",t.FJCONFIG_LABEL="FJLabel",t.FJCONFIG_LANG="FJLang",t.FJCONFIG_DATA="FJData",t.FJCONFIG_URL="FJUrl",t.FJCONFIG_DURATION="FJDuration",t.FJCONFIG_SHOW_AT="FJShowAt",t.FJCONFIG_DRM_LICENSE_SERVER="FjLicenseServer",t.FJCONFIG_TRUE="true"),r=t.FJCONFIG_FALSE="false",a=(t.FJCONFIG_BOOLEAN={FJCONFIG_TRUE:i,FJCONFIG_FALSE:r},t.FJCONFIG_CLASS_VOD="vod"),s=t.FJCONFIG_CLASS_LIVE="live",o=(t.FJCONFIG_CLASSES=[s,a],t.FJCONFIG_TYPE_MP4="video/mp4"),u=t.FJCONFIG_TYPE_DASH="dash",l=(t.FJCONFIG_TYPES=[o,u],t.FJCONFIG_ADS_CLASS_PRE_ROLL="pre-roll"),c=t.FJCONFIG_ADS_CLASS_MID_ROLL="mid-roll",d=t.FJCONFIG_ADS_CLASS_POST_ROLL="post-roll",h=(t.FJCONFIG_ADS_CLASSES=[l,c,d],t.AdsEnum={ADS_PRE_ROLL:"ADS_PRE_ROLL",ADS_MID_ROLL:"ADS_MID_ROLL",ADS_POST_ROLL:"ADS_POST_ROLL"},{STREAM_LOADED:"STREAM_LOADED",TRACKS_ADDED:"TRACKS_ADDED",PLAYBACK_ERROR:"PLAYBACK_ERROR",PLAYBACK_STARTED:"PLAYBACK_STARTED",PLAYBACK_PAUSED:"PLAYBACK_PAUSED",PLAYBACK_SEEKING:"PLAYBACK_SEEKING",PLAYBACK_SEEKED:"PLAYBACK_SEEKED",PLAYBACK_ENDED:"PLAYBACK_ENDED",PLAYBACK_TIME_UPDATE:"PLAYBACK_TIME_UPDATE"}),f={ADS_USER_CLICKED:"ADS_USER_CLICKED",ADS_PLAYBACK_STARTED:"ADS_PLAYBACK_STARTED",ADS_PLAYBACK_ENDED:"ADS_PLAYBACK_ENDED",ADS_PLAYBACK_ERROR:"ADS_PLAYBACK_ERROR"},p={OVERLAY_USER_CLICKED:"OVERLAY_USER_CLICKED",OVERLAY_STARTED:"OVERLAY_STARTED",OVERLAY_ENDED:"OVERLAY_ENDED",OVERLAY_ERROR:"OVERLAY_ERROR",OVERLAY_SKIPPED:"OVERLAY_SKIPPED"};t.PlayerEvents=h,t.AdsEvents=f,t.OverlayEvents=p},function(e,t,n){var i=n(19);"string"==typeof i&&(i=[[e.i,i,""]]);n(22)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){"use strict";function i(){function e(e,t){r.hasOwnProperty(e)?r[e].push(t):r[e]=[t]}function t(e,t){var n=-1;r.hasOwnProperty(e)&&-1!==(n=r[e].indexOf(t))&&r[e].splice(n,1)}function n(e,t){var n,i,a;if(r.hasOwnProperty(e))for(n=r[e],i=n.length,a=0;a<i;a++)n[a](e,t)}var r={};return{fireEvent:n,addEventListener:e,removeEventListener:t,on:e,off:t,constructor:i}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,n){"use strict";function i(e){var t=parseInt(e,10),n=Math.floor(t/3600),i=Math.floor((t-3600*n)/60),r=t-3600*n-60*i;return i<10&&(i="0"+i),r<10&&(r="0"+r),0===n?i+":"+r:(n<10&&(n="0"+n),n+":"+i+":"+r)}Object.defineProperty(t,"__esModule",{value:!0}),t.duration=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.isoLangs={ab:{name:"Abkhaz",nativeName:"аҧсуа"},aa:{name:"Afar",nativeName:"Afaraf"},af:{name:"Afrikaans",nativeName:"Afrikaans"},ak:{name:"Akan",nativeName:"Akan"},sq:{name:"Albanian",nativeName:"Shqip"},am:{name:"Amharic",nativeName:"አማርኛ"},ar:{name:"Arabic",nativeName:"العربية"},an:{name:"Aragonese",nativeName:"Aragonés"},hy:{name:"Armenian",nativeName:"Հայերեն"},as:{name:"Assamese",nativeName:"অসমীয়া"},av:{name:"Avaric",nativeName:"авар мацӀ, магӀарул мацӀ"},ae:{name:"Avestan",nativeName:"avesta"},ay:{name:"Aymara",nativeName:"aymar aru"},az:{name:"Azerbaijani",nativeName:"azərbaycan dili"},bm:{name:"Bambara",nativeName:"bamanankan"},ba:{name:"Bashkir",nativeName:"башҡорт теле"},eu:{name:"Basque",nativeName:"euskara, euskera"},be:{name:"Belarusian",nativeName:"Беларуская"},bn:{name:"Bengali",nativeName:"বাংলা"},bh:{name:"Bihari",nativeName:"भोजपुरी"},bi:{name:"Bislama",nativeName:"Bislama"},bs:{name:"Bosnian",nativeName:"bosanski jezik"},br:{name:"Breton",nativeName:"brezhoneg"},bg:{name:"Bulgarian",nativeName:"български език"},my:{name:"Burmese",nativeName:"ဗမာစာ"},ca:{name:"Catalan; Valencian",nativeName:"Català"},ch:{name:"Chamorro",nativeName:"Chamoru"},ce:{name:"Chechen",nativeName:"нохчийн мотт"},ny:{name:"Chichewa; Chewa; Nyanja",nativeName:"chiCheŵa, chinyanja"},zh:{name:"Chinese",nativeName:"中文 (Zhōngwén), 汉语, 漢語"},cv:{name:"Chuvash",nativeName:"чӑваш чӗлхи"},kw:{name:"Cornish",nativeName:"Kernewek"},co:{name:"Corsican",nativeName:"corsu, lingua corsa"},cr:{name:"Cree",nativeName:"ᓀᐦᐃᔭᐍᐏᐣ"},hr:{name:"Croatian",nativeName:"hrvatski"},cs:{name:"Czech",nativeName:"česky, čeština"},da:{name:"Danish",nativeName:"dansk"},dv:{name:"Divehi; Dhivehi; Maldivian;",nativeName:"ދިވެހި"},nl:{name:"Dutch",nativeName:"Nederlands, Vlaams"},en:{name:"English",nativeName:"English"},eo:{name:"Esperanto",nativeName:"Esperanto"},et:{name:"Estonian",nativeName:"eesti, eesti keel"},ee:{name:"Ewe",nativeName:"Eʋegbe"},fo:{name:"Faroese",nativeName:"føroyskt"},fj:{name:"Fijian",nativeName:"vosa Vakaviti"},fi:{name:"Finnish",nativeName:"suomi, suomen kieli"},fr:{name:"French",nativeName:"français, langue française"},ff:{name:"Fula; Fulah; Pulaar; Pular",nativeName:"Fulfulde, Pulaar, Pular"},gl:{name:"Galician",nativeName:"Galego"},ka:{name:"Georgian",nativeName:"ქართული"},de:{name:"German",nativeName:"Deutsch"},el:{name:"Greek, Modern",nativeName:"Ελληνικά"},gn:{name:"Guaraní",nativeName:"Avañeẽ"},gu:{name:"Gujarati",nativeName:"ગુજરાતી"},ht:{name:"Haitian; Haitian Creole",nativeName:"Kreyòl ayisyen"},ha:{name:"Hausa",nativeName:"Hausa, هَوُسَ"},he:{name:"Hebrew (modern)",nativeName:"עברית"},hz:{name:"Herero",nativeName:"Otjiherero"},hi:{name:"Hindi",nativeName:"हिन्दी, हिंदी"},ho:{name:"Hiri Motu",nativeName:"Hiri Motu"},hu:{name:"Hungarian",nativeName:"Magyar"},ia:{name:"Interlingua",nativeName:"Interlingua"},id:{name:"Indonesian",nativeName:"Bahasa Indonesia"},ie:{name:"Interlingue",nativeName:"Originally called Occidental; then Interlingue after WWII"},ga:{name:"Irish",nativeName:"Gaeilge"},ig:{name:"Igbo",nativeName:"Asụsụ Igbo"},ik:{name:"Inupiaq",nativeName:"Iñupiaq, Iñupiatun"},io:{name:"Ido",nativeName:"Ido"},is:{name:"Icelandic",nativeName:"Íslenska"},it:{name:"Italian",nativeName:"Italiano"},iu:{name:"Inuktitut",nativeName:"ᐃᓄᒃᑎᑐᑦ"},ja:{name:"Japanese",nativeName:"日本語 (にほんご／にっぽんご)"},jv:{name:"Javanese",nativeName:"basa Jawa"},kl:{name:"Kalaallisut, Greenlandic",nativeName:"kalaallisut, kalaallit oqaasii"},kn:{name:"Kannada",nativeName:"ಕನ್ನಡ"},kr:{name:"Kanuri",nativeName:"Kanuri"},ks:{name:"Kashmiri",nativeName:"कश्मीरी, كشميري‎"},kk:{name:"Kazakh",nativeName:"Қазақ тілі"},km:{name:"Khmer",nativeName:"ភាសាខ្មែរ"},ki:{name:"Kikuyu, Gikuyu",nativeName:"Gĩkũyũ"},rw:{name:"Kinyarwanda",nativeName:"Ikinyarwanda"},ky:{name:"Kirghiz, Kyrgyz",nativeName:"кыргыз тили"},kv:{name:"Komi",nativeName:"коми кыв"},kg:{name:"Kongo",nativeName:"KiKongo"},ko:{name:"Korean",nativeName:"한국어 (韓國語), 조선말 (朝鮮語)"},ku:{name:"Kurdish",nativeName:"Kurdî, كوردی‎"},kj:{name:"Kwanyama, Kuanyama",nativeName:"Kuanyama"},la:{name:"Latin",nativeName:"latine, lingua latina"},lb:{name:"Luxembourgish, Letzeburgesch",nativeName:"Lëtzebuergesch"},lg:{name:"Luganda",nativeName:"Luganda"},li:{name:"Limburgish, Limburgan, Limburger",nativeName:"Limburgs"},ln:{name:"Lingala",nativeName:"Lingála"},lo:{name:"Lao",nativeName:"ພາສາລາວ"},lt:{name:"Lithuanian",nativeName:"lietuvių kalba"},lu:{name:"Luba-Katanga",nativeName:""},lv:{name:"Latvian",nativeName:"latviešu valoda"},gv:{name:"Manx",nativeName:"Gaelg, Gailck"},mk:{name:"Macedonian",nativeName:"македонски јазик"},mg:{name:"Malagasy",nativeName:"Malagasy fiteny"},ms:{name:"Malay",nativeName:"bahasa Melayu, بهاس ملايو‎"},ml:{name:"Malayalam",nativeName:"മലയാളം"},mt:{name:"Maltese",nativeName:"Malti"},mi:{name:"Māori",nativeName:"te reo Māori"},mr:{name:"Marathi (Marāṭhī)",nativeName:"मराठी"},mh:{name:"Marshallese",nativeName:"Kajin M̧ajeļ"},mn:{name:"Mongolian",nativeName:"монгол"},na:{name:"Nauru",nativeName:"Ekakairũ Naoero"},nv:{name:"Navajo, Navaho",nativeName:"Diné bizaad, Dinékʼehǰí"},nb:{name:"Norwegian Bokmål",nativeName:"Norsk bokmål"},nd:{name:"North Ndebele",nativeName:"isiNdebele"},ne:{name:"Nepali",nativeName:"नेपाली"},ng:{name:"Ndonga",nativeName:"Owambo"},nn:{name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk"},no:{name:"Norwegian",nativeName:"Norsk"},ii:{name:"Nuosu",nativeName:"ꆈꌠ꒿ Nuosuhxop"},nr:{name:"South Ndebele",nativeName:"isiNdebele"},oc:{name:"Occitan",nativeName:"Occitan"},oj:{name:"Ojibwe, Ojibwa",nativeName:"ᐊᓂᔑᓈᐯᒧᐎᓐ"},cu:{name:"Old Church Slavonic, Church Slavic, Church Slavonic, Old Bulgarian, Old Slavonic",nativeName:"ѩзыкъ словѣньскъ"},om:{name:"Oromo",nativeName:"Afaan Oromoo"},or:{name:"Oriya",nativeName:"ଓଡ଼ିଆ"},os:{name:"Ossetian, Ossetic",nativeName:"ирон æвзаг"},pa:{name:"Panjabi, Punjabi",nativeName:"ਪੰਜਾਬੀ, پنجابی‎"},pi:{name:"Pāli",nativeName:"पाऴि"},fa:{name:"Persian",nativeName:"فارسی"},pl:{name:"Polish",nativeName:"polski"},ps:{name:"Pashto, Pushto",nativeName:"پښتو"},pt:{name:"Portuguese",nativeName:"Português"},qu:{name:"Quechua",nativeName:"Runa Simi, Kichwa"},rm:{name:"Romansh",nativeName:"rumantsch grischun"},rn:{name:"Kirundi",nativeName:"kiRundi"},ro:{name:"Romanian, Moldavian, Moldovan",nativeName:"română"},ru:{name:"Russian",nativeName:"русский язык"},sa:{name:"Sanskrit (Saṁskṛta)",nativeName:"संस्कृतम्"},sc:{name:"Sardinian",nativeName:"sardu"},sd:{name:"Sindhi",nativeName:"सिन्धी, سنڌي، سندھی‎"},se:{name:"Northern Sami",nativeName:"Davvisámegiella"},sm:{name:"Samoan",nativeName:"gagana faa Samoa"},sg:{name:"Sango",nativeName:"yângâ tî sängö"},sr:{name:"Serbian",nativeName:"српски језик"},gd:{name:"Scottish Gaelic; Gaelic",nativeName:"Gàidhlig"},sn:{name:"Shona",nativeName:"chiShona"},si:{name:"Sinhala, Sinhalese",nativeName:"සිංහල"},sk:{name:"Slovak",nativeName:"slovenčina"},sl:{name:"Slovene",nativeName:"slovenščina"},so:{name:"Somali",nativeName:"Soomaaliga, af Soomaali"},st:{name:"Southern Sotho",nativeName:"Sesotho"},es:{name:"Spanish; Castilian",nativeName:"español, castellano"},su:{name:"Sundanese",nativeName:"Basa Sunda"},sw:{name:"Swahili",nativeName:"Kiswahili"},ss:{name:"Swati",nativeName:"SiSwati"},sv:{name:"Swedish",nativeName:"svenska"},ta:{name:"Tamil",nativeName:"தமிழ்"},te:{name:"Telugu",nativeName:"తెలుగు"},tg:{name:"Tajik",nativeName:"тоҷикӣ, toğikī, تاجیکی‎"},th:{name:"Thai",nativeName:"ไทย"},ti:{name:"Tigrinya",nativeName:"ትግርኛ"},bo:{name:"Tibetan Standard, Tibetan, Central",nativeName:"བོད་ཡིག"},tk:{name:"Turkmen",nativeName:"Türkmen, Түркмен"},tl:{name:"Tagalog",nativeName:"Wikang Tagalog, ᜏᜒᜃᜅ᜔ ᜆᜄᜎᜓᜄ᜔"},tn:{name:"Tswana",nativeName:"Setswana"},to:{name:"Tonga (Tonga Islands)",nativeName:"faka Tonga"},tr:{name:"Turkish",nativeName:"Türkçe"},ts:{name:"Tsonga",nativeName:"Xitsonga"},tt:{name:"Tatar",nativeName:"татарча, tatarça, تاتارچا‎"},tw:{name:"Twi",nativeName:"Twi"},ty:{name:"Tahitian",nativeName:"Reo Tahiti"},ug:{name:"Uighur, Uyghur",nativeName:"Uyƣurqə, ئۇيغۇرچە‎"},uk:{name:"Ukrainian",nativeName:"українська"},ur:{name:"Urdu",nativeName:"اردو"},uz:{name:"Uzbek",nativeName:"zbek, Ўзбек, أۇزبېك‎"},ve:{name:"Venda",nativeName:"Tshivenḓa"},vi:{name:"Vietnamese",nativeName:"Tiếng Việt"},vo:{name:"Volapük",nativeName:"Volapük"},wa:{name:"Walloon",nativeName:"Walon"},cy:{name:"Welsh",nativeName:"Cymraeg"},wo:{name:"Wolof",nativeName:"Wollof"},fy:{name:"Western Frisian",nativeName:"Frysk"},xh:{name:"Xhosa",nativeName:"isiXhosa"},yi:{name:"Yiddish",nativeName:"ייִדיש"},yo:{name:"Yoruba",nativeName:"Yorùbá"},za:{name:"Zhuang, Chuang",nativeName:"Saɯ cueŋƅ, Saw cuengh"}}},function(e,t,n){"use strict";function i(){}Object.defineProperty(t,"__esModule",{value:!0});i.prototype.getVersion=function(){return"0.2.10"},i.prototype.getCommits=function(){return"13"},i.prototype.getShortHash=function(){return"g2894e9b"},t.default=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){function n(e){var t=parseInt(e,10),n=Math.floor(t/3600),i=Math.floor((t-3600*n)/60),r=t-3600*n-60*i;return i<10&&(i="0"+i),r<10&&(r="0"+r),0===n?i+":"+r:(n<10&&(n="0"+n),n+":"+i+":"+r)}function i(e,t){var n,i=!0;return!0!==t&&(i=!1),D=e,j?null===(n=P.getItem(e))?(O.error(" No item to play at index ",D," playlist is sized ",P.getSize()),!1):(H.setTitle(n[h.FJCONFIG_TITLE]),V.setThumbsUrl(n[h.FJCONFIG_THUMBS]),V.Unload(),null!==n[h.FJCONFIG_SRC]||void 0!==n[h.FJCONFIG_SRC]?(n[h.FJCONFIG_TYPE]===h.FJCONFIG_TYPE_DASH?(F=!0,O.warn(" will play a clear dash on caption obect ",H.getVideoCaption()),V.loadDash(n[h.FJCONFIG_SRC],n[h.FJCONFIG_POSTER],n[h.FJCONFIG_SUBTITLES],H.getVideoCaption(),i,n[h.FJCONFIG_DRM])):V.load(n[h.FJCONFIG_SRC],n[h.FJCONFIG_TYPE],n[h.FJCONFIG_POSTER],n[h.FJCONFIG_SUBTITLES],i),!0):(O.error("src of item is not valid , at index ",D),!1)):(O.error(" No playlist is loaded on player "),!1)}function a(){return j?(x=!0,D++,O.log(" will play next",D," in playlist is loaded on player "),P.getSize()<D?(!0===R&&(D=0),!1):(i(D),H.ShowVideo(),H.onplaypauseClick(),!0)):(O.error(" No playlist is loaded on player "),!1)}function o(e,t){if(O.debug(" just a new event from adsmgr ",e,t),O.warn("Sending Ads Event >>>>>>>>>>>>>>>>>   ",e),U.fireEvent(e),e===h.AdsEvents.ADS_PLAYBACK_ENDED){if(M=!1,t===h.AdsEnum.ADS_PRE_ROLL){if(!0===K.CheckPreAds())return;return H.ShowVideo(),V.play(),void H.toggleplaypauseBtn()}if(t===h.AdsEnum.ADS_POST_ROLL){if(!0===K.CheckPostAds())return;!0===x&&(H.toggleplaypauseBtn(),H.ShowVideo(),a())}else t===h.AdsEnum.ADS_MID_ROLL?(H.ShowVideo(),V.play(),H.toggleplaypauseBtn()):O.warn(" unknown Ads type !! ",t)}e===h.AdsEvents.ADS_PLAYBACK_STARTED&&(M=!0,V.pause(),H.hideVideo())}function l(e){var t;return G.CheckOverlays(e),t&=K.CheckMidAds(e)}function d(){return j?(x=!0,D--,O.log(" will play next",D," in playlist is loaded on player "),D<0?(!0===R&&(D=P.getSize()-1),!1):(i(D),H.ShowVideo(),H.onplaypauseClick(),!0)):(O.error(" No playlist is loaded on player "),!1)}function f(e,t){var n,i;if(e===h.PlayerEvents.PLAYBACK_TIME_UPDATE)H.UpdateProgress(V.time()),i=H.getVideo(),H.setDuration(V.getDuration()),l(Math.round(V.time()));else if(e===h.PlayerEvents.PLAYBACK_ENDED&&(!0===K.CheckPostAds()?O.debug("starting  post ads !!"):!0===x&&a()),e===h.PlayerEvents.PLAYBACK_STARTED&&(1===t&&(!1===K.CheckPreAds()?V.play():V.pause()),H.HideSpinner(),H.toggleplaypauseBtn(),H.setDuration(V.getDuration())),e===h.PlayerEvents.TRACKS_ADDED&&H.SetupSubsAudsManager(V),e===h.PlayerEvents.STREAM_LOADED&&(H.ShowSpinner(),H.SetupThumbsManager(V.getDuration(),t),H.SetupSubsAudsManager(V),H.setDuration(V.getDuration()),n=P.getItem(D),G.Setup(n[h.FJCONFIG_OVERLAYS]),i=H.getVideo(),K.Setup(n[h.FJCONFIG_ADS],i.videoWidth,i.videoHeight)),e===h.PlayerEvents.PLAYBACK_SEEKING&&H.ShowSpinner(),e===h.PlayerEvents.PLAYBACK_SEEKED&&H.HideSpinner(),O.info("[Event] [trigger] > ",e),U.fireEvent(e),e===h.PlayerEvents.PLAYBACK_ERROR)throw H.goForError(),new E.default(t.code,t.type,t.message,document.getElementById(H.getErrorDivId()))}function m(e){return O.log(" start  function "),J?e.getSize()>0?(P=e,j=!0,H.initialize(this),V.on(h.PlayerEvents.TRACKS_ADDED,f),V.on(h.PlayerEvents.STREAM_LOADED,f),V.on(h.PlayerEvents.PLAYBACK_STARTED,f),V.on(h.PlayerEvents.PLAYBACK_ERROR,f),V.on(h.PlayerEvents.PLAYBACK_PAUSED,f),V.on(h.PlayerEvents.PLAYBACK_ENDED,f),V.on(h.PlayerEvents.PLAYBACK_SEEKED,f),V.on(h.PlayerEvents.PLAYBACK_SEEKING,f),V.on(h.PlayerEvents.PLAYBACK_TIME_UPDATE,f),K.on(h.AdsEvents.ADS_PLAYBACK_STARTED,o),K.on(h.AdsEvents.ADS_PLAYBACK_ERROR,o),K.on(h.AdsEvents.ADS_PLAYBACK_ENDED,o),V.initialize(H.getVideo()),G.initialize(document.getElementById(H.getOverlaysContainerDivId())),K.initialize(document.getElementById(H.getAdsContainerDivId())),!0):(O.error(" playlist is empty: ",e.getSize()),j=!1,!1):(O.error(" browser did not support video !"),!1)}function g(e,t){var n=!0;return!0!==t&&(n=!1),x=!1,i(e,n)}function y(e,t,n,i){var r,a=!0;return!0!==i&&(a=!1),D=e,j?void 0===(r=P.getItem(D))?(O.error(" No item to play at index ",D," playlist is sized ",P.getSize()),!1):(x=!0,R=t,H.setTitle(r[h.FJCONFIG_TITLE]),V.setThumbsUrl(r[h.FJCONFIG_THUMBS]),null!==r[h.FJCONFIG_SRC]||void 0!==r[h.FJCONFIG_SRC]?(r[h.FJCONFIG_TYPE]===h.FJCONFIG_TYPE_DASH?(F=!0,V.loadDash(r[h.FJCONFIG_SRC],r[h.FJCONFIG_POSTER],r[h.FJCONFIG_SUBTITLES],H.getVideoCaption(),a,r[h.FJCONFIG_DRM])):V.load(r[h.FJCONFIG_SRC],r[h.FJCONFIG_TYPE],r[h.FJCONFIG_POSTER],r[h.FJCONFIG_SUBTITLES],a),!0):(O.error("src of item is not valid , at index ",D),!1)):(O.error(" No playlist is loaded on player "),!1)}function w(e){V.seek(e)}function S(){V.Unload(),H.reset()}function T(){V.pause(),!1===K.CheckPreAds()&&V.play(),H.toggleplaypauseBtn()}function A(){V.pause(),H.toggleplaypauseBtn()}function N(){return M}function I(){return j}function L(){return V.isPaused()}function C(){return V.isEnded()}function k(e,t){return U.on(e,t)}function _(e,t){return U.off(e,t)}var O=new s.default(this),P=null,x=!1,R=!1,D=-1,F=!1,j=!1,M=!1,U=new c.default,B=t,G=new u.default,K=new b.default,J=!!document.createElement("video").canPlayType,H=new v.default(B,"100%",""),V=new p.default;return{duration:n,loadPlaylist:m,playAt:g,startPlaylist:y,play:T,reset:S,seek:w,playNext:a,playPrev:d,pause:A,isPaused:L,isPlayingAds:N,isReady:I,isEnded:C,on:k,off:_,constructor:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=i(a),o=n(14),u=i(o),l=n(3),c=i(l),d=n(1),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d),f=n(11),p=i(f),m=n(15),v=i(m),g=n(12),b=i(g),y=n(18),E=i(y);t.default=r},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(){function e(){return g.length}function t(e){return v.info(" Getting item at position ",e),g.length>e?g[e]:(v.error(" No item to play at index ",e," playlist is sized ",g.length),null)}function n(e){var t;return null!==e&&void 0!==e&&(e[u.FJCONFIG_LANG]?(t=c.isoLangs[e[u.FJCONFIG_LANG]],v.log(t," playlist Subtitle lang is",e[u.FJCONFIG_LANG]),null===t||void 0===t?(v.error("No ISO code of lang  ",t),!1):e[u.FJCONFIG_SRC]?(v.log(" playlist Subtitle src is",e[u.FJCONFIG_SRC]),!0):(v.error("Empty Subtitle src "),!1)):(v.error("Empty Subtitle lang  "),!1))}function i(e){var t=e;return null!==e&&void 0!==e&&(void 0===(t=e[u.FJCONFIG_DATA])||null===t||""===t?(v.error("Empty Overlay data"),!1):(v.log(" playlist Overlay data ",t),void 0===(t=e[u.FJCONFIG_URL])||null===t||""===t?(v.error("Empty Overlay url"),!1):(v.log(" ok playlist Overlay url ",t),void 0===(t=e[u.FJCONFIG_DURATION])||null===t||""===t?(v.error("Empty Overlay duration "),!1):t!==parseInt(t,10)?(v.error(t,":Empty Overlay duration is not integer !"),!1):(v.log(" integer playlist Overlay duration ",t),void 0===(t=e[u.FJCONFIG_SHOW_AT])||null===t||""===t?(v.error("Empty Overlay show at "),!1):t!==parseInt(t,10)?(v.error(t,":Empty Overlay show at is not integer !"),!1):(v.log(" integer playlist Overlay show at ",t),!0)))))}function a(e){var t=null;return null!==e&&void 0!==e&&(v.debug("Cheking DRM > ",e),t=e[u.FJCONFIG_DRM_LICENSE_SERVER],v.info("Cheking DRM LA Server > ",t),void 0===t||null===t?(v.error("Empty LA Server  ! "),!1):(v.log(" playlist LA Server is  ",t),!0))}function o(e){return null!==e&&void 0!==e&&(-1===u.FJCONFIG_TYPES.indexOf(e[u.FJCONFIG_TYPE])?(v.error("BAD type Value ! "),!1):e[u.FJCONFIG_SRC]?-1===u.FJCONFIG_ADS_CLASSES.indexOf(e[u.FJCONFIG_CLASS])?(v.error(e[u.FJCONFIG_CLASS],":BAD class Value ! "),!1):e[u.FJCONFIG_SRC]!==u.FJCONFIG_ADS_CLASS_MID_ROLL||null!==e[u.FJCONFIG_SHOW_AT]&&void 0!==e[u.FJCONFIG_SHOW_AT]?void 0===e[u.FJCONFIG_URL]||null===e[u.FJCONFIG_URL]||""===e[u.FJCONFIG_URL]?(v.error("Empty Overlay url"),!1):(v.log(" playlist Overlay url ",e[u.FJCONFIG_URL]),"true"!==e[u.FJCONFIG_CAN_ESCAPE]&&!0!==e[u.FJCONFIG_CAN_ESCAPE]&&"false"!==e[u.FJCONFIG_CAN_ESCAPE]&&!1!==e[u.FJCONFIG_CAN_ESCAPE]?(v.warn("can Escape is missing , will be set to true ! "),e[u.FJCONFIG_CAN_ESCAPE]=!0):v.debug("can Escape is already there : ",e[u.FJCONFIG_CAN_ESCAPE]),!0):(v.error("Missing Show At for mid Roll Class ! "),!1):(v.error("BAD src Value ! "),!1))}function l(e){var t,r,s={},l={};if(null===e||void 0===e)return v.error(" Item is NULL !",e),!1;if(v.log("  class of item  : ",e[u.FJCONFIG_CLASS]),-1===u.FJCONFIG_CLASSES.indexOf(e[u.FJCONFIG_CLASS]))return v.error("BAD class Value ! "),!1;if(v.log("  type of item  ",e[u.FJCONFIG_TYPE]),-1===u.FJCONFIG_TYPES.indexOf(e[u.FJCONFIG_TYPE]))return v.error("BAD type Value ! "),!1;if(v.log("  title of item  ",e[u.FJCONFIG_TITLE]),void 0===e[u.FJCONFIG_TITLE]||null===e[u.FJCONFIG_TITLE]||""===e[u.FJCONFIG_TITLE]||!e[u.FJCONFIG_TITLE])return v.error("BAD title Value ! "),!1;if(v.log("  src of item  ",e[u.FJCONFIG_SRC]),void 0===e[u.FJCONFIG_SRC]||null===e[u.FJCONFIG_SRC]||""===e[u.FJCONFIG_SRC]||!e[u.FJCONFIG_SRC])return v.error("BAD src Value ! "),!1;if(v.log("  poster of item  ",e[u.FJCONFIG_POSTER]),v.log("  thumbs of item  ",e[u.FJCONFIG_THUMBS]),null!==(r=e[u.FJCONFIG_ADS])&&void 0!==r&&r.length>0)for(t=0;t<r.length;t++)if(s=r[t],!1===o(s))return!1;if(null!==(l=e[u.FJCONFIG_DRM])&&void 0!==l&&!1===a(l))return!1;if(null!==(r=e[u.FJCONFIG_SUBTITLES])&&void 0!==r&&r.length>0)for(t=0;t<r.length;t++)if(s=r[t],!1===n(s))return!1;if(null!==(r=e[u.FJCONFIG_OVERLAYS])&&void 0!==r&&r.length>0)for(t=0;t<r.length;t++)if(s=r[t],!1===i(s))return!1;return!0}function d(e){return!0===l(e)?(g.push(e),v.info("Item added ok ",g.length),!0):(v.error(" Failed to add item"),!1)}function h(e,t){var i=g[e],r=i[u.FJCONFIG_SUBTITLES];return void 0!==i&&(!1!==n(t)&&(void 0!==r&&0!==r.length||(r=[]),r.push(t),!0))}function f(e,t){var n=g[e],r=n[u.FJCONFIG_OVERLAYS];return void 0!==n&&(!1!==i(t)&&(void 0!==r&&0!==r.length||(r=[]),r.push(t),!0))}function p(e,t){var n=g[e],i=n[u.FJCONFIG_DRM];return void 0!==n&&(!1!==a(t)&&(void 0!==i&&0!==i.length||(i=[]),i.push(t),!0))}function m(e,t){var n=g[e],i=n[u.FJCONFIG_ADS];return void 0!==n&&(!1!==o(t)&&(void 0!==i&&0!==i.length||(i=[]),i.push(t),!0))}var v=new s.default(this),g=[];return{getSize:e,getItem:t,addItem:d,addSubtitle:h,addOverlay:f,setDrm:p,addAds:m,checkSubtitle:n,checkOverlay:i,checkDrm:a,checkAds:o,checkItem:l,constructor:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(1),u=i(o),l=n(5),c=i(l);t.default=r},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayEvents=t.AdsEvents=t.PlayerEvents=t.Version=t.Player=t.Playlist=void 0;var r=n(8),a=i(r),s=n(7),o=i(s),u=n(6),l=i(u),c=n(1),d="undefined"!=typeof window&&window||e,h=d.fjplayer;h||(h=d.fjplayer={}),h.Playlist=a.default,h.Player=o.default,h.Version=l.default,h.PlayerEvents=c.PlayerEvents,h.AdsEvents=c.AdsEvents,h.OverlayEvents=c.OverlayEvents,t.default=h,t.Playlist=a.default,t.Player=o.default,t.Version=l.default,t.PlayerEvents=c.PlayerEvents,t.AdsEvents=c.AdsEvents,t.OverlayEvents=c.OverlayEvents}).call(t,n(9))},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function a(){function e(e){if(p.polyfill.installAll(),!p.Player.isBrowserSupported())return Y.error("Browser not supported !"),!1;if(!(j=e))throw new Error("Please call initialize with a valid Player UI having a video html 5 element ");M=!0,Y.debug(" Media player just initialized with playerUiVideo")}function t(e,t){return q.on(e,t)}function n(e,t){return q.off(e,t)}function i(){!0===M?j.play():Y.warn(" No Media Loaded , nothing to play ")}function r(){if(!0===M)return j.currentTime;Y.warn(" No Media Loaded ! ")}function s(){return!0===M?j.paused:(Y.warn(" No Media Loaded ! "),!0)}function u(){return!0===M?j.ended:(Y.warn(" No Media Loaded ! "),!0)}function c(){return!0===M?j.muted:(Y.warn(" No Media Loaded ! "),!0)}function h(e){!0===M?j.volume=e:Y.warn(" No Media Loaded ! ")}function m(){if(!0===M)return j.duration;Y.warn(" No Media Loaded ! ")}function v(){if(!0===M)return j.volume;Y.warn(" No Media Loaded ! ")}function g(e){null!==e&&void 0!==e&&""!==e?(B=e,Y.debug(" Setting url for thumbs @",e)):(B=null,Y.debug(" No Setting url for thumbs "))}function b(e){var t=parseInt(e),n=0;if(Y.warn(" Setting text track to index : ",t),!0===M)for(n=0;n<j.textTracks.length;n++)"captions"!==j.textTracks[n].kind&&"subtitles"!==j.textTracks[n].kind||(j.textTracks[n].mode=t===n?"showing":"hidden")}function y(e){!0===M?j.muted=e:Y.warn(" No Media Loaded ! ")}function E(){!0===M?j.pause():Y.warn(" No Media Loaded , nothing to pause ")}function w(e){!0===M?j.currentTime=parseFloat(e):Y.warn(" No Media Loaded , nothing to seek ")}function S(e){A(e.detail)}function T(e){Y.warn("Eventing  [",event.type,"]:",event)}function A(e){Y.error("Error code",e.code,"object",e)}function N(e){U++,q.fireEvent(d.PlayerEvents.PLAYBACK_STARTED,U)}function I(e){q.fireEvent(d.PlayerEvents.PLAYBACK_PAUSED)}function L(e){K=!0,q.fireEvent(d.PlayerEvents.PLAYBACK_ENDED)}function C(e){var t=0;if(!0!==M)return void Y.warn(" Internal error !");t=j.currentTime,q.fireEvent(d.PlayerEvents.PLAYBACK_TIME_UPDATE,t)}function k(e){q.fireEvent(d.PlayerEvents.PLAYBACK_SEEKED)}function _(e){q.fireEvent(d.PlayerEvents.PLAYBACK_SEEKING)}function O(e){e.event.message;void 0===e.event.message&&e.event;var t={type:e.type,code:e.error,message:msgonStreamInitialized};Y.error(">>>>>>>>>>>>>>> ERROR !!:",e),q.fireEvent(d.PlayerEvents.PLAYBACK_ERROR,t)}function P(){var e=0;if(G=-1,null!==B)for(e=0;e<j.textTracks.length;e++)if("metadata"===j.textTracks[e].kind)G=e,j.textTracks[e].mode="hidden",Y.warn("find  metadata tumbs  @ ",G,"/",j.textTracks.length," >>> and video duration ;;; ",m());else if("captions"===j.textTracks[e].kind||"subtitles"===j.textTracks[e].kind){Y.warn("find  soustitres  @ ",G,"/",j.textTracks.length," >>> ",j.textTracks[e]);break}Y.info(" stream is completly loaded  "),-1!==G&&-1!==B?q.fireEvent(d.PlayerEvents.STREAM_LOADED,G):q.fireEvent(d.PlayerEvents.STREAM_LOADED,null)}function x(e,t){var n=null,i=null,r=null,a=null,s=0,o=0;if(null!==e&&void 0!==e)for(s=0;s<e.length;s++)i=e[s],n=document.createElement("track"),n.kind="subtitles",n.src=i[d.FJCONFIG_SRC],n.srclang=i[d.FJCONFIG_LANG],r=f.isoLangs[i[d.FJCONFIG_LANG]],Y.log(" Appending track substitles with Label",r.name),o=r.name.indexOf(","),-1===o&&(o=r.name.indexOf(";")),a=-1===o?r.name:r.name.substr(0,o),n.label=a,t.appendChild(n);else Y.debug("no vtt Subs are found in config.")}function R(){var e=j,t=null;if(!0!==M)return void Y.warn("not yet initialized !");for(t=e.cloneNode(!0),e.parentNode.replaceChild(t,e),j=t;j.hasChildNodes();)j.removeChild(j.firstChild);j.removeAttribute("poster"),V===X.MP4_CLEAR?(j.removeEventListener("loadedmetadata",P),j.removeEventListener("play",N),j.removeEventListener("pause",I),j.removeEventListener("ended",L),j.removeEventListener("timeupdate",C),j.removeEventListener("seeking",_),j.removeEventListener("seeked",k),j.removeEventListener("error",O)):(z.removeEventListener("error",S),z.removeEventListener("adaptation",T),z.removeEventListener("buffering",T),z.removeEventListener("emsg",T),z.removeEventListener("expirationupdated",T),z.removeEventListener("largegap",T),z.removeEventListener("loading",T),z.removeEventListener("texttrackvisibility",T),z.removeEventListener("timelineregionadded",T),z.removeEventListener("timelineregionenter",T),z.removeEventListener("timelineregionexit",T),z.removeEventListener("trackschanged",T),z.removeEventListener("unloading",T),z.destroy(),z=null),V=a.UNKNOWN}function D(e,t,n,i,r){var a=null,s=document.createElement("source");s.type=t,s.src=e,j.preload=!0,j.controls=!1,j.autoplay=r,j.appendChild(s),null!==n&&void 0!==n&&""!==n&&j.setAttribute("poster",n),V=X.MP4_CLEAR,null!==B&&void 0!==B?(a=document.createElement("track"),a.kind="metadata",a.src=B,Y.log(" Appending source thumbs to video",a),j.appendChild(a)):Y.warn(" Thumbs was not found ."),x(i,j),j.addEventListener("loadedmetadata",P,!1),j.addEventListener("play",N,!1),j.addEventListener("pause",I,!1),j.addEventListener("ended",L,!1),j.addEventListener("timeupdate",C,!1),j.addEventListener("seeked",k,!1),j.addEventListener("seeking",_,!1),j.addEventListener("error",O,!1),Y.info(" Clear MP4 stream is loaded @ ",e)}function F(e,t,n,i,r,a){var s=null;null!==t&&void 0!==t&&""!==t&&j.setAttribute("poster",t),j.preload=!0,j.controls=!1,j.autoplay=r,null===z&&(z=new p.Player(j)),j.addEventListener("loadedmetadata",P,!1),j.addEventListener("play",N,!1),j.addEventListener("pause",I,!1),j.addEventListener("ended",L,!1),j.addEventListener("timeupdate",C,!1),j.addEventListener("seeked",k,!1),j.addEventListener("seeking",_,!1),j.addEventListener("error",O,!1),z.addEventListener("error",S),z.addEventListener("adaptation",T),z.addEventListener("buffering",T),z.addEventListener("emsg",T),z.addEventListener("expirationupdated",T),z.addEventListener("largegap",T),z.addEventListener("loading",T),z.addEventListener("texttrackvisibility",T),z.addEventListener("timelineregionadded",T),z.addEventListener("timelineregionenter",T),z.addEventListener("timelineregionexit",T),z.addEventListener("trackschanged",T),z.addEventListener("unloading",T),J=e,void 0===a||null===a?(V=X.DASH_CLEAR,H=null,Y.info(" Loading CLEAR Dash @",J)):(V=X.DASH_ENCRYPTED,H=a,Y.info(" drm are ::: ",a),z.configure({drm:{servers:{"org.w3.clearkey":a[d.FJCONFIG_DRM_LICENSE_SERVER]}}}),Y.debug(" To Encrypt : using Forja System Key !."),Y.info(" Loading ENCRYPTED Dash @",J)),z.getNetworkingEngine().registerRequestFilter(function(e,t){e===p.net.NetworkingEngine.RequestType.LICENSE&&(t.headers["X-API-Key"]="VGhpc0lzQVRlc3QK")}),z.getNetworkingEngine().registerRequestFilter(function(e,t){e===p.net.NetworkingEngine.RequestType.LICENSE&&(t.uris[0]+="?CWIP-Auth-Param=VGhpc0lzQVRlc3QK")}),null!==B&&void 0!==B?(s=document.createElement("track"),s.kind="metadata",s.src=B,Y.log(" Appending source thumbs to video",s),j.appendChild(s)):Y.debug(" Thumbs was not found ."),x(n,j),z.load(e).then(function(){Y.log("The video has now been loaded!")}).catch(A),Y.info("  DASH stream is loaded @ ",e)}var j=null,M=!1,U=0,B=null,G=-1,K=!1,J=null,H=null,V=a.UNKNOWN,z=null,Y=new o.default(this),q=new l.default,X={UNKNOWN:0,MP4_CLEAR:1,DASH_CLEAR:2,DASH_ENCRYPTED:3,properties:{0:{name:"UNKNOWN",value:0,code:"U"},1:{name:"MP4_CLEAR",value:1,code:"M"},2:{name:"DASH_CLEAR",value:2,code:"D"},3:{name:"DASH_ENCRYPTED",value:3,code:"E"}}};return{initialize:e,on:t,off:n,StreamTypes:X,CurrentStreamType:V,play:i,stop:stop,pause:E,setTextTrack:b,isPaused:s,isEnded:u,isMuted:c,setMute:y,setVolume:h,getVolume:v,setThumbsUrl:g,getDuration:m,time:r,seek:w,Unload:R,load:D,loadDash:F,constructor:a}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),o=r(s),u=n(3),l=r(u),c=n(1),d=i(c),h=n(5),f=i(h),p=n(21);t.default=a},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function a(){function e(e,t){var n=T,i=null,r=y[e];if(!0!==m)return void p.warn(" AdsMgr is not yet settled !");for(r=t===l.AdsEnum.ADS_PRE_ROLL?w[e]:t===l.AdsEnum.ADS_MID_ROLL?y[e]:E[e],p.info(e,"stopping  Ads ",r[l.FJCONFIG_URL]," @@ ",r[l.FJCONFIG_SHOW_AT]),n=T,i=n.cloneNode(!0),n.parentNode.replaceChild(i,n),T=i;T.hasChildNodes();)T.removeChild(T.firstChild);T.innerHTML="",T.style.display="none",v.fireEvent(l.AdsEvents.ADS_PLAYBACK_ENDED,t)}function t(t,n){var i=!1,r=document.createElement("div"),a=document.createElement("span"),s=document.createElement("video"),o=document.createElement("source"),u=y[t];if(!0!==m)return void p.warn(" AdsMgr is not yet cettled !");n===l.AdsEnum.ADS_PRE_ROLL?(u=w[t],p.info(t,"starting PRE Ads ",w),p.info(t,"starting PRE Ads ",u[l.FJCONFIG_SRC])):n===l.AdsEnum.ADS_MID_ROLL?(u=y[t],p.info(t,"starting MId Ads ",u[l.FJCONFIG_SRC]," @@ ",u[l.FJCONFIG_SHOW_AT])):(u=E[t],p.info(t,"starting POST Ads ",u[l.FJCONFIG_SRC])),u.started=!0,v.fireEvent(l.AdsEvents.ADS_PLAYBACK_STARTED,n),s.preload=!0,s.controls=!1,s.autoplay=!1,s.setAttribute("width",g),s.setAttribute("height",b),p.warn(" ads video width/height is ",g,b),r.innerHTML='<span style="color: rgb(119, 255, 119); font-size: 0.95em;">Annonce</span> This an Ads for <span style="color: rgb(255, 255, 0)">'+u[l.FJCONFIG_URL]+"</span>",T.style.cursor="pointer",p.log(" Can escape this starting Ads ",u[l.FJCONFIG_CAN_ESCAPE]),r.style.display="block",r.classList.add("over-DL"),o.src=u[l.FJCONFIG_SRC],o.type=u[l.FJCONFIG_TYPE],s.appendChild(o),T.appendChild(s),r.appendChild(a),T.appendChild(r),T.style.display="block",s.play(),s.addEventListener("timeupdate",function(r){"true"===u[l.FJCONFIG_CAN_ESCAPE]||!0===u[l.FJCONFIG_CAN_ESCAPE]?s.currentTime>5?i||(a.innerHTML=', Can be escapped <span class="fj-icon-playNext" ></span>',a.addEventListener("click",function(){e(t,n)}),i=!0):a.innerHTML=", Can be escapped in "+Math.round(5-s.currentTime)+" secondes .":a.innerHTML=", it ends after "+d.duration(Math.round(s.duration-s.currentTime))+" ."}),s.addEventListener("click",function(){u.clicked++,v.fireEvent(l.AdsEvents.ADS_USER_CLICKED),window.open(u[l.FJCONFIG_URL],"_blank")}),s.addEventListener("ended",function(i){e(t,n)})}function n(e){var n=0,i=null,r=0;if(!0===m)for(n=0;n<y.length;n++)i=y[n],r=parseInt(i[l.FJCONFIG_SHOW_AT],10),e===r&&(p.info(n," starting Ads Now .. "),!1===y[n].started?(p.info(n," starting a new  Mid Ads .. "),y[n].started=!0,t(n,l.AdsEnum.ADS_MID_ROLL)):p.info(n," already started ",i[l.FJCONFIG_URL]," @@ ",i[l.FJCONFIG_SHOW_AT]))}function i(){var e=0,n=null;if(p.info(" Checking Pre Ads Now .. "),!0!==m)return p.warn("not yet Settled !"),!1;for(e=0;e<w.length;e++){if(n=w[e],p.info(e," starting Pre Ads Now .. "),!1===w[e].started)return p.info(e," starting a new Pre Ads .. @",e),w[e].started=!0,t(e,l.AdsEnum.ADS_PRE_ROLL),!0;p.info(e,"Pre already started ",n[l.FJCONFIG_URL]," @@ ",n[l.FJCONFIG_SHOW_AT])}return!1}function r(){var e=0,n=null;if(p.info(" Checking Post Ads Now .. "),!0!==m)return p.warn(" AdsMgr is not yet settled !"),!1;for(e=0;e<E.length;e++){if(n=E[e],p.info(e," starting Pre Ads Now .. "),!1===E[e].started)return p.info(e," starting a new Post Ads .. "),E[e].started=!0,t(e,l.AdsEnum.ADS_POST_ROLL),!0;p.info(e,"Post already started ",n[l.FJCONFIG_URL]," @@ ",n[l.FJCONFIG_SHOW_AT])}return!1}function s(e){T=e}function u(e,t,n){var i,r,a,s=0;if(null===e|void 0===e)return void(m=!1);for(S=e,g=t,b=n,s=0;s<S.length;s++)r=S[s],a=r[l.FJCONFIG_CLASS],a===l.FJCONFIG_ADS_CLASS_PRE_ROLL?(p.debug(" found a pre ads !"),i=w.push(r),w[i-1].started=!1,w[i-1].clicked=0):a===l.FJCONFIG_ADS_CLASS_POST_ROLL?(p.debug(" found a post ads !"),i=E.push(r),E[i-1].started=!1,E[i-1].clicked=0):(p.debug(" found a mid ads !"),i=y.push(r),y[i-1].started=!1,y[i-1].clicked=0);m=!0,p.info("Ads Setup is settled ",m),p.warn("Checking PRE ROLL Ads .. ",w.length),p.warn("Checking MID ROLL Ads .. ",y.length),p.warn("Checking POST ROLL Ads .. ",E.length)}function c(e,t){return v.on(e,t)}function h(e,t){return v.off(e,t)}var p=new o.default(this),m=!1,v=new f.default,g=0,b=0,y=[],E=[],w=[],S=null,T=null;return{CheckMidAds:n,CheckPreAds:i,CheckPostAds:r,Setup:u,on:c,off:h,initialize:s,constructor:a}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),o=r(s),u=n(1),l=i(u),c=n(4),d=i(c),h=n(3),f=r(h);t.default=a},function(e,t,n){"use strict";function i(e,t,n,r){function s(){!0===S&&!1===T.classList.contains("fj-hide")&&T.classList.add("fj-hide")}function o(){!0===N&&!1===I.classList.contains("fj-hide")&&I.classList.add("fj-hide")}function u(e,t){var n,i,r,a;a=!0===t?A:L;var u=Array.prototype.indexOf.call(a.childNodes,e),l=e.getAttribute("index");for(f.info("clicked is  selected @ index ",u," text index ",l),!0===t&&m.setTextTrack(l),n=0;n<a.children.length;n++)i=a.children[n],r=i.getAttribute("index"),l===r?(!1===t&&(p.audioTracks[n].enabled=!0),i.classList.remove("subtitles-menu-item"),i.classList.add("subtitles-menu-item-actif"),f.log("Setting item @  ",n)):(!1===t&&(p.audioTracks[n].enabled=!1),i.classList.remove("subtitles-menu-item-actif"),i.classList.add("subtitles-menu-item"),f.log("Unsetting item @  ",n));!0===t?s():o()}function l(e,t,n){var i=p.getBoundingClientRect(),r=t.getBoundingClientRect();e.classList.contains("fj-hide")?(f.warn("setting left @",r.right-n.pageX),f.warn("setting left @",r.left-n.pageX),e.style.left=n.pageX-i.left-r.width,e.classList.remove("fj-hide")):e.classList.add("fj-hide")}function c(){s(),o()}function d(e){f.info("Calling for setup Subs !!!");var t=null,n=0,i=!1,r=null;if(S=!1,m=e,f.info(" Trying to setup menu subs , text tracks length : ",p.textTracks),!p.textTracks||p.textTracks.length<=0)return S=!1,f.log(" Subs Menu not created !"),!1;for(n=0;n<p.textTracks.length;n++)if(f.debug(" @ text track number  ",n," and it type is ",p.textTracks[n].kind),"captions"===p.textTracks[n].kind||"subtitles"===p.textTracks[n].kind){S=!0;break}if(!1===S)return f.info(" Subs Menu Not created !! "),S;if(t=document.getElementById(v),f.info("Setting the btn ",t," from id ",v),null!==(A=document.getElementById(b)))for(;A.firstChild;)A.removeChild(A.firstChild);else T=document.createElement("div"),T.classList.add("settingMenuDiv"),T.classList.add("fj-hide"),T.innerHTML='<div class="fj-list-title"> Soutitres </div> <ul class="fj-list"  id="'+b+'" ></ul>\t',w.appendChild(T),t.addEventListener("click",function(e){l(T,this,e)}),A=document.getElementById(b);for(n=0;n<p.textTracks.length;n++)"captions"!==p.textTracks[n].kind&&"subtitles"!==p.textTracks[n].kind||(r=document.createElement("li"),"showing"===p.textTracks[n].mode?(r.classList.add("subtitles-menu-item-actif"),i=!0):r.classList.add("subtitles-menu-item"),r.setAttribute("index",n),r.innerHTML=p.textTracks[n].label,A.appendChild(r),r.addEventListener("click",function(e){u(this,!0)}),f.debug("Setting Subs List @ ",n," item is ",r));return r=document.createElement("li"),!1===i?r.classList.add("subtitles-menu-item-actif"):r.classList.add("subtitles-menu-item"),r.setAttribute("index",-1),r.innerHTML="off",A.appendChild(r),r.addEventListener("click",function(e){u(this)}),f.log("Setting Subs List @ ",-1," item is ",r),f.log(" Subs Menu  created !! ",T),S}function h(e){f.info("Calling for setup Auds !!!");var t=null,n=0,i=null;if(N=!1,f.info(" Trying to setup menu Auds , text tracks length : ",p.audioTracks),!p.audioTracks||p.audioTracks.length<=1)return N=!1,f.log(" Audio Menu not created !"),!1;if(t=document.getElementById(g),f.info("Setting the btn ",t," from id ",g),null!==(L=document.getElementById(y)))for(;L.firstChild;)L.removeChild(L.firstChild);else I=document.createElement("div"),I.classList.add("settingMenuDiv"),I.classList.add("fj-hide"),I.innerHTML='<div class="fj-list-title"> Audios </div> <ul class="fj-list"  id="'+y+'" ></ul>\t',w.appendChild(I),t.addEventListener("click",function(e){l(I,this,e)}),L=document.getElementById(y);for(n=0;n<p.audioTracks.length;n++)i=document.createElement("li"),p.audioTracks[n].enabled?i.classList.add("subtitles-menu-item-actif"):i.classList.add("subtitles-menu-item"),i.setAttribute("index",n),i.innerHTML=p.audioTracks[n].label,L.appendChild(i),i.addEventListener("click",function(e){u(this,!1)});return f.debug(" Audio Menu created !",p.audioTracks.length,"! ",L),N}var f=new a.default(this),p=e,m=null,v=t,g=n,b="smml"+v,y="amml"+n,E=r,w=document.getElementById(E),S=!1,T=null,A=null,N=!1,I=null,L=null;return{SetupSubs:d,SetupAuds:h,HideMenus:c,constructor:i}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r);n(2),t.default=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e){var t=0;if(null===e||void 0===e)return void(p=!1);for(f=e,p=!0,t=0;t<f.length;t++)f[t].started=!1,f[t].clicked=0;h.info("Setup is settled ",p," cheking overlays .. ",f)}function t(e){var t=f[e];f[e].clicked++,g.fireEvent(u.OverlayEvents.OVERLAY_USER_CLICKED),window.open(t[u.FJCONFIG_URL],"_blank")}function n(e){var t=m,n=null;for(h.warn(e,"you overlay  is now stopped ",f[e].handler),t=m,n=t.cloneNode(!0),t.parentNode.replaceChild(n,t),m=n;m.hasChildNodes();)m.removeChild(m.firstChild);m.innerHTML="",m.classList.add("fj-hide"),g.fireEvent(u.OverlayEvents.OVERLAY_ENDED)}function i(e){var i=null,r=f[e];for(f[e].started=!0,f[e].endTimer=setTimeout(function(){n(e)},1e3*r[u.FJCONFIG_DURATION]);m.hasChildNodes();)m.removeChild(m.firstChild);v=document.createElement("div"),b=document.createElement("div"),v.innerHTML='<div class="fj-overlay-description">   <p>'+r[u.FJCONFIG_DATA]+'</p> </div> <div class="fj-overlay-link">'+r[u.FJCONFIG_URL]+"</div>",v.style.cursor="pointer",b.innerHTML='<div>    <span class=" fj-overlay-closing  fj-control-embd fj-btn fj-icon-windowClose" aria-hidden="true"></span>    <div class="fj-overlay-annonce">Annonce</div></div>',b.addEventListener("click",function(){n(e)}),m.appendChild(b),m.appendChild(v),m.classList.remove("fj-hide"),m.classList.add("over-HL"),g.fireEvent(u.OverlayEvents.OVERLAY_STARTED),i=r[u.FJCONFIG_URL],h.info("Setting click on overlay going to  ",i),v.addEventListener("click",function(){t(e)}),h.log(e,"you overlay just started and will end in "+r[u.FJCONFIG_DURATION]+" sec",f[e].handler)}function a(e){var t=0,n=null,r=0;if(!0===p)for(t=0;t<f.length;t++)n=f[t],r=parseInt(n[u.FJCONFIG_SHOW_AT],10),e===r&&(h.info(t," starting overlay .. "),!1===f[t].started?(h.info(t," starting a new  overlay .. "),f[t].started=!0,i(t)):h.info(t," already started ",n[u.FJCONFIG_URL]," @@ ",n[u.FJCONFIG_SHOW_AT]))}function o(e){m=e}function l(e,t){return g.on(e,t)}function d(e,t){return g.off(e,t)}var h=new s.default(this),f=null,p=!1,m=null,v=null,g=new c.default,b=null;return{StartOverlay:i,StopOverlay:n,clicked:t,initialize:o,Setup:e,on:l,off:d,CheckOverlays:a,constructor:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=i(a),o=n(1),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),l=n(3),c=i(l);n(2),t.default=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){function i(){var e={videoFigureId:Ne,fullScreenOnStart:ce,videoId:Ie,vwidth:de,videoInfoId:Ae,titleId:ye,errorDivId:Ee,spinnerId:we,BigPlayBtnId:Se,videoCaptionId:Te,thumbsDivId:Me,thumbsImgId:Ue,thumbstimerId:Be,menuContainerDivId:Je,adsContainerDivId:Ge,videoControlsId:Le,progressBarId:Fe,playpreviousBtnId:ke,playpauseBtnId:Ce,playforwardBtnId:_e,muteBtnId:Oe,volumeDivId:xe,volumeBarId:Pe,descriptionId:He,fullScreenBtnId:je,subtitlesBtnId:Re,audiosBtnId:De,timerId:ge,durationId:be,overlaysContainerDivId:Ke};if(se.info(" container if of the player ",le),!(J=document.getElementById(le)))throw new Error("The video container element still null");if(J.classList.add("fjPlayer"),J.innerHTML=(new p.default).GetHtml(e),Ve=null,J=null,H=document.getElementById(Le),V=document.getElementById(Ne),ze=document.getElementById(we),!(Ve=document.getElementById(Ie)))throw new Error("The video element still null");z=document.getElementById(Ce),Y=document.getElementById(ke),q=document.getElementById(_e),X=document.getElementById(Oe),W=document.getElementById(Pe),$=document.getElementById(Fe),Q=document.getElementById(je),Z=document.getElementById(ge),ee=document.getElementById(be),te=document.getElementById(Ne),ne=document.getElementById(Se),re=document.getElementById(Le),ae=document.getElementById(Ae),Ve.controls=!1,te.setAttribute("controls-hidden",!0),re.classList.add("fj-hide"),ae.classList.remove("fj-hide"),Ye=new u.default(document.getElementById(Be),document.getElementById(Ue),document.getElementById(Me),$),"true"===ce&&te.setAttribute("data-fullscreen","true"),qe||(Q.style.display="none")}function a(){ue.isPaused()||ue.isEnded()?ue.play():ue.pause()}function o(){ue.isPlayingAds()?(ne.classList.add("fj-hide"),te.setAttribute("controls-hidden",!0),re.classList.add("fj-hide"),he.HideMenus()):ue.isPaused()||ue.isEnded()?(z.classList.add("fj-icon-play"),z.classList.remove("fj-icon-pause"),ne.classList.remove("fj-hide"),te.setAttribute("controls-hidden",!0),re.classList.add("fj-hide"),he.HideMenus(),se.log("UI is pausing !")):(z.classList.remove("fj-icon-play"),z.classList.add("fj-icon-pause"),ne.classList.add("fj-hide"),te.setAttribute("controls-hidden",!1),re.classList.remove("fj-hide"),se.log("UI is playing !"))}function l(){ue.isPaused()||ue.isEnded()||ue.isPlayingAds()||(te.setAttribute("controls-hidden",!0),re.classList.remove("m-fadeIn"),ae.classList.remove("m-fadeIn"),re.classList.add("m-fadeOut"),ae.classList.add("m-fadeOut"),Ve.style.cursor="none",he.HideMenus(),Ye.hideThumbs(Ye))}function d(){ue.isPaused()||ue.isEnded()||ue.isPlayingAds()||(te.setAttribute("controls-hidden",!1),re.classList.remove("m-fadeOut"),ae.classList.remove("m-fadeOut"),re.classList.add("m-fadeIn"),ae.classList.add("m-fadeIn"),Ve.style.cursor="auto")}function f(){ue.isPaused()||ue.isEnded()||ue.isPlayingAds()||("none"===Ve.style.cursor?d():(fe&&clearTimeout(fe),fe=setTimeout(function(){l()},me)))}function m(e){var t=!1;t=he.SetupAuds(e),se.warn(" Will setup Audio menu  ",t),!0!==t?document.getElementById(De).classList.add("fj-hide"):document.getElementById(De).classList.remove("fj-hide"),t=he.SetupSubs(e),se.warn(" Will setup Subs menu  ",t),!0!==t?document.getElementById(Re).classList.add("fj-hide"):document.getElementById(Re).classList.remove("fj-hide")}function v(e){var t=W.value/100;se.log(" volume from ",Ve.volume," to ",t),t>.6?(X.classList.remove("fj-icon-mute"),X.classList.remove("fj-icon-volDown"),X.classList.add("fj-icon-volUp")):t>0?(X.classList.remove("fj-icon-mute"),X.classList.remove("fj-icon-volUp"),X.classList.add("fj-icon-volDown")):(X.classList.remove("fj-icon-volDown"),X.classList.remove("fj-icon-volUp"),X.classList.add("fj-icon-mute")),Ve.volume=t,se.log(" new volume is ",t)}function g(e){Ve.muted=!Ve.muted,Ve.muted?(W.value=0,X.classList.remove("fj-icon-volDown"),X.classList.remove("fj-icon-volUp"),X.classList.add("fj-icon-mute")):Ve.volume>.6?(W.value=100*Ve.volume,X.classList.remove("fj-icon-mute"),X.classList.remove("fj-icon-volDown"),X.classList.add("fj-icon-volUp")):(W.value=100*Ve.volume,X.classList.remove("fj-icon-mute"),X.classList.remove("fj-icon-volUp"),X.classList.add("fj-icon-volDown"))}function b(e){var t=$.getBoundingClientRect(),n=(e.pageX-t.left)*(oe/(t.right-t.left));se.log(" Seeking from ",h.duration(n),"/",h.duration(oe),"to",h.duration(n)," sec"),ue.seek(n)}function y(){return document.fullscreenElement||document.msFullscreenElement||document.mozFullScreen||document.webkitIsFullScreen}function E(e){te.setAttribute("data-fullscreen",!!e)}function w(){y()?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),E(!1),Q.classList.remove("fj-icon-compressScreen"),Q.classList.add("fj-icon-fullScreen")):(Q.classList.add("fj-icon-compressScreen"),Q.classList.remove("fj-icon-fullScreen"),te.requestFullscreen?te.requestFullscreen():te.mozRequestFullScreen?te.mozRequestFullScreen():te.webkitRequestFullScreen?Ve.webkitRequestFullScreen():te.msRequestFullscreen&&te.msRequestFullscreen(),E(!0))}function S(e){"fullscreenchange"===e.type&&(se.log(" fullscreenchange >>> Full Scren changed Status ",!(!document.fullScreen&&!document.fullscreenElement)),E(!(!document.fullScreen&&!document.fullscreenElement))),"webkitfullscreenchange"===e.type&&(se.log(" webkitfullscreenchange >>> Full Scren changed Status ",!!document.webkitIsFullScreen),E(!!document.webkitIsFullScreen)),"mozfullscreenchange"===e.type&&(se.log(" mozfullscreenchange >>> Full Scren changed Status ",!!document.mozFullScreen),E(!!document.mozFullScreen)),"msfullscreenchange"===e.type&&(se.log(" msfullscreenchange >>> Full Scren changed Status ",!!document.msFullscreenElement),E(!!document.msFullscreenElement))}function T(){l(),ne.classList.add("fj-hide")}function A(e){var t;"number"==typeof e&&(ie.value=e),t=W.value/100,se.log(" volume from ",Ve.volume," to ",t),t>.6?(X.classList.remove("fj-icon-mute"),X.classList.remove("fj-icon-volDown"),X.classList.add("fj-icon-volUp")):t>0?(X.classList.remove("fj-icon-mute"),X.classList.remove("fj-icon-volUp"),X.classList.add("fj-icon-volDown")):(X.classList.remove("fj-icon-volDown"),X.classList.remove("fj-icon-volUp"),X.classList.add("fj-icon-mute")),Ve.volume=t,se.log(" new volume is ",t)}function N(e){isNaN(e)||(oe=e,ee.textContent=h.duration(e),$.max=e)}function I(e){isNaN(e)||(Z.textContent=h.duration(e),$.value=e)}function L(e){document.getElementById(ye).innerHTML=e,document.getElementById(He).innerHTML=e}function C(){return Ve}function k(){return Ee}function _(){return Ge}function O(){return Ke}function P(e,t){return null!==t?Ye.Setup(C(),e,t):Ye.reset()}function x(){return V}function R(e){if(i(le),!(ue=e))throw new Error("Please pass an instance of player when instantiating");he=new c.default(Ve,Re,De,Je),V.addEventListener("mouseleave",l),V.addEventListener("mouseenter",d),V.addEventListener("mousemove",f),ne.addEventListener("click",a),Ve.addEventListener("click",a),Ve.addEventListener("dblclick",w),W.addEventListener("click",v),z.addEventListener("click",a),X.addEventListener("click",g),Q.addEventListener("click",w),$.addEventListener("click",b),document.addEventListener("fullscreenchange",S),document.addEventListener("MSFullscreenChange",S),document.addEventListener("mozfullscreenchange",S),document.addEventListener("webkitfullscreenchange",S),$.min=0,$.step=.01,$.value=0,W.min=0,W.step=1,W.max=100,W.value=100,pe=!0}function D(){ne.style.display="none",ae.style.display="none",Ve.style.display="none",H.style.display="none"}function F(){ne.style.display="block",ae.style.display="block",Ve.style.display="block",H.style.display="block"}function j(){ze.classList.remove("fj-hide")}function M(){!1===ze.classList.contains("fj-hide")&&ze.classList.add("fj-hide")}function U(){H.classList.add("disable")}function B(){H.classList.remove("disable")}function G(){return document.getElementById(Te)}function K(){if(!0!==pe)return void se.warn("not yet initialized");console.warn(" >>> Resetting player ui !!"),Ye.reset(),V.removeEventListener("mouseleave",l),V.removeEventListener("mouseenter",d),V.removeEventListener("mousemove",f),ne.removeEventListener("click",a),Ve.removeEventListener("click",a),Ve.removeEventListener("dblclick",w),W.removeEventListener("click",v),z.removeEventListener("click",a),X.removeEventListener("click",g),Q.removeEventListener("click",w),$.removeEventListener("click",b),document.removeEventListener("fullscreenchange",S),document.removeEventListener("MSFullscreenChange",S),document.removeEventListener("mozfullscreenchange",S),document.removeEventListener("webkitfullscreenchange",S),o()}var J,H,V,z,Y,q,X,W,$,Q,Z,ee,te,ne,ie,re,ae,se=new s.default(this),oe=0,ue=null,le=e,ce=!1,de=t,he=null,fe=null,pe=!1,me=1500,ve=Date.now().toString().substr(6),ge="trd"+ve,be="drd"+ve,ye="tld"+ve,Ee="errd"+ve,we="spin"+ve,Se="bp"+ve,Te="vcp"+ve,Ae="vif"+ve,Ne="vfg"+ve,Ie="voi"+ve,Le="vct"+ve,Ce="ppb"+ve,ke="pprb"+ve,_e="ppfb"+ve,Oe="mbt"+ve,Pe="vbr"+ve,xe="vvd"+ve,Re="subd"+ve,De="audb"+ve,Fe="pgb"+ve,je="fsb"+ve,Me="tbd"+ve,Ue="tbi"+ve,Be="tbt"+ve,Ge="adscd"+ve,Ke="ovscd"+ve,Je="mncd"+ve,He="desc"+ve,Ve=null,ze=null,Ye=null,qe=!0;return{setVolume:A,setDuration:N,UpdateProgress:I,setTitle:L,getVideo:C,getAdsContainerDivId:_,getErrorDivId:k,getOverlaysContainerDivId:O,SetupThumbsManager:P,SetupSubsAudsManager:m,getVideoFigure:x,initialize:R,toggleplaypauseBtn:o,getVideoCaption:G,hideVideo:D,ShowVideo:F,disable:U,enable:B,reset:K,ShowSpinner:j,HideSpinner:M,onplaypauseClick:a,goForError:T,constructor:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=i(a),o=n(16),u=i(o),l=n(13),c=i(l),d=n(4),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d),f=n(17),p=i(f);n(2),t.default=r},function(e,t,n){"use strict";function i(e,t,n,r){function s(){b.classList.remove("fj-hide"),b.classList.add("fj-show")}function u(){b.classList.remove("fj-show"),b.classList.add("fj-hide")}function l(e){h.warn("eventing Thumbs is",e);var t,n,i,r,a,s=v.getBoundingClientRect(),u=(e.pageX-s.left)*(m/(s.right-s.left)),l=o.duration(parseFloat(u));if(u>m+2||u<0)return void h.warn(" Position is bigger than duration >>",u,m);if(h.log(" current clicked  ",l),null==(t=p.textTracks[f].cues))return void h.error(" cues is null @ ",f," not supported , Firefox ?");for(n=0;n<t.length&&!(t[n].startTime<=u&&t[n].endTime>u);n++);r=t[n].text.substr(t[n].text.indexOf("=")+1).split(","),a=-(s.left-e.pageX+r[2]/2),i="url("+t[n].text.split("#")[0]+")",y.style.backgroundImage=i,y.style.backgroundPosition="-"+r[0]+"px -"+r[1]+"px",y.style.width=r[2]+"px",y.style.height=r[3]+"px",g.innerHTML=l,b.style.left=a,b.style.width=r[2]+"px"}function c(){f=-1,v.removeEventListener("mousemove",l),v.removeEventListener("mouseleave",u),v.removeEventListener("mouseover",s)}function d(e,t,n){return c(),p=e,m=t,f=n,h.info(" Setting index thumbs tracks on ",f," and video duration ",m),!(!v||-1===f)&&(v.addEventListener("mousemove",l),v.addEventListener("mouseleave",u),v.addEventListener("mouseover",s),!0)}var h=new a.default(this),f=-1,p=null,m=0,v=r,g=e,b=n,y=t;return{Setup:d,reset:c,hideThumbs:u,showThumbs:s,off:removeEventListener,constructor:i}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),s=n(4),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s);n(2),t.default=i},function(e,t,n){"use strict";function i(){function e(){var e=o,t=String(u).replace(l,"\\$&");return e=e.replace(/%/g,t),new RegExp(e)}function t(t){for(var n,i=e(),r=t,a=i.exec(r),s=[];a;)n=a.index,0!==n&&(s.push(r.substring(0,n)),r=r.slice(n)),s.push(a[0]),r=r.slice(a[0].length),a=i.exec(r);return r&&s.push(r),s}function n(e,t){var n,i=[],r=0,o=!1;for(var u in e)if(e[u]===a)o=!0;else if(e[u]===s)o=!1,!0;else{if(!0===o&&!1===closed){if(n=e[u],n=n.replace(/ +/g,""),!t.hasOwnProperty(n))throw new Error(" Needed Key is Not found key for html player template :",e[u]);i[r]=t[n]}else i[r]=e[u];r++}return i.join("")}function r(e){return n(t(c),e)}var a="<%=",s="%>",o="(<%=|%>)",u="%",l=/[|\\{}()[\]^$+*?.]/g,c='<figure id="<%= videoFigureId %>" class="fj-figure" controls-hidden="true" data-fullscreen="<%= fullScreenOnStart %>">     \x3c!-- video element --\x3e      <video id="<%= videoId %>" class="fj-video" width= "<%= vwidth %>"> </video>     \x3c!-- Horizental Tpp --\x3e     <div class="fj-horizental-top" id="<%= videoInfoId %>">         <span class=" fj-vertical-left  fj-control  fj-btn  fj-icon-leftarrow" aria-hidden="true"> </span>         <div class=" fj-vertical-left  fj-vertical-separator "></div>         <div class=" fj-vertical-left  fj-control  fj-btn fj-title " id="<%= titleId %>"> </div>         <span class=" fj-vertical-right fj-control  fj-btn  fj-icon-share  " aria-hidden="true"> </span>         <div class=" fj-vertical-right  fj-vertical-separator "></div>         <span class=" fj-vertical-right fj-control  fj-btn  fj-icon-download " aria-hidden="true"> </span>     </div>     \x3c!-- Horizental Center --\x3e     <div class="fj-horizental-center">        <div class="fj-vertical-center">           <div id="<%= errorDivId %>" class=" fj-hide"> </div>            <div id="<%= spinnerId %>" class=" fj-hide spinner"> </div>                <span class=" fj-control fj-big-btn  fj-icon-play"  aria-hidden="true" id="<%= BigPlayBtnId %>"></span>        </div>     </div>     \x3c!-- this will contains ads video or ads overlays --\x3e     <div id="<%=adsContainerDivId%>" class=""></div>     \x3c!-- Horizental Bottom Up used for menu  --\x3e     <div class="fj-horizental-bottomUpper">         \x3c!-- video caption ued by dash player for caption --\x3e         <div id="<%=videoCaptionId %>"></div>         \x3c!-- this present the thumbs image if exist--\x3e         <div class="thumbsBlockDiv  fj-hide" id="<%= thumbsDivId %>" >             <span class="thumbsBlock" id="<%= thumbsImgId %>"></span>             <span class="fjcontrols-control-text" id="<%= thumbstimerId %>"></span>         </div>         \x3c!-- this present the subtitles or audios menu if exist  and when clicked--\x3e         <div class="fj-vertical-left" id="<%=menuContainerDivId %>">         </div>     </div>     \x3c!-- Horizental Bottom down used for fj controls  --\x3e     <div class="fj-horizental-bottomLower"  id="<%=videoControlsId%>">         \x3c!--  the video progress Bar --\x3e         <div class="fj-vertical-center">             <input class=" fj-control-embd fj-video-progress" id="<%=progressBarId%>" type="range" min="0" />         </div>         \x3c!--  play,previous and next controls  --\x3e         <span class=" fj-vertical-left fj-control-embd fj-btn  fj-icon-playPrevious" aria-hidden="true" id="<%=playpreviousBtnId%>" title="previous"> </span>         <span class=" fj-vertical-left fj-control-embd fj-btn  fj-icon-play" aria-hidden="true" id="<%=playpauseBtnId%>" title="Play"> </span>         <span class=" fj-vertical-left fj-control-embd fj-btn  fj-icon-playNext" aria-hidden="true" id="<%=playforwardBtnId%>" title="next"> </span>         \x3c!--  mute and volume bar controls  --\x3e         <span class=" fj-vertical-left fj-control-embd fj-btn  fj-icon-volUp" aria-hidden="true" id="<%=muteBtnId%>" title="mute"> </span>         <div class="fj-vertical-left  volumebar" id="<%=volumeDivId%>">             <input id="<%=volumeBarId%>" class="fj-control-embd" type="range" min="0"  />         </div>         \x3c!--  more description of the stream   --\x3e         <div class=" fj-vertical-left fj-text " title="Description" id="<%=descriptionId%>">             <span></span>         </div>         \x3c!--  full screen, audio and subtitles controls  --\x3e         <span class=" fj-vertical-right fj-control-embd fj-btn  fj-icon-fullScreen " aria-hidden="true" id="<%=fullScreenBtnId%>" title="Fullscreen"> </span>         <span class=" fj-vertical-right fj-control-embd fj-btn  fj-icon-subs" aria-hidden="true" id="<%=subtitlesBtnId%>" title="Subtitles"> </span>         <span class=" fj-vertical-right fj-control-embd fj-btn  fj-icon-audios" aria-hidden="true" id="<%=audiosBtnId%>" title="Audios"> </span>         \x3c!--  timers   --\x3e         <div class=" fj-vertical-right fj-text " title="times">             <span id="<%= timerId %>">0:00:00</span><span>/</span><span id="<%= durationId %>">0:00:00</span>         </div>     </div>     \x3c!--  this will contains overlays   --\x3e     <div id="<%= overlaysContainerDivId %>" class="fj-overlayContainer fj-hide">     </div> </figure> ';return{GetHtml:r,constructor:i}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,n){"use strict";function i(e,t,n,r){function s(e){var t=d,n=null;for(o.warn(e,"you overlay  is now stopped "),t=d,n=t.cloneNode(!0),t.parentNode.replaceChild(n,t),d=n;d.hasChildNodes();)d.removeChild(d.firstChild);d.innerHTML="",d.classList.add("fj-hide"),d.classList.remove("over-HL-error")}var o=new a.default(this),u=e,l=t,c=n,d=r,h=null,f=null;return function(){for(d.classList.add("over-HL-error");d.hasChildNodes();)d.removeChild(d.firstChild);f=document.createElement("div"),h=document.createElement("div"),f.innerHTML='<div class="fj-overlay-description">   <p>'+c+'</p> </div> <div class="fj-overlay-link">'+u+"</div>",f.style.cursor="pointer",h.innerHTML='<div>    <span class=" fj-overlay-closing  fj-control-embd fj-btn fj-icon-windowClose" aria-hidden="true"></span>    <div class="fj-overlay-error">'+l+"</div></div>",h.addEventListener("click",function(){s()}),d.appendChild(h),d.appendChild(f),d.classList.remove("fj-hide"),d.classList.add("over-HL")}(),{constructor:i}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),s=n(1);!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(s);n(2),t.default=i},function(e,t,n){t=e.exports=n(20)(),t.push([e.i,'.fj-icon-leftarrow{font-family:FontAwesome;font-size:1.3em;content:"\\F060"}.fj-icon-leftarrow:before{content:"\\F060"}.fj-icon-download{font-family:FontAwesome;font-size:1.3em;content:"\\F019"}.fj-icon-download:before{content:"\\F019"}.fj-icon-share{font-family:FontAwesome;font-size:1.3em}.fj-icon-share,.fj-icon-share:before{content:"\\F1E0"}.fj-icon-play{font-family:FontAwesome;font-size:1.3em}.fj-icon-play,.fj-icon-play:before{content:"\\F04B"}.fj-icon-playNext{font-family:FontAwesome;font-size:1.3em;content:"\\F051"}.fj-icon-playNext:before{content:"\\F051"}.fj-icon-playPrevious{font-family:FontAwesome;font-size:1.3em;content:"\\F048"}.fj-icon-playPrevious:before{content:"\\F048"}.fj-icon-pause{font-family:FontAwesome;font-size:1.3em}.fj-icon-pause,.fj-icon-pause:before{content:"\\F04C"}.fj-icon-volUp{font-family:FontAwesome;font-size:1.3em}.fj-icon-volUp,.fj-icon-volUp:before{content:"\\F028"}.fj-icon-volDown{font-family:FontAwesome;font-size:1.3em;content:"\\F027"}.fj-icon-volDown:before{content:"\\F027"}.fj-icon-mute{font-family:FontAwesome;font-size:1.3em}.fj-icon-mute,.fj-icon-mute:before{content:"\\F026"}.fj-icon-audios{font-family:FontAwesome;font-size:1.3em;content:"\\F130"}.fj-icon-audios:before{content:"\\F130"}.fj-icon-subs{font-family:FontAwesome;font-size:1.3em}.fj-icon-subs,.fj-icon-subs:before{content:"\\F20A"}.fj-icon-fullScreen{font-family:FontAwesome;font-size:1.3em;content:"\\F0B2"}.fj-icon-fullScreen:before{content:"\\F0B2"}.fj-icon-compressScreen{font-family:FontAwesome;font-size:1.3em;content:"\\F066"}.fj-icon-compressScreen:before{content:"\\F066"}.fj-icon-windowClose{font-family:FontAwesome;font-size:1.3em;content:"\\F00D"}.fj-icon-windowClose:before{content:"\\F00D"}.fj-figure,.fj-player{margin:0 auto}.fj-figure{background-color:#000;color:#fff;text-align:center;position:relative;display:inline-block;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-size:12px;width:100%}.fj-control{background-color:rgba(0,0,0,.6)}.fj-control,.fj-control-embd{color:#fff;opacity:.75;cursor:pointer}.fj-control-embd:hover,.fj-control:hover{opacity:1;background:#6c6c6c}.fj-video-progress{margin-bottom:.5%;margin-top:.5%;padding-left:1px;padding-right:1px}.divTspanitleSeparator{position:relative;visibility:visible;text-overflow:ellipsis;overflow:hidden;margin:0;white-space:nowrap;display:inline-block;max-width:766px;font-size:12px;padding:10px}.fj-horizental-top{top:5%}.fj-horizental-center,.fj-horizental-top{z-index:2147483647;border-radius:5px;width:80%;position:absolute;left:10%}.fj-horizental-center{top:45%}.fj-horizental-bottomMenus{bottom:22%}.fj-horizental-bottomMenus,.fj-horizental-bottomUpper{z-index:2147483647;position:absolute;border-radius:5px;opacity:.8;background:hsla(0,0%,4%,.8);width:90%;margin-left:5%;display:relative}.fj-horizental-bottomUpper{bottom:12%}.fj-horizental-bottomLower{z-index:2147483647;position:absolute;border-radius:5px;bottom:2%;opacity:.8;background:hsla(0,0%,4%,.8);width:90%;left:5%;display:relative}.fj-text{color:#fff;cursor:default;padding-right:5px;padding-top:1%}.fj-text,.fj-vertical-separator{white-space:nowrap;display:inline-block}.fj-vertical-separator{position:relative;visibility:visible;text-overflow:ellipsis;overflow:hidden;margin:0;max-width:766px;font-size:12px;padding:10px}.fj-vertical-left{position:relative;float:left}.fj-vertical-center{position:relative}.fj-vertical-right{position:relative;float:right}.fj-video{background-color:rgba(0,0,0,.6);-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover}.fj-btn{margin:.05em .1em}.fj-big-btn,.fj-btn{border-top-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;padding:5px 10px;white-space:nowrap;display:inline-block}.fj-big-btn{color:red;text-overflow:ellipsis;overflow:hidden;font-size:4em;margin-top:-15px;margin-left:-15px}.fj-title{background-color:rgba(0,0,0,.6)}.fj-hide{visibility:hidden;display:none}.fj-overlayContainer{height:100%;margin:0 auto}.fj-overlay{position:absolute;background:rgba(0,0,0,.5);float:left;font-size:12px;padding:5px;border-radius:5px;z-index:2147483647;top:20%;left:20%;height:auto}@keyframes spinner{to{transform:rotate(1turn)}}.spinner:before{content:"";box-sizing:border-box;z-index:2147483647;position:absolute;top:50%;left:50%;width:30px;height:30px;margin-top:-15px;margin-left:-15px;border-radius:50%;border:3px solid #8f9b9e;border-top-color:red;animation:spinner .6s linear infinite}.volumebar{margin-top:1%;padding-left:1%;padding-right:3%;border-left:none;border-right:none}input[type=range]{margin:auto;-webkit-appearance:none;-moz-appearance:none;position:relative;overflow:hidden;height:6px;width:98%!important;border-radius:5px;cursor:pointer;margin-top:2px;margin-bottom:2px}input[type=range]:focus{outline:none}input[type=range]::-webkit-slider-runnable-track{background:#8f9b9e;border-radius:5px}input[type=range]::-webkit-media-slider-thumb,input[type=range]::-webkit-slider-thumb{background:#8f9b9e;box-shadow:-100vw 0 0 100vw red;border:2px solid #3c4447;color:red;height:6px;border-radius:100%}input[type=range]::-moz-range-track{background:#8f9b9e;height:6px;border-radius:5px}input[type=range]::-moz-range-thumb{color:red;height:6px;border:2px solid #3c4447;border-radius:5px;box-shadow:-100vw 0 0 100vw red}.m-fadeOut{visibility:hidden;opacity:0;transition:visibility .2s,opacity .2s}.m-fadeIn{visibility:visible;opacity:1}.fj-list-title{cursor:default;font-weight:700;padding:5px}.settingMenuDiv{position:absolute;background:hsla(0,0%,4%,.8);bottom:10%;left:85%;margin-bottom:15px;border-radius:5px;padding-right:5px;list-style-type:none}.settingMenuDivnt div,.settingMenuDivnt ul{display:inline;list-style-type:none}.fj-list{list-style-type:none;padding-left:25px}.settingMenuSubMenuRight{float:left;width:100%;border-left:1px solid #2a2a2a;padding-left:5px;padding-right:5px}.subtitles-menu-item-actif{cursor:pointer;text-align:left;border-radius:5px;opacity:1}.subtitles-menu-item-actif:before{content:"\\F00C";font-family:FontAwesome;display:inline-block;margin-left:-1.3em;width:1.3em}.subtitles-menu-item{cursor:pointer;text-align:left;list-style-type:none;opacity:.9}.fj-overlays-container{width:100%;height:100%;margin:0 auto;padding:0;position:absolute}.over-HL{background:rgba(0,0,0,.5)}.over-HL,.over-HL-error{position:absolute;float:left;padding:5px;border-radius:5px;z-index:2147483647;top:25%;left:20%;height:auto}.over-HL-error{background:rgba(255,0,0,.5)}.over-HR{position:absolute;background:rgba(0,0,0,.5);float:left;padding:5px;border-radius:5px;z-index:2147483647;top:25%;left:80%;height:auto}.fj-overlay-closing{float:right;text-decoration:none;display:inline-block}.fj-overlay-annonce{color:#7f7}.fj-overlay-annonce,.fj-overlay-error{font-size:1em;float:left;text-decoration:none;display:inline-block}.fj-overlay-error{color:red}.fj-overlay-link{color:#ff0;font-size:.8em;float:left}.fj-overlay-description,.fj-overlay-link{text-decoration:none;display:inline-block}.fj-overlay-description{font-size:1.2em;float:right}.thumbsBlockDiv{position:absolute;margin-bottom:15px;padding-top:5px;border-radius:5px;bottom:8%;background:hsla(0,0%,4%,.8)}.thumbsBlock{display:table-cell;border-radius:5px;vertical-align:top;display:inline-block}figure[controls-hidden=false] video::-webkit-media-text-track-display{position:relative!important;top:80%!important}figure[controls-hidden=false] video::-moz-media-text-track-display{position:relative!important;top:80%!important}html:-ms-fullscreen{width:100%}:-webkit-full-screen{background-color:transparent}figure[data-fullscreen=true] video::-webkit-media-controls{display:none!important}figure[data-fullscreen=true] video::-moz-media-controls{display:none!important}figure[data-fullscreen=true]{max-width:100%;width:100%;margin:0;padding:0}figure[data-fullscreen=true] video{height:100%}figure[data-fullscreen=true] .volumebar{width:35%}figure[data-fullscreen=true] .fj-title{font-size:3em}figure[data-fullscreen=true] .fj-text{font-size:2em}figure[data-fullscreen=true] .fj-big-btn{font-size:8em}figure[data-fullscreen=true] .fj-btn{font-size:3em;margin-bottom:5px}figure[data-fullscreen=true] .spinner:before{width:55px;height:55px;border:5px solid #8f9b9e;border-top-color:red}',""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(i[a]=!0)}for(r=0;r<t.length;r++){var s=t[r];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(e,t,n){var i;!function(){var r={};(function(e){function t(e,t){var n=e.split("."),i=rs;n[0]in i||!i.execScript||i.execScript("var "+n[0]);for(var r;n.length&&(r=n.shift());)n.length||void 0===t?i=i[r]?i[r]:i[r]={}:i[r]=t}function n(e){function t(){}var n=ht;t.prototype=n.prototype,e.ze=n.prototype,e.prototype=new t,e.prototype.constructor=e,e.we=function(e,t,i){return n.prototype[t].apply(e,Array.prototype.slice.call(arguments,2))}}function i(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function r(e,t,n){var i=Math.pow(e.c,t);n=n*(1-i)+i*e.a,isNaN(n)||(e.a=n,e.b+=t)}function a(e){return e.a/(1-Math.pow(e.c,e.b))}function s(){this.c=new i(2),this.f=new i(5),this.a=0,this.b=5e5}function o(){}function u(e,t,n,i){this.severity=e,this.category=t,this.code=n,this.data=Array.prototype.slice.call(arguments,3)}function l(e){var t;e instanceof l?(c(this,e.$),this.Aa=e.Aa,this.ba=e.ba,d(this,e.Ia),this.W=e.W,h(this,g(e.a)),this.ta=e.ta):e&&(t=String(e).match(as))?(c(this,t[1]||"",!0),this.Aa=f(t[2]||""),this.ba=f(t[3]||"",!0),d(this,t[4]),this.W=f(t[5]||"",!0),h(this,t[6]||"",!0),this.ta=f(t[7]||"")):this.a=new v(null)}function c(e,t,n){e.$=n?f(t,!0):t,e.$&&(e.$=e.$.replace(/:$/,""))}function d(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Ia=t}else e.Ia=null}function h(e,t,n){t instanceof v?e.a=t:(n||(t=p(t,ls)),e.a=new v(t))}function f(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function p(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,m),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function m(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}function v(e){this.b=e||null}function g(e){var t=new v;if(t.b=e.b,e.a){var n,i={};for(n in e.a)i[n]=e.a[n].concat();t.a=i,t.c=e.c}return t}function b(e,t){return e.reduce(function(e,t,n){return t.catch(e.bind(null,n))}.bind(null,t),Promise.reject())}function y(e,t){return e.concat(t)}function E(){}function w(e){return null!=e}function S(e){return function(t){return t!=e}}function T(e,t,n){return n.indexOf(e)==t}function A(e,t){if(!t.length)return e;var n=t.map(function(e){return new l(e)});return e.map(function(e){return new l(e)}).map(function(e){return n.map(e.resolve.bind(e))}).reduce(y,[]).map(function(e){return e.toString()})}function N(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:[]}}function I(e,t,n,i,r){var a,s=r in i;for(a in t){var o=r+"."+a,u=s?i[r]:n[a],l=!!{".abr.manager":!0}[o]||!!{serverCertificate:!0}[a];(s||a in e)&&(void 0===t[a]?void 0===u||s?delete e[a]:e[a]=u:l?e[a]=t[a]:"object"==typeof e[a]&&"object"==typeof t[a]?I(e[a],t[a],u,i,o):typeof t[a]==typeof u&&(e[a]=t[a]))}}function L(e){return JSON.parse(JSON.stringify(e))}function C(){var e,t,n=new Promise(function(n,i){e=n,t=i});return n.resolve=e,n.reject=t,n}function k(e){this.f=!1,this.a=[],this.b=[],this.c=[],this.h=e||null}function _(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}}function O(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t}}function P(e,t,n){for(var i=0;i<e.length;++i)if(n(e[i],t))return i;return-1}function x(){this.a={}}function R(){this.a=new x}function D(e,t,n,i){e.a&&(t=new M(t,n,i),e.a.push(n,t))}function F(e,t,n,i){D(e,t,n,function(e){this.ha(t,n),i(e)}.bind(e))}function j(e){if(e.a){var t,n=e.a,i=[];for(t in n.a)i.push.apply(i,n.a[t]);for(n=0;n<i.length;++n)i[n].ha();e.a.a={}}}function M(e,t,n){this.target=e,this.type=t,this.a=n,this.target.addEventListener(t,n,!1)}function U(e){return!e||!Object.keys(e).length}function B(e){return Object.keys(e).map(function(t){return e[t]})}function G(e,t){return Object.keys(e).reduce(function(n,i){return n[i]=t(e[i],i),n},{})}function K(e,t){return Object.keys(e).every(function(n){return t(n,e[n])})}function J(e){if(!e)return"";e=new Uint8Array(e),239==e[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=escape(Y(e));try{return decodeURIComponent(e)}catch(e){throw new u(2,2,2004)}}function H(e,t){if(!e)return"";if(e.byteLength%2)throw new u(2,2,2004);if(e instanceof ArrayBuffer)var n=e;else{var i=new Uint8Array(e.byteLength);i.set(new Uint8Array(e)),n=i.buffer}var i=e.byteLength/2,r=new Uint16Array(i);n=new DataView(n);for(var a=0;a<i;a++)r[a]=n.getUint16(2*a,t);return Y(r)}function V(e){var t=new Uint8Array(e);if(239==t[0]&&187==t[1]&&191==t[2])return J(t);if(254==t[0]&&255==t[1])return H(t.subarray(2),!1);if(255==t[0]&&254==t[1])return H(t.subarray(2),!0);var n=function(e,t){return e.byteLength<=t||32<=e[t]&&126>=e[t]}.bind(null,t);if(!t[0]&&!t[2])return H(e,!1);if(!t[1]&&!t[3])return H(e,!0);if(n(0)&&n(1)&&n(2)&&n(3))return J(e);throw new u(2,2,2003)}function z(e){e=unescape(encodeURIComponent(e));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t.buffer}function Y(e){for(var t="",n=0;n<e.length;n+=16e3)t+=String.fromCharCode.apply(null,e.subarray(n,n+16e3));return t}function q(e){this.a=null,this.b=function(){this.a=null,e()}.bind(this)}function X(e){e.cancel(),e.a=setTimeout(e.b,500)}function W(t,n){var i=void 0==n||n,r=e.btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_");return i?r:r.replace(/=*$/,"")}function $(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),i=0;i<t.length;++i)n[i]=t.charCodeAt(i);return n}function Q(t){for(var n=new Uint8Array(t.length/2),i=0;i<t.length;i+=2)n[i/2]=e.parseInt(t.substr(i,2),16);return n}function Z(e){for(var t="",n=0;n<e.length;++n){var i=e[n].toString(16);1==i.length&&(i="0"+i),t+=i}return t}function ee(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0}function te(e,t,n,i){this.j=this.i=this.v=null,this.J=!1,this.b=null,this.f=new R,this.a=[],this.o=[],this.l=new C,this.ka=e,this.h=null,this.g=function(e){this.l.reject(e),t(e)}.bind(this),this.A={},this.Ba=n,this.la=i,this.B=new q(this.Id.bind(this)),this.ja=this.c=!1,this.G=[],this.ia=!1,this.P=setInterval(this.Hd.bind(this),1e3),this.l.catch(function(){})}function ne(e,t){if(!e.i)return F(e.f,t,"encrypted",function(){this.g(new u(2,6,6010))}.bind(e)),Promise.resolve();e.j=t,F(e.f,e.j,"play",e.od.bind(e));var n=e.j.setMediaKeys(e.i),n=n.catch(function(e){return Promise.reject(new u(2,6,6003,e.message))}),i=null;return e.b.serverCertificate&&(i=e.i.setServerCertificate(e.b.serverCertificate).then(function(){}).catch(function(e){return Promise.reject(new u(2,6,6004,e.message))})),Promise.all([n,i]).then(function(){if(this.c)return Promise.reject();re(this),this.b.initData.length||this.o.length||D(this.f,this.j,"encrypted",this.dd.bind(this))}.bind(e)).catch(function(e){return this.c?Promise.resolve():Promise.reject(e)}.bind(e))}function ie(e,t){return Promise.all(t.map(function(e){return he(this,e).then(function(e){if(e){for(var t=new C,n=0;n<this.a.length;n++)if(this.a[n].aa==e){this.a[n].ib=t;break}return Promise.all([e.remove(),t])}}.bind(this))}.bind(e)))}function re(e){var t=e.b?e.b.initData:[];return t.forEach(function(e){fe(this,e.initDataType,e.initData)}.bind(e)),e.o.forEach(function(e){he(this,e)}.bind(e)),t.length||e.o.length||e.l.resolve(),e.l}function ae(e){return e.a.map(function(e){return e.aa.sessionId})}function se(t,n,i,r,a){var s=le(t);n.periods.forEach(function(t){t.variants.forEach(function(t){s&&(t.drmInfos=[s]),t.drmInfos.forEach(function(n){ue(this,n),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==n.keySystem&&(n.keySystem="com.chromecast.playready");var s=r[n.keySystem];s||(s={audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:i?"required":"optional",sessionTypes:[i?"persistent-license":"temporary"],label:n.keySystem,drmInfos:[]},r[n.keySystem]=s,a.push(n.keySystem)),s.drmInfos.push(n),n.distinctiveIdentifierRequired&&(s.distinctiveIdentifier="required"),n.persistentStateRequired&&(s.persistentState="required");var o=[];t.video&&o.push(t.video),t.audio&&o.push(t.audio),o.forEach(function(e){var t="video"==e.type?s.videoCapabilities:s.audioCapabilities,i=("video"==e.type?n.videoRobustness:n.audioRobustness)||"",r=e.mimeType;e.codecs&&(r+='; codecs="'+e.codecs+'"'),t.push({robustness:i,contentType:r})}.bind(this))}.bind(this))}.bind(this))}.bind(t))}function oe(e,t,n){if(1==n.length&&""==n[0])return Promise.reject(new u(2,6,6e3));var i=new C,r=i;return[!0,!1].forEach(function(e){n.forEach(function(n){var i=t[n];i.drmInfos.some(function(e){return!!e.licenseServerUri})==e&&(i.audioCapabilities.length||delete i.audioCapabilities,i.videoCapabilities.length||delete i.videoCapabilities,r=r.catch(function(){return this.c?Promise.reject():navigator.requestMediaKeySystemAccess(n,[i])}.bind(this)))}.bind(this))}.bind(e)),r=r.catch(function(){return Promise.reject(new u(2,6,6001))}),r=r.then(function(e){if(this.c)return Promise.reject();var n=0<=navigator.userAgent.indexOf("Edge/"),i=e.getConfiguration();return this.v=(i.audioCapabilities||[]).concat(i.videoCapabilities||[]).map(function(e){return e.contentType}),n&&(this.v=null),n=t[e.keySystem],ce(this,e.keySystem,n,n.drmInfos),this.b.licenseServerUri?e.createMediaKeys():Promise.reject(new u(2,6,6012))}.bind(e)).then(function(e){if(this.c)return Promise.reject();this.i=e,this.J=!0}.bind(e)).catch(function(e){return this.c?Promise.resolve():(this.v=this.b=null,e instanceof u?Promise.reject(e):Promise.reject(new u(2,6,6002,e.message)))}.bind(e)),i.reject(),r}function ue(e,t){var n=t.keySystem;if(n){if(!t.licenseServerUri){var i=e.h.servers[n];i&&(t.licenseServerUri=i)}t.keyIds||(t.keyIds=[]),(n=e.h.advanced[n])&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=n.persistentStateRequired),t.videoRobustness||(t.videoRobustness=n.videoRobustness),t.audioRobustness||(t.audioRobustness=n.audioRobustness),t.serverCertificate||(t.serverCertificate=n.serverCertificate))}}function le(t){if(U(t.h.clearKeys))return null;var n,i=[],r=[];for(n in t.h.clearKeys){var a=t.h.clearKeys[n],s=Q(n),a=Q(a),s={kty:"oct",kid:W(s,!1),k:W(a,!1)};i.push(s),r.push(s.kid)}return t=JSON.stringify({keys:i}),r=JSON.stringify({kids:r}),r=[{initData:new Uint8Array(z(r)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:r,keyIds:[]}}function ce(e,t,n,i){var r=[],a=[],s=[],o=[];de(i,r,a,s,o),e.b={keySystem:t,licenseServerUri:r[0],distinctiveIdentifierRequired:"required"==n.distinctiveIdentifier,persistentStateRequired:"required"==n.persistentState,audioRobustness:n.audioCapabilities?n.audioCapabilities[0].robustness:"",videoRobustness:n.videoCapabilities?n.videoCapabilities[0].robustness:"",serverCertificate:a[0],initData:s,keyIds:o}}function de(e,t,n,i,r){function a(e,t){return!(!e.keyId||e.keyId!=t.keyId)||e.initDataType==t.initDataType&&ee(e.initData,t.initData)}e.forEach(function(e){if(-1==t.indexOf(e.licenseServerUri)&&t.push(e.licenseServerUri),e.serverCertificate&&-1==P(n,e.serverCertificate,ee)&&n.push(e.serverCertificate),e.initData&&e.initData.forEach(function(e){-1==P(i,e,a)&&i.push(e)}),e.keyIds)for(var s=0;s<e.keyIds.length;++s)-1==r.indexOf(e.keyIds[s])&&r.push(e.keyIds[s])})}function he(e,t){try{var n=e.i.createSession("persistent-license")}catch(t){var i=new u(2,6,6005,t.message);return e.g(i),Promise.reject(i)}D(e.f,n,"message",e.ic.bind(e)),D(e.f,n,"keystatuseschange",e.cc.bind(e));var r={initData:null,aa:n,loaded:!1,xb:1/0,ib:null};return e.a.push(r),n.load(t).then(function(e){if(!this.c){if(e)return r.loaded=!0,this.a.every(function(e){return e.loaded})&&this.l.resolve(),n;this.a.splice(this.a.indexOf(r),1),this.g(new u(2,6,6013))}}.bind(e),function(e){this.c||(this.a.splice(this.a.indexOf(r),1),this.g(new u(2,6,6005,e.message)))}.bind(e))}function fe(e,t,n){try{var i=e.ja?e.i.createSession("persistent-license"):e.i.createSession()}catch(t){return void e.g(new u(2,6,6005,t.message))}D(e.f,i,"message",e.ic.bind(e)),D(e.f,i,"keystatuseschange",e.cc.bind(e)),e.a.push({initData:n,aa:i,loaded:!1,xb:1/0,ib:null}),i.generateRequest(t,n.buffer).catch(function(e){if(!this.c){for(var t=0;t<this.a.length;++t)if(this.a[t].aa==i){this.a.splice(t,1);break}this.g(new u(2,6,6006,e.message))}}.bind(e))}function pe(e,t){for(var n,i=t.target,r=0;r<e.a.length;r++)if(e.a[r].aa==i){n=e.a[r].ib;break}r=O([e.b.licenseServerUri],e.h.retryParameters),r.body=t.message,r.method="POST","com.microsoft.playready"==e.b.keySystem&&me(r),e.ka.request(2,r).then(function(e){return this.c?Promise.reject():i.update(e.data).then(function(){n&&n.resolve()})}.bind(e),function(e){if(this.c)return Promise.resolve();e=new u(2,6,6007,e),this.g(e),n&&n.reject(e)}.bind(e)).catch(function(e){if(this.c)return Promise.resolve();e=new u(2,6,6008,e.message),this.g(e),n&&n.reject(e)}.bind(e))}function me(e){var t=String.fromCharCode.apply(null,new Uint8Array(e.body));if(t.indexOf("<PlayReadyKeyMessage"))e.headers["Content-Type"]="text/xml; charset=utf-8";else{for(var t=H(e.body,!0),t=(new DOMParser).parseFromString(t,"application/xml"),n=t.getElementsByTagName("HttpHeader"),i=0;i<n.length;++i)e.headers[n[i].querySelector("name").textContent]=n[i].querySelector("value").textContent;e.body=$(t.querySelector("Challenge").textContent).buffer}}function ve(){var e=[],t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n=[{videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:t}],i={};return"org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").forEach(function(t){var r=navigator.requestMediaKeySystemAccess(t,n).then(function(e){var n=e.getConfiguration().sessionTypes;return i[t]={persistentState:!!n&&0<=n.indexOf("persistent-license")},e.createMediaKeys()}).catch(function(){i[t]=null});e.push(r)}),Promise.all(e).then(function(){return i})}function ge(e,t){var n=e.keySystem();return!t.drmInfos.length||t.drmInfos.some(function(e){return e.keySystem==n})}function be(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],i=0;i<e.length;i++)for(var r=0;r<t.length;r++)if(e[i].keySystem==t[r].keySystem){var a=e[i],r=t[r],s=[],s=s.concat(a.initData||[]),s=s.concat(r.initData||[]),o=[],o=o.concat(a.keyIds),o=o.concat(r.keyIds);n.push({keySystem:a.keySystem,licenseServerUri:a.licenseServerUri||r.licenseServerUri,distinctiveIdentifierRequired:a.distinctiveIdentifierRequired||r.distinctiveIdentifierRequired,persistentStateRequired:a.persistentStateRequired||r.persistentStateRequired,videoRobustness:a.videoRobustness||r.videoRobustness,audioRobustness:a.audioRobustness||r.audioRobustness,serverCertificate:a.serverCertificate||r.serverCertificate,initData:s,keyIds:o});break}return n}function ye(e){this.f=null,this.c=e,this.h=0,this.g=1/0,this.a=this.b=null}function Ee(e,t){hs[e]=t.length?Ae.bind(null,t):t}function we(e,t,n){return e>=t?null:new VTTCue(e,t,n)}function Se(e,t,n,i){return Promise.resolve().then(function(){if(this.c)if(null==n||null==i)this.f.parseInit(t);else{for(var e=this.f.parseMedia(t,{periodStart:this.h,segmentStart:n,segmentEnd:i}),r=0;r<e.length&&!(e[r].startTime>=this.g);++r)this.c.addCue(e[r]);null==this.b&&(this.b=n),this.a=Math.min(i,this.g)}}.bind(e))}function Te(e,t){for(var n=e.c.cues,i=[],r=0;r<n.length;++r)t(n[r])&&i.push(n[r]);for(r=0;r<i.length;++r)e.c.removeCue(i[r])}function Ae(e){this.Na=e}function Ne(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Ie(e,t){return!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))&&(t>=e.start(0)&&t<=e.end(e.length-1))}function Le(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,i=e.length-1;0<=i&&e.end(i)>t;--i)n+=e.end(i)-Math.max(e.start(i),t);return n}function Ce(e,t,n){this.f=e,this.N=t,this.i=n,this.c={},this.a=null,this.b={},this.g=new R,this.h=!1}function ke(){var e={};return'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hvc1.1.6.L93.90",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="av1",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",video/mp2t; codecs="mp4a.40.2",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").forEach(function(t){e[t]=!!hs[t]||MediaSource.isTypeSupported(t);var n=t.split(";")[0];e[n]=e[n]||e[t]}),e}function _e(e,t){e.a||(e.a=new ye(e.i)),e.a.f=new hs[t]}function Oe(e,t){if("text"==t)var n=e.a.b;else n=Pe(e,t),n=!n||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function Pe(e,t){try{return e.c[t].buffered}catch(e){return null}}function xe(e,t,n,i,r){return"text"==t?Se(e.a,n,i,r):Fe(e,t,e.ge.bind(e,t,n))}function Re(e,t){return"text"==t?e.a.remove(0,1/0):Fe(e,t,e.oc.bind(e,t,0,e.N.duration))}function De(e,t,n,i){return"text"==t?(e.a.h=n,null!=i&&(e.a.g=i),Promise.resolve()):(null==i&&(i=1/0),Promise.all([Fe(e,t,e.Cc.bind(e,t)),Fe(e,t,e.Xd.bind(e,t,n)),Fe(e,t,e.Vd.bind(e,t,i))]))}function Fe(e,t,n){if(e.h)return Promise.reject();if(n={start:n,p:new C},e.b[t].push(n),1==e.b[t].length)try{n.start()}catch(i){"QuotaExceededError"==i.name?n.p.reject(new u(2,3,3017,t)):n.p.reject(new u(2,3,3015,i)),Me(e,t)}return n.p}function je(e,t){if(e.h)return Promise.reject();var n,i=[];for(n in e.c){var r=new C,a={start:function(e){e.resolve()}.bind(null,r),p:r};e.b[n].push(a),i.push(r),1==e.b[n].length&&a.start()}return Promise.all(i).then(function(){var e;try{t()}catch(e){var n=Promise.reject(new u(2,3,3015,e))}for(e in this.c)Me(this,e);return n}.bind(e),function(){return Promise.reject()}.bind(e))}function Me(e,t){e.b[t].shift();var n=e.b[t][0];if(n)try{n.start()}catch(i){n.p.reject(new u(2,3,3015,i)),Me(e,t)}}function Ue(e,t,n){return n==t||e>=fs&&n==t.split("-")[0]||e>=ps&&n.split("-")[0]==t.split("-")[0]}function Be(e){e=e.toLowerCase().split("-");var t=ms[e[0]];return t&&(e[0]=t),e.join("-")}function Ge(e,t,n){var i=e.video;return!(i&&(i.width<t.minWidth||i.width>t.maxWidth||i.width>n.width||i.height<t.minHeight||i.height>t.maxHeight||i.height>n.height||i.width*i.height<t.minPixels||i.width*i.height>t.maxPixels)||e.bandwidth<t.minBandwidth||e.bandwidth>t.maxBandwidth)}function Ke(e,t,n){var i=!1;return e.variants.forEach(function(e){var r=e.allowedByApplication;e.allowedByApplication=Ge(e,t,n),r!=e.allowedByApplication&&(i=!0)}),i}function Je(e,t,n){var i=t.video,r=t.audio;for(t=0;t<n.variants.length;++t){var a=n.variants[t],s=e,o=r,u=i;(s&&s.J&&!ge(s,a)?0:He(a.audio,s,o)&&He(a.video,s,u))||(n.variants.splice(t,1),--t)}for(t=0;t<n.textStreams.length;++t)e=n.textStreams[t],hs[et(e.mimeType,e.codecs)]||(n.textStreams.splice(t,1),--t)}function He(e,t,n){if(!e)return!0;var i=null;return t&&t.J&&(i=t.v),t=et(e.mimeType,e.codecs),!(!hs[t]&&!MediaSource.isTypeSupported(t)||i&&e.encrypted&&0>i.indexOf(t)||n&&(e.mimeType!=n.mimeType||e.codecs.split(".")[0]!=n.codecs.split(".")[0]))}function Ve(e,t,n){return Xe(e.variants).map(function(e){var i;i=e.video&&e.audio?n==e.video.id&&t==e.audio.id:e.video&&n==e.video.id||e.audio&&t==e.audio.id;var r="";e.video&&(r+=e.video.codecs),e.audio&&(""!=r&&(r+=", "),r+=e.audio.codecs);var a=e.audio?e.audio.codecs:null,s=e.video?e.video.codecs:null,o=null;e.video?o=e.video.mimeType:e.audio&&(o=e.audio.mimeType);var u=null;return e.audio?u=e.audio.kind:e.video&&(u=e.video.kind),{id:e.id,active:i,type:"variant",bandwidth:e.bandwidth,language:e.language,kind:u||null,width:e.video?e.video.width:null,height:e.video?e.video.height:null,frameRate:e.video?e.video.frameRate:void 0,mimeType:o,codecs:r,audioCodec:a,videoCodec:s,primary:e.primary}})}function ze(e,t){return e.textStreams.map(function(e){return{id:e.id,active:t==e.id,type:"text",language:e.language,kind:e.kind,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary}})}function Ye(e,t){for(var n=0;n<e.variants.length;n++)if(e.variants[n].id==t.id)return e.variants[n];return null}function qe(e,t){for(var n=0;n<e.textStreams.length;n++)if(e.textStreams[n].id==t.id)return e.textStreams[n];return null}function Xe(e){return e.filter(function(e){return e.allowedByApplication&&e.allowedByKeySystem})}function We(e,t,n){var i=Xe(e.variants),r=i.filter(function(e){return e.language==i[0].language});if(e=i.filter(function(e){return e.primary}),e.length&&(r=e),t){var a=Be(t);[ps,fs,0].forEach(function(e){var t=!1;i.forEach(function(i){a=Be(a);var s=Be(i.language);Ue(e,a,s)&&(t?r.push(i):(r=[i],t=!0),n&&(n.audio=!0))})})}return r}function $e(e,t,n){var i=e.textStreams,r=i;if(e=i.filter(function(e){return e.primary}),e.length&&(r=e),t){var a=Be(t);[ps,fs,0].forEach(function(e){var t=!1;i.forEach(function(i){var s=Be(i.language);Ue(e,a,s)&&(t?r.push(i):(r=[i],t=!0),n&&(n.text=!0))})})}return r}function Qe(e,t,n){for(var i=0;i<n.length;i++)if(n[i].audio==e&&n[i].video==t)return n[i];return null}function Ze(e,t,n){function i(e,t){return null==e?null==t:t.id==e}for(var r=0;r<n.length;r++)if(i(e,n[r].audio)&&i(t,n[r].video))return n[r];return null}function et(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function tt(e,t){for(var n=e.periods.length-1;0<n;--n)if(t>=e.periods[n].startTime)return n;return 0}function nt(e,t){for(var n=0;n<e.periods.length;++n){var i=e.periods[n];if("text"==t.type){for(var r=0;r<i.textStreams.length;++r)if(i.textStreams[r]==t)return n}else for(r=0;r<i.variants.length;++r){var a=i.variants[r];if(a.audio==t||a.video==t||a.video&&a.video.trickModeVideo==t)return n}}return-1}function it(){this.f=null,this.b=!1,this.a=new s,this.h=[],this.g=[],this.j=!1,this.c=null,this.i={minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}}function rt(e,t){return t.filter(function(t){return Ge(t,e,{width:1/0,height:1/0})}).sort(function(e,t){return e.bandwidth-t.bandwidth})}function at(t,n){var i,r=n||{};for(i in r)this[i]=r[i];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function st(e){return JSON.stringify(e,function(e,t){if("manager"!=e&&"function"!=typeof t){if(t instanceof Event||t instanceof at){var n,i={};for(n in t){var r=t[n];r&&"object"==typeof r||n in Event||(i[n]=r)}return i}if(t instanceof TimeRanges)for(i={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=0;n<t.length;++n)i.start.push(t.start(n)),i.end.push(t.end(n));else i="number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return i}})}function ot(e){return JSON.parse(e,function(e,t){return"NaN"==t?NaN:"-Infinity"==t?-1/0:"Infinity"==t?1/0:t&&"object"==typeof t&&"TimeRanges"==t.__type__?ut(t):t})}function ut(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}function lt(e,t,n,i,r){this.J=e,this.l=t,this.B=n,this.G=i,this.v=r,this.c=this.j=this.h=!1,this.A="",this.a=this.i=null,this.b={video:{},player:{}},this.o=0,this.f={},this.g=null}function ct(e){for(var t in e.f){var n=e.f[t];delete e.f[t],n.reject(new u(1,7,7e3))}}function dt(e,t){var n=st(t);e.a.sendMessage("urn:x-cast:com.google.shaka.v2",n,function(){},o)}function ht(){this.lb=new x,this.Ta=this}function ft(e,t,n){ht.call(this),this.c=e,this.b=t,this.h=this.f=this.g=this.i=this.j=null,this.a=new lt(n,this.ce.bind(this),this.de.bind(this),this.ee.bind(this),this.Tb.bind(this)),pt(this)}function pt(e){e.a.init(),e.h=new R,vs.forEach(function(e){D(this.h,this.c,e,this.re.bind(this))}.bind(e)),Es.forEach(function(e){D(this.h,this.b,e,this.Gd.bind(this))}.bind(e)),e.j={};for(var t in e.c)Object.defineProperty(e.j,t,{configurable:!1,enumerable:!0,get:e.qe.bind(e,t),set:e.se.bind(e,t)});e.i={};for(t in e.b)Object.defineProperty(e.i,t,{configurable:!1,enumerable:!0,get:e.Fd.bind(e,t)});e.g=new ht,e.g.Ta=e.j,e.f=new ht,e.f.Ta=e.i}function mt(e,t,n,i){ht.call(this),this.a=e,this.b=t,this.j={video:e,player:t},this.l=n||function(){},this.o=i||function(e){return e},this.i=!1,this.f=!0,this.h=this.g=this.c=null,vt(this)}function vt(t){var n=cast.receiver.CastReceiverManager.getInstance();n.onSenderConnected=t.hc.bind(t),n.onSenderDisconnected=t.hc.bind(t),n.onSystemVolumeChanged=t.Kc.bind(t),t.g=n.getCastMessageBus("urn:x-cast:com.google.cast.media"),t.g.onMessage=t.fd.bind(t),t.c=n.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),t.c.onMessage=t.td.bind(t),n.start(),vs.forEach(function(e){this.a.addEventListener(e,this.kc.bind(this,"video"))}.bind(t)),Es.forEach(function(e){this.b.addEventListener(e,this.kc.bind(this,"player"))}.bind(t)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?t.b.Hb(3840,2160):t.b.Hb(1920,1080),t.b.addEventListener("loading",function(){this.f=!1,gt(this)}.bind(t)),t.a.addEventListener("playing",function(){this.f=!1,gt(this)}.bind(t)),t.a.addEventListener("pause",function(){gt(this)}.bind(t)),t.b.addEventListener("unloading",function(){this.f=!0,gt(this)}.bind(t)),t.a.addEventListener("ended",function(){e.setTimeout(function(){this.a&&this.a.ended&&(this.f=!0,gt(this))}.bind(this),5e3)}.bind(t))}function gt(e){Promise.resolve().then(function(){this.dispatchEvent(new at("caststatuschanged")),Et(this,0)}.bind(e))}function bt(e,t,n){for(var i in t.player)e.b[i](t.player[i]);e.l(n),n=Promise.resolve();var r=e.a.autoplay;t.manifest&&(e.a.autoplay=!1,n=e.b.load(t.manifest,t.startTime),n.catch(function(e){this.b.dispatchEvent(new at("error",{detail:e}))}.bind(e))),n.then(function(){var e;for(e in t.video){var n=t.video[e];this.a[e]=n}for(e in t.playerAfterLoad)n=t.playerAfterLoad[e],this.b[e](n);this.a.autoplay=r,t.manifest&&(this.a.play(),Et(this,0))}.bind(e))}function yt(e,t,n,i){e.i&&(e=st(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Et(e,t,n){var i=Is,i={mediaSessionId:0,playbackRate:e.a.playbackRate,playerState:e.f?i.IDLE:e.b.ka?i.yc:e.a.paused?i.zc:i.Ac,currentTime:e.a.currentTime,supportedMediaCommands:15,volume:{level:e.a.volume,muted:e.a.muted}};n&&(i.media=n),yt(e,{requestId:t,type:"MEDIA_STATUS",status:[i]},e.g)}function wt(e,t){var n=St(e,t);return 1!=n.length?null:n[0]}function St(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return e.tagName==t})}function Tt(e){var t=e.firstChild;return t&&t.nodeType==Node.TEXT_NODE?e.textContent.trim():null}function At(e,t,n,i){var r=null;return e=e.getAttribute(t),null!=e&&(r=n(e)),null==r?void 0!=i?i:null:r}function Nt(e){return e?(e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null}function It(e){return e&&(e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function Lt(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function Ct(e){return e=Number(e),e%1?null:e}function kt(e){return e=Number(e),!(e%1)&&0<e?e:null}function _t(e){return e=Number(e),!(e%1)&&0<=e?e:null}function Ot(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1]/t[2]):Number(e),isNaN(e)?null:e}function Pt(e,t,n){e=Dt(e);var i=null,r=null,a=[],s=[],o=e.map(function(e){return e.keyId}).filter(w);if(0<o.length&&(r=o[0],o.some(S(r))))throw new u(2,4,4010);return n||(s=e.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.qc||(i=e.init||i,!1)}),0<s.length&&(a=Rt(i,t,s),a.length||(a=[N("",i)]))),0<e.length&&(n||!s.length)&&(a=B(Ls).map(function(e){return N(e,i)})),r&&a.forEach(function(e){e.initData.forEach(function(e){e.keyId=r})}),{Qb:r,xe:i,drmInfos:a,Sb:!0}}function xt(e,t,n,i){var r=Pt(e,t,i);if(n.Sb)e=1==n.drmInfos.length&&!n.drmInfos[0].keySystem,t=!r.drmInfos.length,(!n.drmInfos.length||e&&!t)&&(n.drmInfos=r.drmInfos),n.Sb=!1;else if(0<r.drmInfos.length&&(n.drmInfos=n.drmInfos.filter(function(e){return r.drmInfos.some(function(t){return t.keySystem==e.keySystem})}),!n.drmInfos.length))throw new u(2,4,4008);return r.Qb||n.Qb}function Rt(e,t,n){return n.map(function(n){var i=Ls[n.qc];return i?[N(i,n.init||e)]:t(n.node)||[]}).reduce(y,[])}function Dt(e){return e.map(function(e){var t=e.getAttribute("schemeIdUri"),n=e.getAttribute("cenc:default_KID"),i=St(e,"cenc:pssh").map(Tt);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),0<=n.indexOf(" ")))throw new u(2,4,4009);var r=[];try{r=i.map(function(e){return{initDataType:"cenc",initData:$(e),keyId:null}})}catch(e){throw new u(2,4,4007)}return{node:e,qc:t,keyId:n,init:0<r.length?r:null}}).filter(w)}function Ft(t,n,i,r,a){null!=a&&(a=Math.round(a));var s={RepresentationID:n,Number:i,Bandwidth:r,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(t,n,i){if("$$"==t)return"$";var r=s[n];return null==r?t:("RepresentationID"==n&&i&&(i=void 0),t=r.toString(),i=e.parseInt(i,10)||1,Array(Math.max(0,i-t.length)+1).join("0")+t)})}function jt(e,t){var n=Mt(e,t,"timescale"),i=1;n&&(i=kt(n)||1),n=Mt(e,t,"duration"),(n=kt(n||""))&&(n/=i);var r=Mt(e,t,"startNumber"),a=Mt(e,t,"presentationTimeOffset"),s=_t(r||"");null!=r&&null!=s||(s=1);var o=Ut(e,t,"SegmentTimeline"),r=null;if(o){for(var r=i,u=Number(a),l=e.R.duration||1/0,o=St(o,"S"),c=[],d=0,h=0;h<o.length;++h){var f=o[h],p=At(f,"t",_t),m=At(f,"d",_t),f=At(f,"r",Ct);if(null!=p&&(p-=u),!m)break;if(p=null!=p?p:d,0>(f=f||0))if(h+1<o.length){if(null==(f=At(o[h+1],"t",_t)))break;if(p>=f)break;f=Math.ceil((f-p)/m)-1}else{if(1/0==l)break;if(p/r>=l)break;f=Math.ceil((l*r-p)/m)-1}0<c.length&&p!=d&&(c[c.length-1].end=p/r);for(var v=0;v<=f;++v)d=p+m,c.push({start:p/r,end:d/r,oe:p}),p=d}r=c}return{timescale:i,O:n,ya:s,presentationTimeOffset:Number(a)/i||0,Nb:Number(a),F:r}}function Mt(e,t,n){return[t(e.w),t(e.S),t(e.T)].filter(w).map(function(e){return e.getAttribute(n)}).reduce(function(e,t){return e||t})}function Ut(e,t,n){return[t(e.w),t(e.S),t(e.T)].filter(w).map(function(e){return wt(e,n)}).reduce(function(e,t){return e||t})}function Bt(e,t,n){this.a=e,this.X=t,this.M=n}function Gt(e,t,n,i,r,a){this.position=e,this.startTime=t,this.endTime=n,this.a=i,this.X=r,this.M=a}function Kt(e,t){this.H=e,this.a=t==Cs,this.u=0}function Jt(){throw new u(2,3,3e3)}function Ht(){this.b=[],this.a=[]}function Vt(e){for(;e.s.Z();)e.Na.eb(e.start,e.s)}function zt(e){for(var t=e.s.D();0<t;--t)e.Na.eb(e.start,e.s)}function Yt(e){return function(t){e(t.s.Ja(t.s.H.byteLength-t.s.u))}}function qt(e){for(var t=0,n=0;n<e.length;n++)t=t<<8|e.charCodeAt(n);return t}function Xt(e,t,n,i){var r,a=(new Ht).ca("sidx",function(e){r=Wt(t,i,n,e)});if(e&&a.parse(e),r)return r;throw new u(2,3,3004)}function Wt(e,t,n,i){var r=[];i.s.I(4);var a=i.s.D();if(!a)throw new u(2,3,3005);if(i.version)var s=i.s.Pa(),o=i.s.Pa();else s=i.s.D(),o=i.s.D();i.s.I(2);var l=i.s.mc();for(t=s-t,e=e+i.size+o,o=0;o<l;o++){var c=i.s.D();s=(2147483648&c)>>>31;var c=2147483647&c,d=i.s.D();if(i.s.I(4),1==s)throw new u(2,3,3006);r.push(new Gt(r.length,t/a,(t+d)/a,function(){return n},e,e+c-1)),t+=d,e+=c}return r}function $t(e){this.a=e}function Qt(e,t){if(e.a.length){var n=e.a[e.a.length-1];n.startTime>t||(e.a[e.a.length-1]=new Gt(n.position,n.startTime,t,n.a,n.X,n.M))}}function Zt(e){this.b=e,this.a=new Kt(e,0),ks||(ks=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function en(e){var t=tn(e);if(7<t.length)throw new u(2,3,3002);for(var n=0,i=0;i<t.length;i++)n=256*n+t[i];t=n,n=tn(e);e:{for(i=0;i<ks.length;i++)if(ee(n,ks[i])){i=!0;break e}i=!1}if(i)n=e.b.byteLength-e.a.u;else{if(8==n.length&&224&n[1])throw new u(2,3,3001);for(var i=n[0]&(1<<8-n.length)-1,r=1;r<n.length;r++)i=256*i+n[r];n=i}return n=e.a.u+n<=e.b.byteLength?n:e.b.byteLength-e.a.u,i=new DataView(e.b.buffer,e.b.byteOffset+e.a.u,n),e.a.I(n),new nn(t,i)}function tn(e){var t,n=e.a.Cb();for(t=1;8>=t&&!(n&1<<8-t);t++);if(8<t)throw new u(2,3,3002);var i=new Uint8Array(t);for(i[0]=n,n=1;n<t;n++)i[n]=e.a.Cb();return i}function nn(e,t){this.id=e,this.a=t}function rn(e){if(8<e.a.byteLength)throw new u(2,3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new u(2,3,3001);for(var t=0,n=0;n<e.a.byteLength;n++)var i=e.a.getUint8(n),t=256*t+i;return t}function an(){}function sn(e,t,n,i,r,a){function s(){return r}var o=[];e=new Zt(e.a);for(var u=-1,l=-1;e.Z();){var c=en(e);if(187==c.id){var d=on(c);d&&(c=n*(d.pe-a),d=t+d.Ld,0<=u&&o.push(new Gt(o.length,u,c,s,l,d-1)),u=c,l=d)}}return 0<=u&&o.push(new Gt(o.length,u,i,s,l,null)),o}function on(e){var t=new Zt(e.a);if(e=en(t),179!=e.id)throw new u(2,3,3013);if(e=rn(e),t=en(t),183!=t.id)throw new u(2,3,3012);for(var t=new Zt(t.a),n=0;t.Z();){var i=en(t);if(241==i.id){n=rn(i);break}}return{pe:e,Ld:n}}function un(e,t){var n=Ut(e,t,"Initialization");if(!n)return null;var i=e.w.U,r=n.getAttribute("sourceURL");r&&(i=A(e.w.U,[r]));var r=0,a=null;return(n=At(n,"range",Lt))&&(r=n.start,a=n.end),new Bt(function(){return i},r,a)}function ln(e,t){var n=Mt(e,dn,"presentationTimeOffset"),i=un(e,dn),r=Number(n),a=e.w.contentType,s=e.w.mimeType.split("/")[1];if("text"!=a&&"mp4"!=s&&"webm"!=s)throw new u(2,4,4006);if("webm"==s&&!i)throw new u(2,4,4005);var a=Ut(e,dn,"RepresentationIndex"),o=Mt(e,dn,"indexRange"),l=e.w.U,o=Lt(o||"");if(a){var c=a.getAttribute("sourceURL");c&&(l=A(e.w.U,[c])),o=At(a,"range",Lt,o)}if(!o)throw new u(2,4,4002);return r=cn(e,t,i,l,o.start,o.end,s,r),{createSegmentIndex:r.createSegmentIndex,findSegmentPosition:r.findSegmentPosition,getSegmentReference:r.getSegmentReference,initSegmentReference:i,presentationTimeOffset:Number(n)||0}}function cn(e,t,n,i,r,a,s,o){var u=e.presentationTimeline,l=!e.Ca||!e.R.sb,c=e.R.duration,d=t,h=null;return{createSegmentIndex:function(){var e=[d(i,r,a),"webm"==s?d(n.a(),n.X,n.M):null];return d=null,Promise.all(e).then(function(e){var t=e[0];e=e[1]||null,t="mp4"==s?Xt(t,r,i,o):(new an).parse(t,e,i,o),u.Ga(0,t),h=new $t(t),l&&Qt(h,c)})},findSegmentPosition:function(e){return h.find(e)},getSegmentReference:function(e){return h.get(e)}}}function dn(e){return e.Qa}function hn(e,t){var n=un(e,fn),i=mn(e),r=jt(e,fn),a=r.ya;a||(a=1);var s=0;if(r.O?s=r.O*(a-1):r.F&&0<r.F.length&&(s=r.F[0].start),i={O:r.O,startTime:s,ya:a,presentationTimeOffset:r.presentationTimeOffset,F:r.F,Fa:i},!i.O&&!i.F&&1<i.Fa.length)throw new u(2,4,4002);if(!i.O&&!e.R.duration&&!i.F&&1==i.Fa.length)throw new u(2,4,4002);if(i.F&&!i.F.length)throw new u(2,4,4002);return a=r=null,e.T.id&&e.w.id&&(a=e.T.id+","+e.w.id,r=t[a]),s=pn(e.R.duration,i.ya,e.w.U,i),r?(r.vb(s),r.ob(e.presentationTimeline.ma()-e.R.start)):(e.presentationTimeline.Ga(0,s),r=new $t(s),a&&e.Ca&&(t[a]=r)),e.Ca&&e.R.sb||Qt(r,e.R.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:r.find.bind(r),getSegmentReference:r.get.bind(r),initSegmentReference:n,presentationTimeOffset:i.presentationTimeOffset}}function fn(e){return e.oa}function pn(e,t,n,i){var r=i.Fa.length;i.F&&i.F.length!=i.Fa.length&&(r=Math.min(i.F.length,i.Fa.length));for(var a=[],s=i.startTime,o=0;o<r;o++){var u=i.Fa[o],l=A(n,[u.ad]),c=null!=i.O?s+i.O:i.F?i.F[o].end:s+e;a.push(new Gt(o+t,s,c,function(e){return e}.bind(null,l),u.start,u.end)),s=c}return a}function mn(e){return[e.w.oa,e.S.oa,e.T.oa].filter(w).map(function(e){return St(e,"SegmentURL")}).reduce(function(e,t){return 0<e.length?e:t}).map(function(t){t.getAttribute("indexRange")&&!e.Yb&&(e.Yb=!0);var n=t.getAttribute("media");return t=At(t,"mediaRange",Lt,{start:0,end:null}),{ad:n,start:t.start,end:t.end}})}function vn(e,t,n,i){var r=En(e),a=jt(e,gn),s=Mt(e,gn,"media"),o=Mt(e,gn,"index");if(a={O:a.O,timescale:a.timescale,ya:a.ya,presentationTimeOffset:a.presentationTimeOffset,Nb:a.Nb,F:a.F,ub:s,La:o},s=0+(a.La?1:0),s+=a.F?1:0,!(s+=a.O?1:0))throw new u(2,4,4002);if(1!=s&&(a.La&&(a.F=null),a.O=null),!a.La&&!a.ub)throw new u(2,4,4002);if(a.La){if("mp4"!=(n=e.w.mimeType.split("/")[1])&&"webm"!=n)throw new u(2,4,4006);if("webm"==n&&!r)throw new u(2,4,4005);i=Ft(a.La,e.w.id,null,e.bandwidth||null,null),i=A(e.w.U,[i]),e=cn(e,t,r,i,0,null,n,a.presentationTimeOffset)}else a.O?(i||e.presentationTimeline.wb(a.O),e=bn(e,a)):(i=t=null,e.T.id&&e.w.id&&(i=e.T.id+","+e.w.id,t=n[i]),s=yn(e,a),t?(t.vb(s),t.ob(e.presentationTimeline.ma()-e.R.start)):(e.presentationTimeline.Ga(0,s),t=new $t(s),i&&e.Ca&&(n[i]=t)),e.Ca&&e.R.sb||Qt(t,e.R.duration),e={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t)});return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,initSegmentReference:r,presentationTimeOffset:a.presentationTimeOffset}}function gn(e){return e.Ra}function bn(e,t){var n=e.R.duration,i=t.O,r=t.ya,a=t.timescale,s=t.ub,o=e.bandwidth||null,u=e.w.id,l=e.w.U;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0>e||n&&e>=n?null:Math.floor(e/i)},getSegmentReference:function(e){var t=e*i;return 0>t||n&&t>=n?null:new Gt(e,t,t+i,function(){var n=Ft(s,u,e+r,o,t*a);return A(l,[n])},0,null)}}}function yn(e,t){for(var n=[],i=0;i<t.F.length;i++){var r=i+t.ya;n.push(new Gt(r,t.F[i].start,t.F[i].end,function(e,t,n,i,r,a){return e=Ft(e,t,r,n,a),A(i,[e]).map(function(e){return e.toString()})}.bind(null,t.ub,e.w.id,e.bandwidth||null,e.w.U,r,t.F[i].oe+t.Nb),0,null))}return n}function En(e){var t=Mt(e,gn,"initialization");if(!t)return null;var n=e.w.id,i=e.bandwidth||null,r=e.w.U;return new Bt(function(){var e=Ft(t,n,null,i,null);return A(r,[e])},0,null)}function wn(){var e,t={};for(e in _s)t[e]=!0;for(e in Os)t[e]=!0;return["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"].forEach(function(e){t[e]=!!_s[e]}),["mpd","m3u8","ism"].forEach(function(e){t[e]=!!Os[e]}),t}function Sn(e,t,n,i){var r=i;return r||(i=new l(e).W.split("/").pop().split("."),1<i.length&&(i=i.pop().toLowerCase(),r=Os[i])),r?Promise.resolve(r):(n=O([e],n),n.method="HEAD",t.request(0,n).then(function(t){return(t=t.headers["content-type"])&&(t=t.toLowerCase()),(r=_s[t])?r:Promise.reject(new u(2,4,4e3,e))},function(e){return e.severity=2,Promise.reject(e)}))}function Tn(e,t){this.f=e,this.i=t,this.c=this.a=1/0,this.b=1,this.h=0,this.g=!0}function An(){this.a=this.b=null,this.g=[],this.c=null,this.i=[],this.h=1,this.j={},this.l=0,this.f=null}function Nn(e){return e.a.networkingEngine.request(0,O(e.g,e.b.retryParameters)).then(function(e){if(this.a)return In(this,e.data,e.uri)}.bind(e))}function In(e,t,n){var i=J(t),r=new DOMParser,a=null;t=null;try{a=r.parseFromString(i,"text/xml")}catch(e){}if(a&&"MPD"==a.documentElement.tagName&&(t=a.documentElement),t&&0<t.getElementsByTagName("parsererror").length&&(t=null),!t)throw new u(2,4,4001);n=[n],i=St(t,"Location").map(Tt).filter(w),0<i.length&&(n=e.g=i),i=St(t,"BaseURL").map(Tt),n=A(n,i);var s=At(t,"minBufferTime",It);e.l=At(t,"minimumUpdatePeriod",It,-1);var o=At(t,"availabilityStartTime",Nt),i=At(t,"timeShiftBufferDepth",It),l=At(t,"suggestedPresentationDelay",It),r=At(t,"maxSegmentDuration",It),a=t.getAttribute("type")||"static";if(e.c)var c=e.c.presentationTimeline;else{var d=Math.max(10,1.5*s);c=new Tn(o,null!=l?l:d)}var o=Ln(e,{Ca:"static"!=a,presentationTimeline:c,T:null,R:null,S:null,w:null,bandwidth:void 0,Yb:!1},n,t),l=o.duration,h=o.periods;return c.wc("static"==a),c.pa(l||1/0),c.vc(null!=i?i:1/0),c.wb(r||1),e.c?Promise.resolve():(t=St(t,"UTCTiming"),Dn(e,n,t,c.da()).then(function(e){this.a&&(c.uc(e),this.c={presentationTimeline:c,periods:h,offlineSessionIds:[],minBufferTime:s||0})}.bind(e)))}function Ln(e,t,n,i){var r=At(i,"mediaPresentationDuration",It),a=[],s=0;i=St(i,"Period");for(var o=0;o<i.length;o++){var u=i[o],s=At(u,"start",It,s),l=At(u,"duration",It),c=null;if(o!=i.length-1){var d=At(i[o+1],"start",It);null!=d&&(c=d-s)}else null!=r&&(c=r-s);if(null==c&&(c=l),u=Cn(e,t,n,{start:s,duration:c,node:u,sb:null==c||o==i.length-1}),a.push(u),l=t.T.id,e.i.every(S(l))&&(e.a.filterPeriod(u),e.i.push(l),e.c&&e.c.periods.push(u)),null==c){s=null;break}s+=c}return null!=r?{periods:a,duration:r}:{periods:a,duration:s}}function Cn(e,t,n,i){t.T=Pn(i.node,null,n),t.R=i,t.T.id||(t.T.id="__shaka_period_"+i.start),St(i.node,"EventStream").forEach(e.Dd.bind(e,i.start,i.duration)),n=St(i.node,"AdaptationSet").map(e.Bd.bind(e,t)).filter(w);var r=n.map(function(e){return e.Nd}).reduce(y,[]),a=r.filter(T);if(t.Ca&&r.length!=a.length)throw new u(2,4,4018);var s=n.filter(function(e){return!e.Mb});if(n.filter(function(e){return e.Mb}).forEach(function(e){var t=e.streams[0],n=e.Mb;s.forEach(function(e){e.id==n&&e.streams.forEach(function(e){e.trickModeVideo=t})})}),r=kn(s,"video"),a=kn(s,"audio"),!r.length&&!a.length)throw new u(2,4,4004);for(a.length||(a=[null]),r.length||(r=[null]),t=[],n=0;n<a.length;n++)for(var o=0;o<r.length;o++)_n(e,a[n],r[o],t);for(e=kn(s,"text"),r=[],n=0;n<e.length;n++)r.push.apply(r,e[n].streams);return{startTime:i.start,textStreams:r,variants:t}}function kn(e,t){return e.filter(function(e){return e.contentType==t})}function _n(e,t,n,i){if(t||n)if(t&&n){var r=t.drmInfos,a=n.drmInfos;if(r.length&&a.length?0<be(r,a).length:1)for(var s=be(t.drmInfos,n.drmInfos),r=0;r<t.streams.length;r++)for(var o=0;o<n.streams.length;o++)a=n.streams[o].bandwidth+t.streams[r].bandwidth,a={id:e.h++,language:t.language,primary:t.tb||n.tb,audio:t.streams[r],video:n.streams[o],bandwidth:a,drmInfos:s,allowedByApplication:!0,allowedByKeySystem:!0},i.push(a)}else for(s=t||n,r=0;r<s.streams.length;r++)a=s.streams[r].bandwidth,a={id:e.h++,language:s.language||"und",primary:s.tb,audio:t?s.streams[r]:null,video:n?s.streams[r]:null,bandwidth:a,drmInfos:s.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},i.push(a)}function On(t,n){0>t.l||(t.f=e.setTimeout(t.fe.bind(t),1e3*Math.max(Math.max(3,t.l)-n,0)))}function Pn(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",containsEmsgBoxes:!1,frameRate:void 0},n=n||t.U;var i=St(e,"BaseURL").map(Tt),r=e.getAttribute("contentType")||t.contentType,a=e.getAttribute("mimeType")||t.mimeType,s=e.getAttribute("codecs")||t.codecs,o=At(e,"frameRate",Ot)||t.frameRate,u=!!St(e,"InbandEventStream").length;return r||(r=Fn(a,s)),{U:A(n,i),Qa:wt(e,"SegmentBase")||t.Qa,oa:wt(e,"SegmentList")||t.oa,Ra:wt(e,"SegmentTemplate")||t.Ra,width:At(e,"width",_t)||t.width,height:At(e,"height",_t)||t.height,contentType:r,mimeType:a,codecs:s,frameRate:o,containsEmsgBoxes:u||t.containsEmsgBoxes,id:e.getAttribute("id")}}function xn(e){var t=0+(e.Qa?1:0);return t+=e.oa?1:0,(t+=e.Ra?1:0)?(1!=t&&(e.Qa&&(e.oa=null),e.Ra=null),!0):"text"==e.contentType||"application"==e.contentType}function Rn(e,t,n,i){return t=A(t,[n]),t=O(t,e.b.retryParameters),t.method=i,e.a.networkingEngine.request(0,t).then(function(e){if("HEAD"==i){if(!e.headers||!e.headers.date)return 0;e=e.headers.date}else e=J(e.data);return e=Date.parse(e),isNaN(e)?0:e-Date.now()})}function Dn(e,t,n,i){n=n.map(function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}});var r=e.b.dash.clockSyncUri;return i&&!n.length&&r&&n.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),b(n,function(e){var n=e.value;switch(e.scheme){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return Rn(this,t,n,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return Rn(this,t,n,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return e=Date.parse(n),isNaN(e)?0:e-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:return Promise.reject()}}.bind(e)).catch(function(){return 0})}function Fn(e,t){return hs[et(e,t)]?"text":e.split("/")[0]}function jn(e,t,n,i){this.uri=e,this.type=t,this.ga=n,this.segments=i||null}function Mn(e,t,n,i){this.id=e,this.name=t,this.a=n,this.value=i||null}function Un(e,t){this.name=e,this.value=t}function Bn(e,t,n){return n=n||null,(e=e.getAttribute(t))?e.value:n}function Gn(e,t){this.ga=t,this.uri=e}function Kn(e,t){return e.filter(function(e){return e.name==t})}function Jn(e,t){var n=Kn(e,t);return n.length?n[0]:null}function Hn(e,t,n){return e.filter(function(e){var i=e.getAttribute("TYPE");return e=e.getAttribute("GROUP-ID"),i.value==t&&e.value==n})}function Vn(e){this.b=e,this.a=0}function zn(e,t){t.lastIndex=e.a;var n=(n=t.exec(e.b))?{position:n.index,length:n[0].length,Qd:n}:null;return e.a!=e.b.length&&n&&n.position==e.a?(e.a+=n.length,n.Qd):null}function Yn(e){return e.a==e.b.length?null:(e=zn(e,/[^ \t\n]*/gm))?e[0]:null}function qn(){this.a=0}function Xn(e,t,n){t=J(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var i=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new u(2,4,4015);t=0;for(var r=[],a=1;a<i.length;)if(/^#(?!EXT)/m.test(i[a]))a+=1;else{var s=i[a];if(s=$n(e.a++,s),0<=Ps.indexOf(s.name))t=1;else if(0<=xs.indexOf(s.name)){if(1!=t)throw new u(2,4,4017);return i=i.splice(a,i.length-a),e=Wn(e,i),new jn(n,t,r,e)}r.push(s),a+=1,"EXT-X-STREAM-INF"==s.name&&(s.a.push(new Un("URI",i[a])),a+=1)}return new jn(n,t,r)}function Wn(e,t){var n=[],i=[];return t.forEach(function(e){/^(#EXT)/.test(e)?(e=$n(this.a++,e),i.push(e)):/^#(?!EXT)/m.test(e)||(n.push(new Gn(e.trim(),i)),i=[])}.bind(e)),n}function $n(e,t){var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new u(2,4,4016);var i=n[1],r=n[2],n=[];if(r&&0<=r.indexOf("="))for(var a,r=new Vn(r),s=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;a=zn(r,s);)n.push(new Un(a[1],a[2]||a[3]));else if(r)return new Mn(e,i,n,r);return new Mn(e,i,n)}function Qn(e){return new Promise(function(t){var n=Qn.parse(e);t({uri:e,data:n.data,headers:{"content-type":n.contentType}})})}function Zn(){this.b=this.c=null,this.i=1,this.g={},this.f={},this.a=null,this.j="",this.h=new qn}function ei(e,t,n){if(t=Xn(e.h,t,n),0!=t.type)throw new u(2,4,4022);return e.a=new Tn(null,0),ti(e,t).then(function(e){return this.c.filterPeriod(e),{presentationTimeline:this.a,periods:[e],offlineSessionIds:[],minBufferTime:0}}.bind(e))}function ti(e,t){var n=Kn(t.ga,"EXT-X-STREAM-INF").map(function(e){return ni(this,e,t)}.bind(e)),i=Kn(t.ga,"EXT-X-MEDIA").filter(function(e){return"SUBTITLES"==pi(e,"TYPE")}.bind(e)).map(function(e){return ai(this,e,t)}.bind(e));return Promise.all(n).then(function(e){return Promise.all(i).then(function(t){var n=e.reduce(y,[]);return ci(this,n),{startTime:0,variants:n,textStreams:t}}.bind(this))}.bind(e))}function ni(e,t,n){var i=Number(pi(t,"BANDWIDTH")),r=Bn(t,"CODECS","avc1.42E01E,mp4a.40.2").split(","),a=t.getAttribute("RESOLUTION"),s=null,o=null,u=Bn(t,"FRAME-RATE");if(a)var l=a.value.split("x"),s=l[0],o=l[1];var c=fi(e,n);n=Kn(n.ga,"EXT-X-MEDIA");var d=Bn(t,"AUDIO"),h=Bn(t,"VIDEO");d?n=Hn(n,"AUDIO",d):h&&(n=Hn(n,"VIDEO",h)),n=n.map(function(e){return si(this,e,r,c)}.bind(e));var f=[],p=[];return Promise.all(n).then(function(e){if(d?f=e:h&&(p=e),f.length||p.length)var n=f.length?"video":"audio";else 1==r.length?n=a||u?"video":"audio":(n="video",r=[r.join(",")]);return e=r,oi(this,pi(t,"URI"),e,n,c,"und",!1)}.bind(e)).then(function(e){return"audio"==e.stream.type?f=[e]:p=[e],ii(this,f,p,i,s,o,u)}.bind(e))}function ii(e,t,n,i,r,a,s){n.forEach(function(e){(e=e.stream)&&(e.width=Number(r)||void 0,e.height=Number(a)||void 0,e.frameRate=Number(s)||void 0)}.bind(e)),t.length||(t=[null]),n.length||(n=[null]);for(var o=[],u=0;u<t.length;u++)for(var l=0;l<n.length;l++){var c=t[u]?t[u].stream:null,d=n[l]?n[l].stream:null,h=t[u]?t[u].drmInfos:null,f=n[l]?n[l].drmInfos:null;if(c&&d){if(!(h.length&&f.length?0<be(h,f).length:1))continue;var p=be(h,f)}else c?p=h:d&&(p=f);o.push(ri(e,c,d,i,p))}return o}function ri(e,t,n,i,r){return{id:e.i++,language:t?t.language:"und",primary:!!t&&t.primary||!!n&&n.primary,audio:t,video:n,bandwidth:i,drmInfos:r,allowedByApplication:!0,allowedByKeySystem:!0}}function ai(e,t,n){return pi(t,"TYPE"),n=fi(e,n),si(e,t,[],n).then(function(e){return e.stream})}function si(e,t,n,i){if(e.g[t.id])return Promise.resolve().then(function(){return this.g[t.id]}.bind(e));var r=pi(t,"TYPE").toLowerCase();"subtitles"==r&&(r="text");var a=Be(Bn(t,"LANGUAGE","und")),s=t.getAttribute("DEFAULT"),o=t.getAttribute("AUTOSELECT");return oi(e,pi(t,"URI"),n,r,i,a,!!s||!!o).then(function(e){return this.g[t.id]=e}.bind(e))}function oi(e,t,n,i,r,a,s){return t=A([e.j],[t])[0],e.c.networkingEngine.request(0,O([t],e.b.retryParameters)).then(function(e){if(e=Xn(this.h,e.data,e.uri),1!=e.type)throw new u(2,4,4017);r=fi(this,e)||r;var t=null;"text"!=i&&(t=ui(e));var o=Jn(e.ga,"EXT-X-MEDIA-SEQUENCE"),o=li(this,e,o?Number(o.value):0);this.a.Ga(0,o);var l=o[o.length-1].endTime-o[0].startTime,c=this.a.Y();(1/0==c||c<l)&&this.a.pa(l);var d=di(i,n),h=void 0;"text"==i&&(h="subtitle");var f=new $t(o),p=[];e.segments.forEach(function(e){e=Kn(e.ga,"EXT-X-KEY"),p.push.apply(p,e)});var m=!1,v=[],g=null;if(p.forEach(function(e){if("NONE"!=pi(e,"METHOD")){m=!0;var t=pi(e,"KEYFORMAT");(e=(t=Ms[t])?t(e):null)&&(e.keyIds.length&&(g=e.keyIds[0]),v.push(e))}}),m&&!v.length)throw new u(2,4,4026);return hi(this,i,o[0].a()[0]).then(function(e){return e={id:this.i++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:f.find.bind(f),getSegmentReference:f.get.bind(f),initSegmentReference:t,presentationTimeOffset:r||0,mimeType:e,codecs:d,kind:h,encrypted:m,keyId:g,language:a,type:i,primary:s,trickModeVideo:null,containsEmsgBoxes:!1,frameRate:void 0,width:void 0,height:void 0,bandwidth:void 0},this.f[e.id]=f,{stream:e,ye:f,drmInfos:v}}.bind(this))}.bind(e))}function ui(e){var t=Kn(e.ga,"EXT-X-MAP");if(!t.length)return null;if(1<t.length)throw new u(2,4,4020);var t=t[0],n=pi(t,"URI"),i=A([e.uri],[n])[0];return e=0,n=null,(t=Bn(t,"BYTERANGE"))&&(e=t.split("@"),t=Number(e[0]),e=Number(e[1]),n=e+t-1),new Bt(function(){return[i]},e,n)}function li(e,t,n){var i=t.segments,r=[];return i.forEach(function(e){var a,s=e.ga,o=A([t.uri],[e.uri])[0],u=mi(s).value.split(","),u=Number(u[0]);a=(e=i.indexOf(e))?r[e-1].endTime:0;var u=a+u,l=0,c=null;(s=Jn(s,"EXT-X-BYTERANGE"))&&(s=s.value.split("@"),c=Number(s[0]),l=s[1]?Number(s[1]):r[e-1].M,c=l+c-1,e==i.length-1&&(c=null)),r.push(new Gt(n+e,a,u,function(){return[o]},l,c))}.bind(e)),r}function ci(e,t){t.forEach(function(e){var t=this.a.Y(),n=e.video;e=e.audio,n&&this.f[n.id]&&Qt(this.f[n.id],t),e&&this.f[e.id]&&Qt(this.f[e.id],t)}.bind(e))}function di(e,t){if(1==t.length)return t[0];if("text"==e)return"";var n=Rs;"audio"==e&&(n=Ds);for(var i=0;i<n.length;i++)for(var r=0;r<t.length;r++)if(n[i].test(t[r].trim()))return t[r].trim();throw new u(2,4,4025,t)}function hi(e,t,n){var i=n.split("."),r=i[i.length-1];return"text"==t?Promise.resolve("text/vtt"):(i=Fs,"video"==t&&(i=js),(t=i[r])?Promise.resolve(t):(n=O([n],e.b.retryParameters),n.method="HEAD",e.c.networkingEngine.request(1,n).then(function(e){if(!(e=e.headers["content-type"]))throw new u(2,4,4021,r);return e})))}function fi(e,t){var n=Jn(t.ga,"EXT-X-START");return n?Number(pi(n,"TIME-OFFSET")):e.b.hls.defaultTimeOffset}function pi(e,t){var n=e.getAttribute(t);if(!n)throw new u(2,4,4023,t);return n.value}function mi(e){if(!(e=Jn(e,"EXTINF")))throw new u(2,4,4024,"EXTINF");return e}function vi(){}function gi(e){var t=[];if(!e)return t;for(var n=e.childNodes,i=0;i<n.length;i++){var r="span"==n[i].nodeName&&"p"==e.nodeName;n[i].nodeType!=Node.ELEMENT_NODE||"br"==n[i].nodeName||r||(r=gi(n[i]),t=t.concat(r))}return t.length||t.push(e),t}function bi(e,t){for(var n=e.childNodes,i=0;i<n.length;i++)if("br"==n[i].nodeName&&0<i)n[i-1].textContent+="\n";else if(0<n[i].childNodes.length)bi(n[i],t);else if(t){var r=n[i].textContent.trim(),r=r.replace(/\s+/g," ");n[i].textContent=r}}function yi(e,t,n,i){for(var r=gi(t),a=0;a<r.length;a++){var s=r[a].getAttribute(i);if(s)return s}return r=Ei,(e=r(t,"style",n)||r(e,"style",n))?e.getAttribute(i):null}function Ei(e,t,n){if(!e||1>n.length)return null;var i=null,r=e;for(e=null;r&&!(e=r.getAttribute(t))&&(r=r.parentNode)instanceof Element;);if(t=e)for(e=0;e<n.length;e++)if(n[e].getAttribute("xml:id")==t){i=n[e];break}return i}function wi(e,t){var n=null;if(Us.test(e))var n=Us.exec(e),i=Number(n[1]),r=Number(n[2]),a=Number(n[3]),s=Number(n[4]),s=s+(Number(n[5])||0)/t.b,a=a+s/t.frameRate,n=a+60*r+3600*i;else Bs.test(e)?n=Si(Bs,e):Gs.test(e)?n=Si(Gs,e):Ks.test(e)?(n=Ks.exec(e),n=Number(n[1])/t.frameRate):Js.test(e)?(n=Js.exec(e),n=Number(n[1])/t.a):Hs.test(e)&&(n=Si(Hs,e));return n}function Si(e,t){var n=e.exec(t);return n&&""!=n[0]?(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0):null}function Ti(e,t,n,i){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(i),this.a||(this.a=e?this.frameRate*this.b:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=e[1]/e[2])}function Ai(){this.a=new vi}function Ni(){}function Ii(e,t){var n;(n=/^align:(start|middle|center|end|left|right)$/.exec(t))?(e.align=n[1],"center"==n[1]&&"center"!=e.align&&(e.position="auto",e.align="middle")):(n=/^vertical:(lr|rl)$/.exec(t))?e.vertical=n[1]:(n=/^size:(\d{1,2}|100)%$/.exec(t))?e.size=Number(n[1]):(n=/^position:(\d{1,2}|100)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(n[1]),n[2]&&(e.positionAlign=n[2])):(n=/^line:(\d{1,2}|100)%(?:,(start|end|center))?$/.exec(t))?(e.snapToLines=!1,e.line=Number(n[1]),n[2]&&(e.lineAlign=n[2])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.snapToLines=!0,e.line=Number(n[1]),n[2]&&(e.lineAlign=n[2]))}function Li(e){if(!(e=zn(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function Ci(){this.a=null}function ki(e,t,n){var i,r,a;return(new Ht).C("payl",Yt(function(e){i=J(e)})).C("iden",Yt(function(e){r=J(e)})).C("sttg",Yt(function(e){a=J(e)})).parse(e),i?_i(i,r,a,t,n):null}function _i(e,t,n,i,r){if((e=we(i,r,e))&&t&&(e.id=t),e&&n)for(t=new Vn(n),n=Yn(t);n;)Ii(e,n),zn(t,/[ \t]+/gm),n=Yn(t);return e}function Oi(e,t,n,i,r,a){this.a=e,this.c=t,this.l=n,this.A=i,this.J=r,this.G=a,this.b=new R,this.h=!1,this.g=1,this.j=this.f=null,this.B=e.readyState,this.i=!1,this.P=this.v=-1,this.o=!1,0<e.readyState?this.dc():F(this.b,e,"loadedmetadata",this.dc.bind(this)),t=this.fc.bind(this),D(this.b,e,"ratechange",this.pd.bind(this)),D(this.b,e,"waiting",t),this.j=setInterval(t,250)}function Pi(e,t){0<e.a.readyState?e.a.currentTime=Mi(e,t):e.A=t}function xi(e){return 0<e.a.readyState?Mi(e,e.a.currentTime):Ri(e)}function Ri(e){return e.A?Mi(e,e.A):(e=e.c.presentationTimeline,1/0>e.Y()?e.ma():e.bb())}function Di(t,n){null!=t.f&&(e.clearInterval(t.f),t.f=null),t.g=n,t.a.playbackRate=t.h||0>n?0:n,!t.h&&0>n&&(t.f=e.setInterval(function(){this.a.currentTime+=n/4}.bind(t),250))}function Fi(e,t){var n=Ie.bind(null,e.a.buffered),i=1*Math.max(e.c.minBufferTime||0,e.l.rebufferingGoal),r=e.c.presentationTimeline,a=r.ua(),s=r.Da(i),o=r.Da(5),i=r.Da(i+5);return t>a?a:t<r.Da(0)?n(o)?o:i:t>=s||n(t)?t:i}function ji(e,t,n){e.a.currentTime=n;var i=0,r=function(){!this.a||10<=i++||this.a.currentTime!=t||(this.a.currentTime=n,setTimeout(r,100))}.bind(e);setTimeout(r,100)}function Mi(e,t){var n=e.c.presentationTimeline.ma();return t<n?n:(n=e.c.presentationTimeline.ua(),t>n?n:t)}function Ui(e,t,n,i,r,a){this.a=e,this.g=t,this.A=n,this.l=i,this.h=r,this.B=a,this.c=[],this.j=new R,this.b=!1,this.i=-1,this.f=null,Gi(this)}function Bi(e){var t=L(e);return t.eventElement=e.eventElement,t}function Gi(t){Ki(t),t.f=e.setTimeout(t.G.bind(t),250)}function Ki(t){t.f&&(e.clearTimeout(t.f),t.f=null)}function Ji(e,t){this.a=t,this.b=e,this.h=null,this.i=1,this.o=Promise.resolve(),this.g=[],this.j={},this.c={},this.f=this.l=this.v=!1}function Hi(e){return e.b.periods[tt(e.b,xi(e.a.Oa))]}function Vi(e){return G(e.c,function(e){return e.na||e.stream})}function zi(e,t){var n={};return n.text=t,Wi(e,n)}function Yi(e,t){var n=e.c.video;if(n){var i=n.stream;if(i)if(t){var r=i.trickModeVideo;if(r){var a=n.na;a||(qi(e,"video",r,!1),n.na=i)}}else(a=n.na)&&(n.na=null,qi(e,"video",a,!0))}}function qi(e,t,n,i){var r=e.c[t];!r&&"text"==t&&e.h.ignoreTextStreamFailures?zi(e,n):r&&(r.na&&(n.trickModeVideo?(r.na=n,n=n.trickModeVideo):r.na=null),"text"==t&&_e(e.a.K,et(n.mimeType,n.codecs)),(t=e.g[nt(e.b,n)])&&t.Ka&&(t=e.j[n.id])&&t.Ka&&r.stream!=n&&(r.stream=n,r.cb=!0,i&&(r.sa?r.kb=!0:r.wa?(r.ra=!0,r.kb=!0):(fr(r),dr(e,r,!0)))))}function Xi(e){var t=xi(e.a.Oa);if(!Object.keys(e.c).every(function(e){var n=this.a.K;return"text"==e?(e=n.a,e=t>=e.b&&t<e.a):(e=Pe(n,e),e=Ie(e,t)),e}.bind(e)))for(var n in e.c){var i=e.c[n];i.sa||i.ra||(i.wa?i.ra=!0:null==Oe(e.a.K,n)?null==i.qa&&hr(e,i,0):(fr(i),dr(e,i,!1)))}}function Wi(e,t,n){var i=tt(e.b,xi(e.a.Oa)),r=G(t,function(e){return et(e.mimeType,e.codecs)});return e.a.K.init(r),Zi(e),r=B(t),Qi(e,r).then(function(){if(!this.f)for(var e in t){var r=t[e];this.c[e]||(this.c[e]={stream:r,type:e,Ea:null,ea:null,na:null,cb:!0,Ma:i,endOfStream:!1,wa:!1,qa:null,ra:!1,kb:!1,sa:!1,Eb:!1,rb:!1,pc:n||0},hr(this,this.c[e],0))}}.bind(e))}function $i(e,t){var n=e.g[t];if(n)return n.L;n={L:new C,Ka:!1},e.g[t]=n;var i=e.b.periods[t].variants.map(function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),e.video&&e.video.trickModeVideo&&t.push(e.video.trickModeVideo),t}).reduce(y,[]).filter(T);return i.push.apply(i,e.b.periods[t].textStreams),e.o=e.o.then(function(){if(!this.f)return Qi(this,i)}.bind(e)).then(function(){this.f||(this.g[t].L.resolve(),this.g[t].Ka=!0)}.bind(e)).catch(function(e){this.f||(this.g[t].L.reject(),delete this.g[t],this.a.onError(e))}.bind(e)),n.L}function Qi(e,t){t.map(function(e){return e.id}).filter(T);for(var n=[],i=0;i<t.length;++i){var r=t[i],a=e.j[r.id];a?n.push(a.L):(e.j[r.id]={L:new C,Ka:!1},n.push(r.createSegmentIndex()))}return Promise.all(n).then(function(){if(!this.f)for(var e=0;e<t.length;++e){var n=this.j[t[e].id];n.Ka||(n.L.resolve(),n.Ka=!0)}}.bind(e)).catch(function(e){if(!this.f)return this.j[r.id].L.reject(),delete this.j[r.id],Promise.reject(e)}.bind(e))}function Zi(e){var t=e.b.presentationTimeline.Y();1/0>t?e.a.K.pa(t):e.a.K.pa(Math.pow(2,32))}function er(e,t){var n=xi(e.a.Oa),i=t.Ea&&t.ea?e.b.periods[nt(e.b,t.Ea)].startTime+t.ea.endTime:Math.max(n,t.pc);t.pc=0;var r=nt(e.b,t.stream),a=tt(e.b,i),s=e.a.K,o=t.type;return"text"==o?(s=s.a,s=null==s.a||s.a<n?0:s.a-Math.max(n,s.b)):(s=Pe(s,o),s=Le(s,n)),o=Math.max(e.i*Math.max(e.b.minBufferTime||0,e.h.rebufferingGoal),e.i*e.h.bufferingGoal),i>=e.b.presentationTimeline.Y()?(t.endOfStream=!0,null):(t.endOfStream=!1,t.Ma=a,a!=r?null:s>=o?.5:(i=e.a.K,a=t.type,i="text"==a?i.a.a:Ne(Pe(i,a)),t.ea&&t.stream==t.Ea?(a=t.ea.position+1,i=tr(e,t,r,a)):(a=t.ea?t.stream.findSegmentPosition(Math.max(0,e.b.periods[nt(e.b,t.Ea)].startTime+t.ea.endTime-e.b.periods[r].startTime)):t.stream.findSegmentPosition(Math.max(0,(i||n)-e.b.periods[r].startTime)),null==a?i=null:(s=null,null==i&&(s=tr(e,t,r,Math.max(0,a-1))),i=s||tr(e,t,r,a))),i?(nr(e,t,n,r,i),null):1))}function tr(e,t,n,i){return n=e.b.periods[n],(t=t.stream.getSegmentReference(i))?(e=e.b.presentationTimeline,i=e.ua(),n.startTime+t.endTime<e.ma()||n.startTime+t.startTime>i?null:t):null}function nr(e,t,n,i,r){var a=e.b.periods[i],s=t.stream,o=e.b.periods[i+1],u=null,u=o?o.startTime:e.b.presentationTimeline.Y();i=rr(e,t,i,u),t.wa=!0,t.cb=!1,o=cr(e,r),Promise.all([i,o]).then(function(e){if(!this.f&&!this.l)return ar(this,t,n,a,s,r,e[1])}.bind(e)).then(function(){this.f||this.l||(t.wa=!1,t.Eb=!1,t.ra||this.a.yb(),hr(this,t,0),or(this,s))}.bind(e)).catch(function(e){this.f||this.l||(t.wa=!1,1001==e.code||1002==e.code||1003==e.code?"text"==t.type&&this.h.ignoreTextStreamFailures&&1001==e.code?delete this.c.text:(e.severity=1,this.a.onError(e),hr(this,t,4)):3017==e.code?ir(this,t,e):"text"==t.type&&this.h.ignoreTextStreamFailures?delete this.c.text:(t.rb=!0,e.severity=2,this.a.onError(e)))}.bind(e))}function ir(e,t,n){if(!B(e.c).some(function(e){return e!=t&&e.Eb})){var i=Math.round(100*e.i);if(20<i)e.i-=.2;else{if(!(4<i))return t.rb=!0,e.l=!0,void e.a.onError(n);e.i-=.04}t.Eb=!0}hr(e,t,4)}function rr(e,t,n,i){return t.cb?(n=De(e.a.K,t.type,e.b.periods[n].startTime-t.stream.presentationTimeOffset,i),t.stream.initSegmentReference?(e=cr(e,t.stream.initSegmentReference).then(function(e){if(!this.f)return xe(this.a.K,t.type,e,null,null)}.bind(e)).catch(function(e){return t.cb=!0,Promise.reject(e)}),Promise.all([n,e])):n):Promise.resolve()}function ar(e,t,n,i,r,a,s){return r.containsEmsgBoxes&&(new Ht).ca("emsg",e.Cd.bind(e,i,a)).parse(s),sr(e,t,n).then(function(){if(!this.f)return xe(this.a.K,t.type,s,a.startTime+i.startTime,a.endTime+i.startTime)}.bind(e)).then(function(){if(!this.f)return t.Ea=r,t.ea=a,Promise.resolve()}.bind(e))}function sr(e,t,n){var i=Oe(e.a.K,t.type);return null==i?Promise.resolve():(n=n-i-e.h.bufferBehind,0>=n?Promise.resolve():e.a.K.remove(t.type,i,i+n).then(function(){}.bind(e)))}function or(e,t){if(!e.v&&(e.v=B(e.c).every(function(e){return"text"==e.type||!e.ra&&!e.sa&&e.ea}),e.v)){var n=nt(e.b,t);for(e.g[n]||$i(e,n).then(function(){this.a.Zb()}.bind(e)).catch(E),n=0;n<e.b.periods.length;++n)$i(e,n).catch(E);e.a.ud&&e.a.ud()}}function ur(e,t){if(t.Ma!=nt(e.b,t.stream)){var n=t.Ma,i=B(e.c);i.every(function(e){return e.Ma==n})&&i.every(lr)&&$i(e,n).then(function(){if(!this.f&&i.every(function(e){var t=nt(this.b,e.stream);return lr(e)&&e.Ma==n&&t!=n}.bind(this))){var e,t=this.b.periods[n],r=this.a.$b(t);for(e in this.c)if(!r[e]&&"text"!=e)return void this.a.onError(new u(2,5,5005));for(e in r)if(!this.c[e]){if("text"!=e)return void this.a.onError(new u(2,5,5005));Wi(this,{text:r.text},t.startTime),delete r[e]}for(e in this.c)(t=r[e])?(qi(this,e,t,!1),hr(this,this.c[e],0)):delete this.c[e];this.a.Zb()}}.bind(e)).catch(E)}}function lr(e){return!e.wa&&null==e.qa&&!e.ra&&!e.sa}function cr(e,t){var n=O(t.a(),e.h.retryParameters);if(t.X||null!=t.M){var i="bytes="+t.X+"-";null!=t.M&&(i+=t.M),n.headers.Range=i}return e.a.bd.request(1,n).then(function(e){return e.data})}function dr(e,t,n){t.ra=!1,t.kb=!1,t.sa=!0,Re(e.a.K,t.type).then(function(){if(!this.f&&n){var e=this.a.K,i=t.type;return"text"==i?Promise.resolve():Fe(e,i,e.Mc.bind(e,i))}}.bind(e)).then(function(){this.f||(t.Ea=null,t.ea=null,t.sa=!1,t.endOfStream=!1,hr(this,t,0))}.bind(e))}function hr(t,n,i){n.qa=e.setTimeout(t.ie.bind(t,n),1e3*i)}function fr(t){null!=t.qa&&(e.clearTimeout(t.qa),t.qa=null)}function pr(e,t){return new Promise(function(n,i){var r=new XMLHttpRequest;r.open(t.method,e,!0),r.responseType="arraybuffer",r.timeout=t.retryParameters.timeout,r.withCredentials=t.allowCrossSiteCredentials,r.onload=function(t){t=t.target;var r=t.getAllResponseHeaders().split("\r\n").reduce(function(e,t){var n=t.split(": ");return e[n[0].toLowerCase()]=n.slice(1).join(": "),e},{});if(200<=t.status&&299>=t.status&&202!=t.status)t.responseURL&&(e=t.responseURL),n({uri:e,data:t.response,headers:r,fromCache:!!r["x-shaka-from-cache"]});else{var a=null;try{a=V(t.response)}catch(e){}i(new u(401==t.status||403==t.status?2:1,1,1001,e,t.status,a,r))}},r.onerror=function(){i(new u(1,1,1002,e))},r.ontimeout=function(){i(new u(1,1,1003,e))};for(var a in t.headers)r.setRequestHeader(a,t.headers[a]);r.send(t.body)})}function mr(){this.a=null,this.b=[],this.c={}}function vr(e,t,n){return yr(e,t,"readwrite",function(e){e.put(n)})}function gr(e,t,n){return yr(e,"segment","readwrite",function(e){for(var i=0;i<t.length;i++)e.delete(t[i]).onsuccess=n||function(){}})}function br(e,t){var n=0;return yr(e,t,"readonly",function(e){e.openCursor(null,"prev").onsuccess=function(e){(e=e.target.result)&&(n=e.key+1)}}).then(function(){return n})}function yr(e,t,n,i){var r={transaction:e.a.transaction([t],n),L:new C};return r.transaction.oncomplete=function(){this.b.splice(this.b.indexOf(r),1),r.L.resolve()}.bind(e),r.transaction.onabort=function(e){this.b.splice(this.b.indexOf(r),1),wr(r.transaction,r.L,e)}.bind(e),r.transaction.onerror=function(e){e.preventDefault()}.bind(e),t=r.transaction.objectStore(t),i(t),e.b.push(r),r.L}function Er(t,n,i){var r=e.indexedDB.open("shaka_offline_db",1),a=!1,s=new C;return r.onupgradeneeded=function(e){a=!0,e=e.target.result;for(var t in n)e.createObjectStore(t,{keyPath:n[t]})},r.onsuccess=function(e){i&&!a?(e.target.result.close(),setTimeout(function(){Er(this,n,i-1).then(s.resolve,s.reject)}.bind(this),1e3)):(this.a=e.target.result,s.resolve())}.bind(t),r.onerror=wr.bind(null,r,s),s}function wr(e,t,n){e.error?t.reject(new u(2,9,9001,e.error)):t.reject(new u(2,9,9002)),n.preventDefault()}function Sr(e){var t=Tr(e.periods[0],[],new Tn(null,0)),n=Ve(t,null,null),t=ze(t,null);return n.push.apply(n,t),{offlineUri:"offline:"+e.key,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:void 0==e.expiration?1/0:e.expiration,tracks:n,appMetadata:e.appMetadata}}function Tr(e,t,n){var i=e.streams.filter(function(e){return"text"==e.contentType});return t=Nr(e.streams.filter(function(e){return"audio"==e.contentType}),e.streams.filter(function(e){return"video"==e.contentType}),t),i=i.map(Lr),e.streams.forEach(function(e){e=Ar(e),n.Ga(0,e)}),{startTime:e.startTime,variants:t,textStreams:i}}function Ar(e){return e.segments.map(function(e,t){return new Gt(t,e.startTime,e.endTime,function(){return[e.uri]},0,null)})}function Nr(e,t,n){var i=[];if(!e.length&&!t.length)return i;e.length?t.length||(t=[null]):e=[null];for(var r=0,a=0;a<e.length;a++)for(var s=0;s<t.length;s++)if(Ir(e[a],t[s])){var o=e[a],u=t[s],l=n;o={id:r++,language:o?o.language:"",primary:!!o&&o.primary||!!u&&u.primary,audio:Lr(o),video:Lr(u),bandwidth:0,drmInfos:l,allowedByApplication:!0,allowedByKeySystem:!0},i.push(o)}return i}function Ir(e,t){if(!(e&&t&&e.variantIds&&t.variantIds))return!0;for(var n=0;n<e.variantIds.length;n++)if(t.variantIds.some(function(t){return t==e.variantIds[n]}))return!0;return!1}function Lr(e){if(!e)return null;var t=Ar(e),t=new $t(t);return{id:e.id,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t),initSegmentReference:e.initSegmentUri?new Bt(function(){return[e.initSegmentUri]},0,null):null,presentationTimeOffset:e.presentationTimeOffset,mimeType:e.mimeType,codecs:e.codecs,width:e.width||void 0,height:e.height||void 0,frameRate:e.frameRate||void 0,kind:e.kind,encrypted:e.encrypted,keyId:e.keyId,language:e.language,type:e.contentType,primary:e.primary,trickModeVideo:null,containsEmsgBoxes:!1}}function Cr(){return e.indexedDB?new mr:null}function kr(e,t,n,i){this.b={},this.l=[],this.o=i,this.j=e,this.v=t,this.A=n,this.i=this.a=null,this.f=this.g=this.h=this.c=0}function _r(e,t,n,i,r){e.b[t]=e.b[t]||[],e.b[t].push({uris:n.a(),X:n.X,M:n.M,Pb:i,Fb:r})}function Or(e,t){e.c=0,e.h=0,e.g=0,e.f=0,B(e.b).forEach(function(e){e.forEach(function(e){null!=e.M?this.c+=e.M-e.X+1:this.g+=e.Pb}.bind(this))}.bind(e)),e.a=t,e.a.size=e.c;var n=B(e.b).map(function(e){var t=0,n=function(){return this.o?t>=e.length?Promise.resolve():Pr(this,e[t++]).then(n):Promise.reject(new u(2,9,9002))}.bind(this);return n()}.bind(e));return e.b={},e.i=Promise.all(n).then(function(){return vr(this.j,"manifest",t)}.bind(e)).then(function(){this.l=[]}.bind(e)),e.i}function Pr(e,t){var n=O(t.uris,e.A);(t.X||null!=t.M)&&(n.headers.Range="bytes="+t.X+"-"+(null==t.M?"":t.M));var i;return e.v.request(1,n).then(function(e){return this.a?(i=e.data.byteLength,this.l.push(t.Fb.key),t.Fb.data=e.data,vr(this.j,"segment",t.Fb)):Promise.reject(new u(2,9,9002))}.bind(e)).then(function(){if(!this.a)return Promise.reject(new u(2,9,9002));null==t.M?(this.a.size+=i,this.f+=t.Pb):this.h+=i;var e=(this.h+this.f)/(this.c+this.g),n=Sr(this.a);this.o.progressCallback(n,e)}.bind(e))}function xr(){this.a=-1}function Rr(e){var t=new Tn(null,0);t.pa(e.duration);var n=e.drmInfo?[e.drmInfo]:[];return{presentationTimeline:t,minBufferTime:10,offlineSessionIds:e.sessionIds,periods:e.periods.map(function(e){return Tr(e,n,t)})}}function Dr(e){if(/^offline:([0-9]+)$/.exec(e)){var t={uri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}};return Promise.resolve(t)}if(t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e)){var n=Number(t[1]),i=Cr();return i?i.init(qs).then(function(){return i.get("segment",n)}).then(function(t){return i.m().then(function(){if(!t)throw new u(2,9,9003,n);return{uri:e,data:t.data,headers:{}}})}):Promise.reject(new u(2,9,9e3))}return Promise.reject(new u(2,1,9004,e))}function Fr(){this.a=Promise.resolve(),this.c=this.b=this.f=!1,this.g=new Promise(function(e){this.h=e}.bind(this))}function jr(e){return e.f||(e.a=e.a.then(function(e){return this.b=!0,Promise.resolve(e)}.bind(e),function(e){return this.b=!0,Promise.reject(e)}.bind(e))),e.f=!0,e.a}function Mr(e,t){ht.call(this),this.J=!1,this.f=e,this.A=null,this.l=new R,this.Ob=new it,this.Ya=this.c=this.h=this.a=this.v=this.g=this.Wa=this.ja=this.N=this.j=this.o=null,this.Bc=1e9,this.Va=[],this.ka=!1,this.Za=!0,this.la=this.G=null,this.B={},this.Xa=[],this.P={},this.b=zr(this),this.mb={width:1/0,height:1/0},this.i=Yr(),this.Ua=0,this.ia=this.b.preferredAudioLanguage,this.Ba=this.b.preferredTextLanguage,t&&t(this),this.o=new k(this.be.bind(this)),this.Wa=Ur(this);for(var n=0;n<this.f.textTracks.length;++n){var i=this.f.textTracks[n];i.mode="disabled","Shaka Player TextTrack"==i.label&&(this.A=i)}this.A||(this.A=this.f.addTextTrack("subtitles","Shaka Player TextTrack")),this.A.mode="hidden",D(this.l,this.f,"error",this.wd.bind(this))}function Ur(t){t.N=new MediaSource;var n=new C;return D(t.l,t.N,"sourceopen",n.resolve),t.f.src=e.URL.createObjectURL(t.N),n}function Br(e){if(e.h&&e.h.configure(e.b.manifest),e.j&&e.j.configure(e.b.drm),e.a){e.a.configure(e.b.streaming);try{e.c.periods.forEach(e.fb.bind(e))}catch(t){e.xa(t)}Qr(e,Hi(e.a))}e.b.abr.enabled&&!e.Za?e.b.abr.manager.enable():e.b.abr.manager.disable(),e.b.abr.manager.setDefaultEstimate(e.b.abr.defaultBandwidthEstimate),e.b.abr.manager.setRestrictions(e.b.abr.restrictions)}function Gr(e,t,n){e.i.switchHistory.push({timestamp:Date.now()/1e3,id:t.id,type:t.type,fromAdaptation:n}),Kr(e,t)}function Kr(e,t){var n=nt(e.c,t);e.P[n]||(e.P[n]={}),e.P[n][t.type]=t.id}function Jr(e){e.l&&(e.l.ha(e.N,"sourceopen"),e.l.ha(e.f,"loadeddata"),e.l.ha(e.f,"playing"),e.l.ha(e.f,"pause"),e.l.ha(e.f,"ended")),e.f&&(e.f.removeAttribute("src"),e.f.load());var t=Promise.all([e.b?e.b.abr.manager.stop():null,e.j?e.j.m():null,e.ja?e.ja.m():null,e.g?e.g.m():null,e.v?e.v.m():null,e.a?e.a.m():null,e.h?e.h.stop():null]);return e.j=null,e.ja=null,e.g=null,e.v=null,e.a=null,e.h=null,e.c=null,e.Ya=null,e.Wa=null,e.N=null,e.Xa=[],e.P={},e.B={},e.i=Yr(),t}function Hr(e){return e.h?Jr(e).then(function(){this.J||(this.xc(!1),this.Wa=Ur(this))}.bind(e)):Promise.resolve()}function Vr(){return{".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:null}}}function zr(e){return{drm:{retryParameters:_(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1},manifest:{retryParameters:_(),dash:{customScheme:function(e){if(e)return null},clockSyncUri:"",ignoreDrmInfo:!1},hls:{defaultTimeOffset:0}},streaming:{retryParameters:_(),rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1},abr:{manager:e.Ob,enabled:!0,defaultBandwidthEstimate:5e5,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}}}function Yr(){return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:0,bufferingTime:0,switchHistory:[],stateHistory:[]}}function qr(e,t,n){for(var i in t){var r=t[i],a=n||!1;"text"==i&&(a=!0),e.Za?e.B[i]={stream:r,Ic:a}:qi(e.a,i,r,a)}}function Xr(e){if(e.c){var t=Date.now()/1e3;e.ka?e.i.bufferingTime+=t-e.Ua:e.i.playTime+=t-e.Ua,e.Ua=t}}function Wr(e,t){function n(e,t){if(!e)return null;var n=e.findSegmentPosition(t-r.startTime);return null==n?null:(n=e.getSegmentReference(n))?n.startTime+r.startTime:null}var i=Vi(e.a),r=Hi(e.a),a=n(i.video,t),i=n(i.audio,t);return null!=a&&null!=i?Math.max(a,i):null!=a?a:null!=i?i:t}function $r(e,t,n,i,r){if(!n||1>n.length)return e.xa(new u(2,4,4012)),{};e.b.abr.manager.setVariants(n),e.b.abr.manager.setTextStreams(i);var a=[];if(r&&(a=["video","audio"],t.textStreams.length&&a.push("text")),r=Vi(e.a),t=Qe(r.audio,r.video,t.variants)){t.allowedByApplication&&t.allowedByKeySystem||(a.push("audio"),a.push("video"));for(var s in r)t=r[s],"audio"==t.type&&t.language!=n[0].language?a.push(s):"text"==t.type&&0<i.length&&t.language!=i[0].language&&a.push(s)}if(a=a.filter(T),0<a.length){n={};try{n=e.b.abr.manager.chooseStreams(a)}catch(t){e.xa(t)}return n}return{}}function Qr(e,t){var n,i={audio:!1,text:!1},r=We(t,e.ia,i),a=$e(t,e.Ba,i),r=$r(e,t,r,a);for(n in r)Gr(e,r[n],!0);qr(e,r,!0),Zr(e),r.text&&r.audio&&i.text&&r.text.language!=r.audio.language&&(e.A.mode="showing",ta(e))}function Zr(e){Promise.resolve().then(function(){this.J||this.dispatchEvent(new at("adaptation"))}.bind(e))}function ea(e){Promise.resolve().then(function(){this.J||this.dispatchEvent(new at("trackschanged"))}.bind(e))}function ta(e){e.dispatchEvent(new at("texttrackvisibility"))}function na(e){this.a=Cr(),this.f=e,this.i=aa(this),this.b=null,this.v=!1,this.j=null,this.g=-1,this.l=0,this.c=null,this.h=new kr(this.a,e.o,e.getConfiguration().streaming.retryParameters,this.i)}function ia(){return!!e.indexedDB}function ra(e,t,n,i){function r(){}var a,s,o,u=e.f.o,l=e.f.getConfiguration();return Sn(t,u,l.manifest.retryParameters,i).then(function(e){return ca(this),o=new e,o.configure(l.manifest),o.start(t,{networkingEngine:u,filterPeriod:this.o.bind(this),onTimelineRegionAdded:function(){},onEvent:function(){},onError:n})}.bind(e)).then(function(e){return ca(this),a=e,s=new te(u,n,r,function(){}),s.configure(l.drm),s.init(a,!0)}.bind(e)).then(function(){return ca(this),ua(a)}.bind(e)).then(function(){return ca(this),re(s)}.bind(e)).then(function(){return ca(this),o.stop()}.bind(e)).then(function(){return ca(this),{manifest:a,Jc:s}}.bind(e)).catch(function(e){if(o)return o.stop().then(function(){throw e});throw e})}function aa(e){return{trackSelectionCallback:e.A.bind(e),progressCallback:function(e,t){if(e||t)return null}}}function sa(e){return e.a?e.a.a?Promise.resolve():e.a.init(qs):Promise.reject(new u(2,9,9e3))}function oa(e){var t=e.b?e.b.m():Promise.resolve();return e.b=null,e.c=null,e.v=!1,e.j=null,e.g=-1,t}function ua(e){var t=e.periods.map(function(e){return e.variants}).reduce(y,[]).map(function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t}).reduce(y,[]).filter(T);return e=e.periods.map(function(e){return e.textStreams}).reduce(y,[]),t.push.apply(t,e),Promise.all(t.map(function(e){return e.createSegmentIndex()}))}function la(e,t,n,i,r){for(var a=[],s=e.c.presentationTimeline.ma(),o=s,u=n.findSegmentPosition(s),l=null!=u?n.getSegmentReference(u):null;l;)o=e.a.c.segment++,_r(e.h,n.type,l,(l.endTime-l.startTime)*i/8,{key:o,data:null,manifestKey:e.g,streamNumber:n.id,segmentNumber:o}),a.push({startTime:l.startTime,endTime:l.endTime,uri:"offline:"+e.g+"/"+n.id+"/"+o}),o=l.endTime+t.startTime,l=n.getSegmentReference(++u);return e.l=Math.max(e.l,o-s),t=null,n.initSegmentReference&&(o=e.a.c.segment++,t="offline:"+e.g+"/"+n.id+"/"+o,_r(e.h,n.contentType,n.initSegmentReference,0,{key:o,data:null,manifestKey:e.g,streamNumber:n.id,segmentNumber:-1})),e=[],null!=r&&e.push(r),{id:n.id,primary:n.primary,presentationTimeOffset:n.presentationTimeOffset||0,contentType:n.type,mimeType:n.mimeType,codecs:n.codecs,frameRate:n.frameRate,kind:n.kind,language:n.language,width:n.width||null,height:n.height||null,initSegmentUri:t,encrypted:n.encrypted,keyId:n.keyId,segments:a,variantIds:e}}function ca(e){if(!e.f)throw new u(2,9,9002)}function da(e){Ws.push(e)}function ha(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"==typeof Event)var n=new Event(t,e);else n=document.createEvent("Event"),n.initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(n)}function fa(e){this.f=[],this.b=[],this.a=[],(new Ht).ca("pssh",this.c.bind(this)).parse(e.buffer)}function pa(e,t){try{var n=new ma(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function ma(e,t){this.keySystem=e;for(var n=!1,i=0;i<t.length;++i){var r=t[i],a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label},s=!1;if(r.audioCapabilities)for(var o=0;o<r.audioCapabilities.length;++o){var u=r.audioCapabilities[o];if(u.contentType){s=!0;var l=u.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,l)&&(a.audioCapabilities.push(u),n=!0)}}if(r.videoCapabilities)for(o=0;o<r.videoCapabilities.length;++o)u=r.videoCapabilities[o],u.contentType&&(s=!0,l=u.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,l)&&(a.videoCapabilities.push(u),n=!0));if(s||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==r.persistentState&&(a.persistentState="required",a.sessionTypes=["persistent-license"]),n)return void(this.a=a)}throw r=Error("Unsupported keySystem"),r.name="NotSupportedError",r.code=DOMException.NOT_SUPPORTED_ERR,r}function va(e){var t=this.mediaKeys;return t&&t!=e&&ba(t,null),delete this.mediaKeys,(this.mediaKeys=e)?ba(e,this):Promise.resolve()}function ga(e){this.a=new MSMediaKeys(e),this.b=new R}function ba(e,t){function n(){t.msSetMediaKeys(i.a),t.removeEventListener("loadedmetadata",n)}if(j(e.b),!t)return Promise.resolve();D(e.b,t,"msneedkey",Ea);var i=e;try{return 1<=t.readyState?t.msSetMediaKeys(e.a):t.addEventListener("loadedmetadata",n),Promise.resolve()}catch(e){return Promise.reject(e)}}function ya(e){ht.call(this),this.c=null,this.g=e,this.b=this.a=null,this.f=new R,this.sessionId="",this.expiration=NaN,this.closed=new C,this.keyStatuses=new Ta}function Ea(e){var t=document.createEvent("CustomEvent");if(t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",e=e.initData){var n=new fa(e);if(!(1>=n.a.length)){for(var i=[],r=0;r<n.a.length;r++)i.push(e.subarray(n.a[r].start,n.a[r].end+1));for(r=wa,e=[],n=0;n<i.length;++n){for(var a=!1,s=0;s<e.length&&!(a=r?r(i[n],e[s]):i[n]===e[s]);++s);a||e.push(i[n])}for(r=i=0;r<e.length;r++)i+=e[r].length;for(i=new Uint8Array(i),r=n=0;r<e.length;r++)i.set(e[r],n),n+=e[r].length;e=i}}t.initData=e,this.dispatchEvent(t)}function wa(e,t){return ee(e,t)}function Sa(e,t){e.keyStatuses.Ib(t),e.dispatchEvent(new at("keystatuseschange"))}function Ta(){this.size=0,this.a=void 0}function Aa(){return Promise.reject(Error("The key system specified is not supported."))}function Na(e){return e?Promise.reject(Error("MediaKeys not supported.")):Promise.resolve()}function Ia(){throw new TypeError("Illegal constructor.")}function La(){throw new TypeError("Illegal constructor.")}function Ca(t){Qs=t,Zs=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=_a,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Oa,e.MediaKeys=xa,e.MediaKeySystemAccess=Pa}function ka(e){var t=Qs;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function _a(e,t){try{var n=new Pa(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Oa(e){var t=this.mediaKeys;return t&&t!=e&&Ra(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Ra(e,this),Promise.resolve()}function Pa(e,t){this.a=this.keySystem=e;var n=!0;"org.w3.clearkey"==e&&(this.a="webkit-org.w3.clearkey",n=!1);for(var i=!1,r=document.getElementsByTagName("video"),a=r.length?r[0]:document.createElement("video"),s=0;s<t.length;++s){r=t[s];var o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label},u=!1;if(r.audioCapabilities)for(var l=0;l<r.audioCapabilities.length;++l){var c=r.audioCapabilities[l];if(c.contentType){var u=!0,d=c.contentType.split(";")[0];a.canPlayType(d,this.a)&&(o.audioCapabilities.push(c),i=!0)}}if(r.videoCapabilities)for(l=0;l<r.videoCapabilities.length;++l)c=r.videoCapabilities[l],c.contentType&&(u=!0,a.canPlayType(c.contentType,this.a)&&(o.videoCapabilities.push(c),i=!0));if(u||(i=a.canPlayType("video/mp4",this.a)||a.canPlayType("video/webm",this.a)),"required"==r.persistentState&&(n?(o.persistentState="required",o.sessionTypes=["persistent-license"]):i=!1),i)return void(this.b=o)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),n=Error(n),n.name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function xa(e){this.g=e,this.b=null,this.a=new R,this.c=[],this.f={}}function Ra(e,t){e.b=t,j(e.a);var n=Qs;t&&(D(e.a,t,n+"needkey",e.Ad.bind(e)),D(e.a,t,n+"keymessage",e.zd.bind(e)),D(e.a,t,n+"keyadded",e.xd.bind(e)),D(e.a,t,n+"keyerror",e.yd.bind(e)))}function Da(e,t){var n=e.f[t];return n||((n=e.c.shift())?(n.sessionId=t,e.f[t]=n):null)}function Fa(e,t,n){ht.call(this),this.f=e,this.h=!1,this.a=this.b=null,this.c=t,this.g=n,this.sessionId="",this.expiration=NaN,this.closed=new C,this.keyStatuses=new Ua}function ja(e,t,n){if(e.h)return Promise.reject(Error("The session is already initialized."));e.h=!0;try{if("persistent-license"==e.g)if(n)var i=new Uint8Array(z("LOAD_SESSION|"+n));else{var r=z("PERSISTENT|"),a=new Uint8Array(r.byteLength+t.byteLength);a.set(new Uint8Array(r),0),a.set(new Uint8Array(t),r.byteLength),i=a}else i=new Uint8Array(t)}catch(e){return Promise.reject(e)}e.b=new C;var s=ka("generateKeyRequest");try{e.f[s](e.c,i)}catch(t){if("InvalidStateError"!=t.name)return e.b=null,Promise.reject(t);setTimeout(function(){try{this.f[s](this.c,i)}catch(e){this.b.reject(e),this.b=null}}.bind(e),10)}return e.b}function Ma(e,t){e.keyStatuses.Ib(t),e.dispatchEvent(new at("keystatuseschange"))}function Ua(){this.size=0,this.a=void 0}function Ba(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,arguments);return t.abort=function(){},t}}function Ga(){var e=MediaSource.prototype.endOfStream;MediaSource.prototype.endOfStream=function(){for(var t,n=0,i=0;i<this.sourceBuffers.length;++i)t=this.sourceBuffers[i],t=t.buffered.end(t.buffered.length-1),n=Math.max(n,t);if(!isNaN(this.duration)&&n<this.duration)for(this.Xb=!0,i=0;i<this.sourceBuffers.length;++i)t=this.sourceBuffers[i],t.Rb=!1;return e.apply(this,arguments)};var t=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var e=t.apply(this,arguments);return e.N=this,e.addEventListener("updateend",Ka,!1),this.a||(this.addEventListener("sourceclose",Ja,!1),this.a=!0),e}}function Ka(e){var t=e.target,n=t.N;if(n.Xb){for(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.Rb=!0,e=0;e<n.sourceBuffers.length;++e)if(0==n.sourceBuffers[e].Rb)return;n.Xb=!1}}function Ja(e){e=e.target;for(var t=0;t<e.sourceBuffers.length;++t)e.sourceBuffers[t].removeEventListener("updateend",Ka,!1);e.removeEventListener("sourceclose",Ja,!1)}function Ha(e){if(this.c=[],this.b=[],this.za=eo,e)try{e(this.fa.bind(this),this.a.bind(this))}catch(e){this.a(e)}}function Va(e){var t=new Ha;return t.fa(void 0),t.then(function(){return e})}function za(e){var t=new Ha;return t.a(e),t}function Ya(e){function t(e,t,n){e.za==eo&&(r[t]=n,++i==r.length&&e.fa(r))}var n=new Ha;if(!e.length)return n.fa([]),n;for(var i=0,r=Array(e.length),a=n.a.bind(n),s=0;s<e.length;++s)e[s]&&e[s].then?e[s].then(t.bind(null,n,s),a):t(n,s,e[s]);return n}function qa(e){for(var t=new Ha,n=t.fa.bind(t),i=t.a.bind(t),r=0;r<e.length;++r)e[r]&&e[r].then?e[r].then(n,i):n(e[r]);return t}function Xa(e,t,n){no.push(function(){if(n&&"function"==typeof n){try{var e=n(this.jb)}catch(e){return void t.a(e)}try{var i=e&&e.then}catch(e){return void t.a(e)}e instanceof Ha?e==t?t.a(new TypeError("Chaining cycle detected")):e.then(t.fa.bind(t),t.a.bind(t)):i?Wa(e,i,t):t.fa(e)}else 1==this.za?t.fa(this.jb):t.a(this.jb)}.bind(e)),null==to&&(to=Qa($a))}function Wa(e,t,n){try{var i=!1;t.call(e,function(e){if(!i){i=!0;try{var t=e&&e.then}catch(e){return void n.a(e)}t?Wa(e,t,n):n.fa(e)}},n.a.bind(n))}catch(e){n.a(e)}}function $a(){for(;no.length;){null!=to&&(Za(to),to=null);var e=no;no=[];for(var t=0;t<e.length;++t)e[t]()}}function Qa(){return 0}function Za(){}function es(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function ts(t,n,i){return new e.TextTrackCue(t,n,i)}function ns(t,n,i){return new e.TextTrackCue(t+"-"+n+"-"+i,t,n,i)}var is,rs=this;rs.ue=!0,s.prototype.setDefaultEstimate=function(e){this.b=e},s.prototype.getBandwidthEstimate=function(){return 128e3>this.a?this.b:Math.min(a(this.c),a(this.f))},t("shaka.util.Error",u),u.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},u.Severity={RECOVERABLE:1,CRITICAL:2},u.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},u.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,LOAD_INTERRUPTED:7e3,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007};var as=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;is=l.prototype,is.$="",is.Aa="",is.ba="",is.Ia=null,is.W="",is.ta="",is.toString=function(){var e=[],t=this.$;if(t&&e.push(p(t,ss,!0),":"),t=this.ba){e.push("//");var n=this.Aa;n&&e.push(p(n,ss,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Ia,null!=t&&e.push(":",String(t))}return(t=this.W)&&(this.ba&&"/"!=t.charAt(0)&&e.push("/"),e.push(p(t,"/"==t.charAt(0)?us:os,!0))),(t=this.a.toString())&&e.push("?",t),(t=this.ta)&&e.push("#",p(t,cs)),e.join("")},is.resolve=function(e){var t=new l(this);"data"===t.$&&(t=new l);var n=!!e.$;n?c(t,e.$):n=!!e.Aa,n?t.Aa=e.Aa:n=!!e.ba,n?t.ba=e.ba:n=null!=e.Ia;var i=e.W;if(n)d(t,e.Ia);else if(n=!!e.W){if("/"!=i.charAt(0))if(this.ba&&!this.W)i="/"+i;else{var r=t.W.lastIndexOf("/");-1!=r&&(i=t.W.substr(0,r+1)+i)}if(".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){for(var r=!i.lastIndexOf("/",0),i=i.split("/"),a=[],s=0;s<i.length;){var o=i[s++];"."==o?r&&s==i.length&&a.push(""):".."==o?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&s==i.length&&a.push("")):(a.push(o),r=!0)}i=a.join("/")}}return n?t.W=i:n=""!==e.a.toString(),n?h(t,g(e.a)):n=!!e.ta,n&&(t.ta=e.ta),t};var ss=/[#\/\?@]/g,os=/[\#\?:]/g,us=/[\#\?]/g,ls=/[\#\?@]/g,cs=/#/g;v.prototype.a=null,v.prototype.c=null,v.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";var e,t=[];for(e in this.a)for(var n=encodeURIComponent(e),i=this.a[e],r=0;r<i.length;r++){var a=n;""!==i[r]&&(a+="="+encodeURIComponent(i[r])),t.push(a)}return this.b=t.join("&")},t("shaka.net.NetworkingEngine",k),k.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3};var ds={};k.registerScheme=function(e,t){ds[e]=t},k.unregisterScheme=function(e){delete ds[e]},k.prototype.Jd=function(e){this.b.push(e)},k.prototype.registerRequestFilter=k.prototype.Jd,k.prototype.me=function(e){var t=this.b;0<=(e=t.indexOf(e))&&t.splice(e,1)},k.prototype.unregisterRequestFilter=k.prototype.me,k.prototype.Gc=function(){this.b=[]},k.prototype.clearAllRequestFilters=k.prototype.Gc,k.prototype.Kd=function(e){this.c.push(e)},k.prototype.registerResponseFilter=k.prototype.Kd,k.prototype.ne=function(e){var t=this.c;0<=(e=t.indexOf(e))&&t.splice(e,1)},k.prototype.unregisterResponseFilter=k.prototype.ne,k.prototype.Hc=function(){this.c=[]},k.prototype.clearAllResponseFilters=k.prototype.Hc,k.prototype.m=function(){this.f=!0,this.b=[],this.c=[];for(var e=[],t=0;t<this.a.length;++t)e.push(this.a[t].catch(E));return Promise.all(e)},k.prototype.destroy=k.prototype.m,k.prototype.request=function(t,n){if(this.f)return Promise.reject();n.method=n.method||"GET",n.headers=n.headers||{},n.retryParameters=n.retryParameters?L(n.retryParameters):_(),n.uris=L(n.uris);var i=Date.now(),r=Promise.resolve();return this.b.forEach(function(e){r=r.then(e.bind(null,t,n))}),r=r.catch(function(e){throw new u(2,1,1006,e)}),r=r.then(function(){for(var r=Date.now()-i,a=n.retryParameters||{},s=a.maxAttempts||1,o=a.backoffFactor||2,a=null==a.baseDelay?1e3:a.baseDelay,u=this.g(t,n,0,r),l=1;l<s;l++)u=u.catch(function(i,a,s){if(s&&1==s.severity){s=new C;var o=n.retryParameters||{};return e.setTimeout(s.resolve,i*(1+(2*Math.random()-1)*(null==o.fuzzFactor?.5:o.fuzzFactor))),s.then(this.g.bind(this,t,n,a,r))}throw s}.bind(this,a,l%n.uris.length)),a*=o;return u}.bind(this)),this.a.push(r),r.then(function(e){return 0<=this.a.indexOf(r)&&this.a.splice(this.a.indexOf(r),1),this.h&&!e.fromCache&&1==t&&this.h(e.timeMs,e.data.byteLength),e}.bind(this)).catch(function(e){return e&&(e.severity=2),0<=this.a.indexOf(r)&&this.a.splice(this.a.indexOf(r),1),Promise.reject(e)}.bind(this))},k.prototype.request=k.prototype.request,k.prototype.g=function(e,t,n,i){if(this.f)return Promise.reject();var r=new l(t.uris[n]),a=r.$;if(a||(a=location.protocol,a=a.slice(0,-1),c(r,a),t.uris[n]=r.toString()),!(a=ds[a]))return Promise.reject(new u(2,1,1e3,r));var s=Date.now();return a(t.uris[n],t,e).then(function(t){void 0==t.timeMs&&(t.timeMs=Date.now()-s);var n=Date.now(),r=Promise.resolve();return this.c.forEach(function(n){r=r.then(function(){return Promise.resolve(n(e,t))}.bind(this))}),r=r.catch(function(e){var t=2;throw e instanceof u&&(t=e.severity),new u(t,1,1007,e)}),r.then(function(){return t.timeMs+=Date.now()-n,t.timeMs+=i,t})}.bind(this))},x.prototype.push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},x.prototype.get=function(e){return(e=this.a[e])?e.slice():null},x.prototype.remove=function(e,t){var n=this.a[e];if(n)for(var i=0;i<n.length;++i)n[i]==t&&(n.splice(i,1),--i)},R.prototype.m=function(){return j(this),this.a=null,Promise.resolve()},R.prototype.ha=function(e,t){if(this.a)for(var n=this.a.get(t)||[],i=0;i<n.length;++i){var r=n[i];r.target==e&&(r.ha(),this.a.remove(t,r))}},M.prototype.ha=function(){this.target.removeEventListener(this.type,this.a,!1),this.a=this.target=null},t("shaka.util.StringUtils.fromUTF8",J),t("shaka.util.StringUtils.fromUTF16",H),t("shaka.util.StringUtils.fromBytesAutoDetect",V),t("shaka.util.StringUtils.toUTF8",z),q.prototype.cancel=function(){null!=this.a&&(clearTimeout(this.a),this.a=null)},t("shaka.util.Uint8ArrayUtils.toBase64",W),t("shaka.util.Uint8ArrayUtils.fromBase64",$),t("shaka.util.Uint8ArrayUtils.fromHex",Q),t("shaka.util.Uint8ArrayUtils.toHex",Z),t("shaka.util.Uint8ArrayUtils.equal",ee),t("shaka.util.Uint8ArrayUtils.concat",function(e){for(var t=0,n=0;n<arguments.length;++n)t+=arguments[n].length;for(var t=new Uint8Array(t),i=0,n=0;n<arguments.length;++n)t.set(arguments[n],i),i+=arguments[n].length;return t}),is=te.prototype,is.m=function(){this.c=!0;var e=this.a.map(function(e){return(e.aa.close()||Promise.resolve()).catch(E)});return this.l.reject(),this.f&&e.push(this.f.m()),this.j&&e.push(this.j.setMediaKeys(null).catch(E)),this.P&&(clearInterval(this.P),this.P=null),this.B&&this.B.cancel(),this.f=this.j=this.i=this.v=this.b=this.B=null,this.a=[],this.o=[],this.la=this.g=this.h=this.ka=null,Promise.all(e)},is.configure=function(e){this.h=e},is.init=function(e,t){var n={},i=[];return this.ja=t,this.o=e.offlineSessionIds,se(this,e,t||0<e.offlineSessionIds.length,n,i),i.length?oe(this,n,i):(this.J=!0,Promise.resolve())},is.keySystem=function(){return this.b?this.b.keySystem:""},is.ab=function(){var e=this.a.map(function(e){return e=e.aa.expiration,isNaN(e)?1/0:e});return Math.min.apply(Math,e)},is.dd=function(e){for(var t=new Uint8Array(e.initData),n=0;n<this.a.length;++n)if(ee(t,this.a[n].initData))return;fe(this,e.initDataType,t)},is.ic=function(e){this.h.delayLicenseRequestUntilPlayed&&this.j.paused&&!this.ia?this.G.push(e):pe(this,e)},is.cc=function(e){e=e.target;var t;for(t=0;t<this.a.length&&this.a[t].aa!=e;++t);if(t!=this.a.length){var n=!1;e.keyStatuses.forEach(function(e,i){if("string"==typeof i){var r=i;i=e,e=r}if("com.microsoft.playready"==this.b.keySystem&&16==i.byteLength){var r=new DataView(i),a=r.getUint32(0,!0),s=r.getUint16(4,!0),o=r.getUint16(6,!0);r.setUint32(0,a,!1),r.setUint16(4,s,!1),r.setUint16(6,o,!1)}"com.microsoft.playready"==this.b.keySystem&&"status-pending"==e&&(e="usable"),"status-pending"!=e&&(this.a[t].loaded=!0,this.a.every(function(e){return e.loaded})&&this.l.resolve()),"expired"==e&&(n=!0),r=Z(new Uint8Array(i)),this.A[r]=e}.bind(this));var i=e.expiration-Date.now();(0>i||n&&1e3>i)&&!this.a[t].ib&&(this.a.splice(t,1),e.close()),X(this.B)}},is.Id=function(){function e(e,t){return"expired"==t}!U(this.A)&&K(this.A,e)&&this.g(new u(2,6,6014)),this.Ba(this.A)},is.od=function(){for(var e=0;e<this.G.length;e++)pe(this,this.G[e]);this.ia=!0,this.G=[]},is.Hd=function(){this.a.forEach(function(e){var t=e.xb,n=e.aa.expiration;isNaN(n)&&(n=1/0),n!=t&&(this.la(e.aa.sessionId,n),e.xb=n)}.bind(this))};var hs={};t("shaka.media.TextEngine.registerParser",Ee),t("shaka.media.TextEngine.unregisterParser",function(e){delete hs[e]}),t("shaka.media.TextEngine.makeCue",we),ye.prototype.m=function(){return this.c&&Te(this,function(){return!0}),this.c=this.f=null,Promise.resolve()},ye.prototype.remove=function(e,t){return Promise.resolve().then(function(){this.c&&(Te(this,function(n){return!(n.startTime>=t||n.endTime<=e)}),null==this.b||t<=this.b||e>=this.a||(e<=this.b&&t>=this.a?this.b=this.a=null:e<=this.b&&t<this.a?this.b=t:e>this.b&&t>=this.a&&(this.a=e)))}.bind(this))},Ae.prototype.parseInit=function(e){this.Na(e,0,null,null)},Ae.prototype.parseMedia=function(e,t){return this.Na(e,t.periodStart,t.segmentStart,t.segmentEnd)},is=Ce.prototype,is.m=function(){this.h=!0;var e,t=[];for(e in this.b){var n=this.b[e],i=n[0];for(this.b[e]=n.slice(0,1),i&&t.push(i.p.catch(E)),i=1;i<n.length;++i)n[i].p.catch(E),n[i].p.reject()}return this.a&&t.push(this.a.m()),Promise.all(t).then(function(){this.g.m(),this.a=this.i=this.N=this.f=this.g=null,this.c={},this.b={}}.bind(this))},is.init=function(e){for(var t in e){var n=e[t];"text"==t?_e(this,n):(n=this.N.addSourceBuffer(n),D(this.g,n,"error",this.he.bind(this,t)),D(this.g,n,"updateend",this.Ha.bind(this,t)),this.c[t]=n,this.b[t]=[])}},is.remove=function(e,t,n){return"text"==e?this.a.remove(t,n):Fe(this,e,this.oc.bind(this,e,t,n))},is.endOfStream=function(e){return je(this,function(){e?this.N.endOfStream(e):this.N.endOfStream()}.bind(this))},is.pa=function(e){return je(this,function(){this.N.duration=e}.bind(this))},is.Y=function(){return this.N.duration},is.ge=function(e,t){this.c[e].appendBuffer(t)},is.oc=function(e,t,n){n<=t?this.Ha(e):this.c[e].remove(t,n)},is.Cc=function(e){var t=this.c[e].appendWindowEnd;this.c[e].abort(),this.c[e].appendWindowEnd=t,this.Ha(e)},is.Mc=function(e){this.f.currentTime-=.001,this.Ha(e)},is.Xd=function(e,t){this.c[e].timestampOffset=t,this.Ha(e)},is.Vd=function(e,t){this.c[e].appendWindowEnd=t+.04,this.Ha(e)},is.he=function(e){this.b[e][0].p.reject(new u(2,3,3014,this.f.error?this.f.error.code:0))},is.Ha=function(e){var t=this.b[e][0];t&&(t.p.resolve(),Me(this,e))};var fs=1,ps=2,ms={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};t("shaka.abr.SimpleAbrManager",it),it.prototype.stop=function(){this.f=null,this.b=!1,this.h=[],this.g=[],this.c=null},it.prototype.stop=it.prototype.stop,it.prototype.init=function(e){this.f=e},it.prototype.init=it.prototype.init,it.prototype.chooseStreams=function(e){var t={};if(-1<e.indexOf("audio")||-1<e.indexOf("video")){var n=this.h,i=rt(this.i,n),r=this.a.getBandwidthEstimate();if(n.length&&!i.length)throw new u(2,4,4012);for(var n=i[0],a=0;a<i.length;++a){var s=i[a],o=(i[a+1]||{bandwidth:1/0}).bandwidth/.85;r>=s.bandwidth/.95&&r<=o&&(n=s)}(i=n)&&i.video&&(t.video=i.video),i&&i.audio&&(t.audio=i.audio)}return-1<e.indexOf("text")&&(t.text=this.g[0]),this.c=Date.now(),t},it.prototype.chooseStreams=it.prototype.chooseStreams,it.prototype.enable=function(){this.b=!0},it.prototype.enable=it.prototype.enable,it.prototype.disable=function(){this.b=!1},it.prototype.disable=it.prototype.disable,it.prototype.segmentDownloaded=function(e,t){var n=this.a;if(!(16e3>t)){var i=8e3*t/e,a=e/1e3;n.a+=t,r(n.c,a,i),r(n.f,a,i)}if(null!=this.c&&this.b)e:{if(this.j){if(8e3>Date.now()-this.c)break e}else{if(!(128e3<=this.a.a))break e;this.j=!0}n=this.chooseStreams(["audio","video"]),this.a.getBandwidthEstimate(),this.f(n)}},it.prototype.segmentDownloaded=it.prototype.segmentDownloaded,it.prototype.getBandwidthEstimate=function(){return this.a.getBandwidthEstimate()},it.prototype.getBandwidthEstimate=it.prototype.getBandwidthEstimate,it.prototype.setDefaultEstimate=function(e){this.a.setDefaultEstimate(e)},it.prototype.setDefaultEstimate=it.prototype.setDefaultEstimate,it.prototype.setRestrictions=function(e){this.i=e},it.prototype.setRestrictions=it.prototype.setRestrictions,it.prototype.setVariants=function(e){this.h=e},it.prototype.setVariants=it.prototype.setVariants,it.prototype.setTextStreams=function(e){this.g=e},it.prototype.setTextStreams=it.prototype.setTextStreams,at.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},at.prototype.stopImmediatePropagation=function(){this.a=!0},at.prototype.stopPropagation=function(){};var vs="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),gs="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),bs=["loop","playbackRate"],ys=["pause","play"],Es="adaptation buffering emsg error loading unloading texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged".split(" "),ws="drmInfo getAudioLanguages getConfiguration getExpiration getManifestUri getPlaybackRate getPlayheadTimeAsDate getTextLanguages getTextTracks getTracks getStats getVariantTracks isBuffering isInProgress isLive isTextTrackVisible keySystem seekRange".split(" "),Ss=[["getConfiguration","configure"]],Ts=[["isTextTrackVisible","setTextTrackVisibility"]],As="addTextTrack cancelTrickPlay configure resetConfiguration selectAudioLanguage selectTextLanguage selectTextTrack selectTrack selectVariantTrack setTextTrackVisibility trickPlay".split(" "),Ns=["load","unload"];is=lt.prototype,is.m=function(){return ct(this),this.a&&(this.a.leave(function(){},function(){}),this.a=null),this.G=this.B=this.l=null,this.c=this.j=this.h=!1,this.g=this.f=this.b=this.i=null,Promise.resolve()},is.V=function(){return this.c},is.Db=function(){return this.A},is.init=function(){if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){delete e.__onGCastApiAvailable,this.h=!0,this.l();var t=new chrome.cast.SessionRequest(this.J),t=new chrome.cast.ApiConfig(t,this.ed.bind(this),this.qd.bind(this),"origin_scoped");chrome.cast.initialize(t,function(){},function(){})}else e.__onGCastApiAvailable=function(e){e&&this.init()}.bind(this)},is.Gb=function(e){this.i=e,this.c&&dt(this,{type:"appData",appData:this.i})},is.cast=function(e){return this.h?this.j?this.c?Promise.reject(new u(1,8,8002)):(this.g=new C,chrome.cast.requestSession(this.zb.bind(this,e),this.ac.bind(this)),this.g):Promise.reject(new u(1,8,8001)):Promise.reject(new u(1,8,8e3))},is.$a=function(){this.c&&(ct(this),this.a&&(this.a.stop(function(){},function(){}),this.a=null))},is.get=function(e,t){if("video"==e){if(0<=ys.indexOf(t))return this.nc.bind(this,e,t)}else if("player"==e){if(0<=As.indexOf(t))return this.nc.bind(this,e,t);if(0<=Ns.indexOf(t))return this.Md.bind(this,e,t);if(0<=ws.indexOf(t))return this.jc.bind(this,e,t)}return this.jc(e,t)},is.set=function(e,t,n){this.b[e][t]=n,dt(this,{type:"set",targetName:e,property:t,value:n})},is.zb=function(e,t){this.a=t,this.a.addUpdateListener(this.bc.bind(this)),this.a.addMessageListener("urn:x-cast:com.google.shaka.v2",this.kd.bind(this)),this.bc(),dt(this,{type:"init",initState:e,appData:this.i}),this.g.resolve()},is.ac=function(e){var t=8003;switch(e.code){case"cancel":t=8004;break;case"timeout":t=8005;break;case"receiver_unavailable":t=8006}this.g.reject(new u(2,8,t,e))},is.jc=function(e,t){return this.b[e][t]},is.nc=function(e,t){dt(this,{type:"call",targetName:e,methodName:t,args:Array.prototype.slice.call(arguments,2)})},is.Md=function(e,t){var n=Array.prototype.slice.call(arguments,2),i=new C,r=this.o.toString();return this.o++,this.f[r]=i,dt(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:r}),i},is.ed=function(e){var t=this.v();this.g=new C,this.zb(t,e)},is.qd=function(e){this.j="available"==e,this.l()},is.bc=function(){var e=!!this.a&&"connected"==this.a.status;if(this.c&&!e){this.G();for(var t in this.b)this.b[t]={};ct(this)}this.A=(this.c=e)?this.a.receiver.friendlyName:"",this.l()},is.kd=function(e,t){var n=ot(t);switch(n.type){case"event":var i=n.targetName,r=n.event;this.B(i,new at(r.type,r));break;case"update":r=n.update;for(i in r){var n=this.b[i]||{};for(a in r[i])n[a]=r[i][a]}break;case"asyncComplete":i=n.id;var a=n.error;if(n=this.f[i],delete this.f[i],n)if(a){i=new u(a.severity,a.category,a.code);for(r in a)i[r]=a[r];n.reject(i)}else n.resolve()}},ht.prototype.addEventListener=function(e,t){this.lb.push(e,t)},ht.prototype.removeEventListener=function(e,t){this.lb.remove(e,t)},ht.prototype.dispatchEvent=function(e){for(var t=this.lb.get(e.type)||[],n=0;n<t.length;++n){e.target=this.Ta,e.currentTarget=this.Ta;var i=t[n];try{i.handleEvent?i.handleEvent(e):i.call(this,e)}catch(e){}if(e.a)break}return e.defaultPrevented},n(ft),t("shaka.cast.CastProxy",ft),ft.prototype.m=function(e){return e&&this.a&&this.a.$a(),e=[this.h?this.h.m():null,this.b?this.b.m():null,this.a?this.a.m():null],this.a=this.h=this.i=this.j=this.b=this.c=null,Promise.all(e)},ft.prototype.destroy=ft.prototype.m,ft.prototype.Xc=function(){return this.j},ft.prototype.getVideo=ft.prototype.Xc,ft.prototype.Rc=function(){return this.i},ft.prototype.getPlayer=ft.prototype.Rc,ft.prototype.Dc=function(){return!!this.a&&(this.a.h&&this.a.j)},ft.prototype.canCast=ft.prototype.Dc,ft.prototype.V=function(){return!!this.a&&this.a.V()},ft.prototype.isCasting=ft.prototype.V,ft.prototype.Db=function(){return this.a?this.a.Db():""},ft.prototype.receiverName=ft.prototype.Db,ft.prototype.cast=function(){var e=this.Tb();return this.a.cast(e).then(function(){return this.b.hb()}.bind(this))},ft.prototype.cast=ft.prototype.cast,ft.prototype.Gb=function(e){this.a.Gb(e)},ft.prototype.setAppData=ft.prototype.Gb,ft.prototype.ke=function(){var e=this.a;if(e.c){var t=e.v();chrome.cast.requestSession(e.zb.bind(e,t),e.ac.bind(e))}},ft.prototype.suggestDisconnect=ft.prototype.ke,ft.prototype.$a=function(){this.a.$a()},ft.prototype.forceDisconnect=ft.prototype.$a,is=ft.prototype,is.Tb=function(){var e={video:{},player:{},playerAfterLoad:{},manifest:this.b.Ya,startTime:null};return this.c.pause(),bs.forEach(function(t){e.video[t]=this.c[t]}.bind(this)),this.c.ended||(e.startTime=this.c.currentTime),Ss.forEach(function(t){var n=t[1];t=this.b[t[0]](),e.player[n]=t}.bind(this)),Ts.forEach(function(t){var n=t[1];t=this.b[t[0]](),e.playerAfterLoad[n]=t}.bind(this)),e},is.ce=function(){this.dispatchEvent(new at("caststatuschanged"))},is.ee=function(){Ss.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(this));var e=this.a.get("player","getManifestUri")(),t=this.a.get("video","ended"),n=Promise.resolve(),i=this.c.autoplay,r=null;t||(r=this.a.get("video","currentTime")),e&&(this.c.autoplay=!1,n=this.b.load(e,r),n.catch(function(e){this.b.dispatchEvent(new at("error",{detail:e}))}.bind(this)));var a={};bs.forEach(function(e){a[e]=this.a.get("video",e)}.bind(this)),n.then(function(){bs.forEach(function(e){this.c[e]=a[e]}.bind(this)),Ts.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(this)),this.c.autoplay=i,e&&this.c.play()}.bind(this))},is.qe=function(e){if("addEventListener"==e)return this.g.addEventListener.bind(this.g);if("removeEventListener"==e)return this.g.removeEventListener.bind(this.g);if(this.a.V()&&!Object.keys(this.a.b.video).length){var t=this.c[e];if("function"!=typeof t)return t}return this.a.V()?this.a.get("video",e):(t=this.c[e],"function"==typeof t&&(t=t.bind(this.c)),t)},is.se=function(e,t){this.a.V()?this.a.set("video",e,t):this.c[e]=t},is.re=function(e){this.a.V()||this.g.dispatchEvent(new at(e.type,e))},is.Fd=function(e){return"addEventListener"==e?this.f.addEventListener.bind(this.f):"removeEventListener"==e?this.f.removeEventListener.bind(this.f):"getNetworkingEngine"==e?this.b.Ub.bind(this.b):this.a.V()&&!Object.keys(this.a.b.video).length&&0<=ws.indexOf(e)||!this.a.V()?(e=this.b[e],e.bind(this.b)):this.a.get("player",e)},is.Gd=function(e){this.a.V()||this.f.dispatchEvent(e)},is.de=function(e,t){this.a.V()&&("video"==e?this.g.dispatchEvent(t):"player"==e&&this.f.dispatchEvent(t))},n(mt),t("shaka.cast.CastReceiver",mt),mt.prototype.isConnected=function(){return this.i},mt.prototype.isConnected=mt.prototype.isConnected,mt.prototype.Zc=function(){return this.f},mt.prototype.isIdle=mt.prototype.Zc,mt.prototype.m=function(){var t=this.b?this.b.m():Promise.resolve();return null!=this.h&&e.clearTimeout(this.h),this.l=this.j=this.b=this.a=null,this.i=!1,this.f=!0,this.h=this.g=this.c=null,t.then(function(){cast.receiver.CastReceiverManager.getInstance().stop()})},mt.prototype.destroy=mt.prototype.m,is=mt.prototype,is.hc=function(){this.i=!!cast.receiver.CastReceiverManager.getInstance().getSenders().length,gt(this)},is.kc=function(e,t){this.Ab(),yt(this,{type:"event",targetName:e,event:t},this.c)},is.Ab=function(){null!=this.h&&e.clearTimeout(this.h),this.h=e.setTimeout(this.Ab.bind(this),500);var t={video:{},player:{}};gs.forEach(function(e){t.video[e]=this.a[e]}.bind(this)),ws.forEach(function(e){t.player[e]=this.b[e]()}.bind(this));var n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();n&&(t.video.volume=n.level,t.video.muted=n.muted),yt(this,{type:"update",update:t},this.c)},is.Kc=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&yt(this,{type:"update",update:{video:{volume:e.level,muted:e.muted}}},this.c),yt(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.c)},is.td=function(e){var t=ot(e.data);switch(t.type){case"init":bt(this,t.initState,t.appData),this.Ab();break;case"appData":this.l(t.appData);break;case"set":var n=t.targetName,i=t.property,r=t.value;if("video"==n){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==i){t.setSystemVolumeLevel(r);break}if("muted"==i){t.setSystemVolumeMuted(r);break}}this.j[n][i]=r;break;case"call":n=t.targetName,i=t.methodName,r=t.args,n=this.j[n],n[i].apply(n,r);break;case"asyncCall":n=t.targetName,i=t.methodName,r=t.args,t=t.id,e=e.senderId,n=this.j[n],n[i].apply(n,r).then(this.tc.bind(this,e,t,null),this.tc.bind(this,e,t))}},is.fd=function(e){var t=ot(e.data);switch(t.type){case"PLAY":this.a.play(),Et(this,0);break;case"PAUSE":this.a.pause(),Et(this,0);break;case"SEEK":e=t.currentTime;var n=t.resumeState;null!=e&&(this.a.currentTime=Number(e)),n&&"PLAYBACK_START"==n?(this.a.play(),Et(this,0)):n&&"PLAYBACK_PAUSE"==n&&(this.a.pause(),Et(this,0));break;case"STOP":this.b.hb().then(function(){Et(this,0)}.bind(this));break;case"GET_STATUS":Et(this,Number(t.requestId));break;case"VOLUME":n=t.volume,e=n.level;var n=n.muted,i=this.a.volume,r=this.a.muted;null!=e&&(this.a.volume=Number(e)),null!=n&&(this.a.muted=n),i==this.a.volume&&r==this.a.muted||Et(this,0);break;case"LOAD":n=t.media.contentId,e=t.currentTime;var a=this.o(n);this.a.autoplay=!0,this.b.load(a,e).then(function(){Et(this,0,{contentId:a,streamType:this.b.da()?"LIVE":"BUFFERED",contentType:""})}.bind(this)).catch(function(e){var n="LOAD_FAILED";7==e.category&&7e3==e.code&&(n="LOAD_CANCELLED"),yt(this,{requestId:Number(t.requestId),type:n},this.g)}.bind(this));break;default:yt(this,{requestId:Number(t.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.g)}},is.tc=function(e,t,n){yt(this,{type:"asyncComplete",id:t,error:n},this.c,e)};var Is={IDLE:"IDLE",Ac:"PLAYING",yc:"BUFFERING",zc:"PAUSED"},Ls={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};t("shaka.media.InitSegmentReference",Bt),t("shaka.media.SegmentReference",Gt),t("shaka.util.DataViewReader",Kt);var Cs=1;Kt.Endianness={te:0,ve:Cs},Kt.prototype.Z=function(){return this.u<this.H.byteLength},Kt.prototype.hasMoreData=Kt.prototype.Z,Kt.prototype.Tc=function(){return this.u},Kt.prototype.getPosition=Kt.prototype.Tc,Kt.prototype.Oc=function(){return this.H.byteLength},Kt.prototype.getLength=Kt.prototype.Oc,Kt.prototype.Cb=function(){try{var e=this.H.getUint8(this.u)}catch(e){Jt()}return this.u+=1,e},Kt.prototype.readUint8=Kt.prototype.Cb,Kt.prototype.mc=function(){try{var e=this.H.getUint16(this.u,this.a)}catch(e){Jt()}return this.u+=2,e},Kt.prototype.readUint16=Kt.prototype.mc,Kt.prototype.D=function(){try{var e=this.H.getUint32(this.u,this.a)}catch(e){Jt()}return this.u+=4,e},Kt.prototype.readUint32=Kt.prototype.D,Kt.prototype.lc=function(){try{var e=this.H.getInt32(this.u,this.a)}catch(e){Jt()}return this.u+=4,e},Kt.prototype.readInt32=Kt.prototype.lc,Kt.prototype.Pa=function(){try{if(this.a)var e=this.H.getUint32(this.u,!0),t=this.H.getUint32(this.u+4,!0);else t=this.H.getUint32(this.u,!1),e=this.H.getUint32(this.u+4,!1)}catch(e){Jt()}if(2097151<t)throw new u(2,3,3001);return this.u+=8,t*Math.pow(2,32)+e},Kt.prototype.readUint64=Kt.prototype.Pa,Kt.prototype.Ja=function(e){this.u+e>this.H.byteLength&&Jt();var t=this.H.buffer.slice(this.u,this.u+e);return this.u+=e,new Uint8Array(t)},Kt.prototype.readBytes=Kt.prototype.Ja,Kt.prototype.I=function(e){this.u+e>this.H.byteLength&&Jt(),this.u+=e},Kt.prototype.skip=Kt.prototype.I,Kt.prototype.Bb=function(){for(var e=this.u;this.Z()&&this.H.getUint8(this.u);)this.u+=1;return e=this.H.buffer.slice(e,this.u),this.u+=1,J(e)},Kt.prototype.readTerminatedString=Kt.prototype.Bb,t("shaka.util.Mp4Parser",Ht),Ht.prototype.C=function(e,t){var n=qt(e);return this.b[n]=0,this.a[n]=t,this},Ht.prototype.box=Ht.prototype.C,Ht.prototype.ca=function(e,t){var n=qt(e);return this.b[n]=1,this.a[n]=t,this},Ht.prototype.fullBox=Ht.prototype.ca,Ht.prototype.parse=function(e){for(e=new Kt(new DataView(e),0);e.Z();)this.eb(0,e)},Ht.prototype.parse=Ht.prototype.parse,Ht.prototype.eb=function(e,t){var n=t.u,i=t.D(),r=t.D();switch(i){case 0:i=t.H.byteLength-n;break;case 1:i=t.Pa()}var a=this.a[r];if(a){var s=null,o=null;1==this.b[r]&&(o=t.D(),s=o>>>24,o&=16777215),r=n+i-t.u,r=0<r?t.Ja(r).buffer:new ArrayBuffer(0),r=new Kt(new DataView(r),0),a({Na:this,version:s,Lc:o,s:r,size:i,start:n+e})}else t.I(n+i-t.u)},Ht.prototype.parseNext=Ht.prototype.eb,Ht.children=Vt,Ht.sampleDescription=zt,Ht.allData=Yt,t("shaka.media.SegmentIndex",$t),$t.prototype.m=function(){return this.a=null,Promise.resolve()},$t.prototype.destroy=$t.prototype.m,$t.prototype.find=function(e){for(var t=this.a.length-1;0<=t;--t){var n=this.a[t];if(e>=n.startTime&&e<n.endTime)return n.position}return this.a.length&&e<this.a[0].startTime?this.a[0].position:null},$t.prototype.find=$t.prototype.find,$t.prototype.get=function(e){return this.a.length?(e-=this.a[0].position,0>e||e>=this.a.length?null:this.a[e]):null},$t.prototype.get=$t.prototype.get,$t.prototype.vb=function(e){for(var t,n,i=[],r=n=0;n<this.a.length&&r<e.length;){var a=this.a[n];t=e[r],a.startTime<t.startTime?(i.push(a),n++):(a.startTime>t.startTime||(.1<Math.abs(a.endTime-t.endTime)?i.push(t):i.push(a),n++),r++)}for(;n<this.a.length;)i.push(this.a[n++]);if(i.length)for(n=i[i.length-1].position+1;r<e.length;)t=e[r++],t=new Gt(n++,t.startTime,t.endTime,t.a,t.X,t.M),i.push(t);else i=e;this.a=i},$t.prototype.merge=$t.prototype.vb,$t.prototype.ob=function(e){for(var t=0;t<this.a.length&&!(this.a[t].endTime>e);++t);this.a.splice(0,t)},$t.prototype.evict=$t.prototype.ob;var ks;Zt.prototype.Z=function(){return this.a.Z()},an.prototype.parse=function(e,t,n,i){var r;if(t=new Zt(new DataView(t)),440786851!=en(t).id)throw new u(2,3,3008);var a=en(t);if(408125543!=a.id)throw new u(2,3,3009);for(t=a.a.byteOffset,a=new Zt(a.a),r=null;a.Z();){var s=en(a);if(357149030==s.id){r=s;break}}if(!r)throw new u(2,3,3010);for(a=new Zt(r.a),r=1e6,s=null;a.Z();){var o=en(a);if(2807729==o.id)r=rn(o);else if(17545==o.id)if(s=o,4==s.a.byteLength)s=s.a.getFloat32(0);else{if(8!=s.a.byteLength)throw new u(2,3,3003);s=s.a.getFloat64(0)}}if(null==s)throw new u(2,3,3011);if(a=r/1e9,r=s*a,e=en(new Zt(new DataView(e))),475249515!=e.id)throw new u(2,3,3007);return sn(e,t,a,r,n,i)};var _s={},Os={};t("shaka.media.ManifestParser.registerParserByExtension",function(e,t){Os[e]=t}),t("shaka.media.ManifestParser.registerParserByMime",function(e,t){_s[e]=t}),t("shaka.media.PresentationTimeline",Tn),Tn.prototype.Y=function(){return this.a},Tn.prototype.getDuration=Tn.prototype.Y,Tn.prototype.pa=function(e){this.a=e},Tn.prototype.setDuration=Tn.prototype.pa,Tn.prototype.Uc=function(){return this.f},Tn.prototype.getPresentationStartTime=Tn.prototype.Uc,Tn.prototype.uc=function(e){this.h=e},Tn.prototype.setClockOffset=Tn.prototype.uc,Tn.prototype.wc=function(e){this.g=e},Tn.prototype.setStatic=Tn.prototype.wc,Tn.prototype.Vc=function(){return this.c},Tn.prototype.getSegmentAvailabilityDuration=Tn.prototype.Vc,Tn.prototype.vc=function(e){this.c=e},Tn.prototype.setSegmentAvailabilityDuration=Tn.prototype.vc,Tn.prototype.Ga=function(e,t){t.length&&(this.b=t.reduce(function(e,t){return Math.max(e,t.endTime-t.startTime)},this.b))},Tn.prototype.notifySegments=Tn.prototype.Ga,Tn.prototype.wb=function(e){this.b=Math.max(this.b,e)},Tn.prototype.notifyMaxSegmentDuration=Tn.prototype.wb,Tn.prototype.da=function(){return 1/0==this.a&&!this.g},Tn.prototype.isLive=Tn.prototype.da,Tn.prototype.va=function(){return 1/0!=this.a&&!this.g},Tn.prototype.isInProgress=Tn.prototype.va,Tn.prototype.ma=function(){return this.Da(0)},Tn.prototype.getSegmentAvailabilityStart=Tn.prototype.ma,Tn.prototype.Da=function(e){if(1/0==this.c)return 0;var t=this.ua();return Math.max(0,Math.min(t-this.c+e,t))},Tn.prototype.getSafeAvailabilityStart=Tn.prototype.Da,Tn.prototype.ua=function(){return this.da()||this.va()?Math.min(Math.max(0,(Date.now()+this.h)/1e3-this.b-this.f),this.a):this.a},Tn.prototype.getSegmentAvailabilityEnd=Tn.prototype.ua,Tn.prototype.bb=function(){return Math.max(0,this.ua()-(this.da()||this.va()?this.i:0))},Tn.prototype.getSeekRangeEnd=Tn.prototype.bb,t("shaka.dash.DashParser",An),is=An.prototype,is.configure=function(e){this.b=e},is.start=function(e,t){return this.g=[e],this.a=t,Nn(this).then(function(){return this.a&&On(this,0),this.c}.bind(this))},is.stop=function(){return this.b=this.a=null,this.g=[],this.c=null,this.i=[],this.j={},null!=this.f&&(e.clearTimeout(this.f),this.f=null),Promise.resolve()},is.update=function(){Nn(this).catch(function(e){this.a&&this.a.onError(e)}.bind(this))},is.onExpirationUpdated=function(){},is.Bd=function(e,t){e.S=Pn(t,e.T,null);var n=!1,i=St(t,"Role"),r=void 0;"text"==e.S.contentType&&(r="subtitle");for(var a=0;a<i.length;a++){var s=i[a].getAttribute("schemeIdUri");if(null==s||"urn:mpeg:dash:role:2011"==s)switch(s=i[a].getAttribute("value")){case"main":n=!0;break;case"caption":case"subtitle":r=s}}var o=null,l=!1;if(St(t,"EssentialProperty").forEach(function(e){"http://dashif.org/guidelines/trickmode"==e.getAttribute("schemeIdUri")?o=e.getAttribute("value"):l=!0}),l)return null;var i=St(t,"ContentProtection"),c=Pt(i,this.b.dash.customScheme,this.b.dash.ignoreDrmInfo),i=Be(t.getAttribute("lang")||"und"),a=St(t,"Representation"),r=a.map(this.Ed.bind(this,e,c,r,i,n)).filter(function(e){return!!e});if(!r.length)throw new u(2,4,4003);return e.S.contentType||(e.S.contentType=Fn(r[0].mimeType,r[0].codecs),r.forEach(function(t){t.type=e.S.contentType})),r.forEach(function(e){c.drmInfos.forEach(function(t){e.keyId&&t.keyIds.push(e.keyId)})}),a=a.map(function(e){return e.getAttribute("id")}).filter(w),{id:e.S.id||"__fake__"+this.h++,contentType:e.S.contentType,language:i,tb:n,streams:r,drmInfos:c.drmInfos,Mb:o,Nd:a}},is.Ed=function(e,t,n,i,r,a){if(e.w=Pn(a,e.S,null),!xn(e.w))return null;e.bandwidth=At(a,"bandwidth",kt)||void 0;var s=this.Od.bind(this);if(e.w.Qa)s=ln(e,s);else if(e.w.oa)s=hn(e,this.j);else if(e.w.Ra)s=vn(e,s,this.j,!!this.c);else{var o=e.w.U,u=e.R.duration||0;s={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0<=e&&e<u?1:null},getSegmentReference:function(e){return 1!=e?null:new Gt(1,0,u,function(){return o},0,null)},initSegmentReference:null,presentationTimeOffset:0}}return a=St(a,"ContentProtection"),a=xt(a,this.b.dash.customScheme,t,this.b.dash.ignoreDrmInfo),{id:this.h++,createSegmentIndex:s.createSegmentIndex,findSegmentPosition:s.findSegmentPosition,getSegmentReference:s.getSegmentReference,initSegmentReference:s.initSegmentReference,presentationTimeOffset:s.presentationTimeOffset,mimeType:e.w.mimeType,codecs:e.w.codecs,frameRate:e.w.frameRate,bandwidth:e.bandwidth,width:e.w.width,height:e.w.height,kind:n,encrypted:0<t.drmInfos.length,keyId:a,language:i,type:e.S.contentType,primary:r,trickModeVideo:null,containsEmsgBoxes:e.w.containsEmsgBoxes}},is.fe=function(){this.f=null;var e=Date.now();Nn(this).then(function(){this.a&&On(this,(Date.now()-e)/1e3)}.bind(this)).catch(function(e){this.a&&(e.severity=1,this.a.onError(e),On(this,0))}.bind(this))},is.Dd=function(e,t,n){var i=n.getAttribute("schemeIdUri")||"",r=n.getAttribute("value")||"",a=At(n,"timescale",_t)||1;St(n,"Event").forEach(function(n){var s=At(n,"presentationTime",_t)||0,o=At(n,"duration",_t)||0,s=s/a+e,o=s+o/a;null!=t&&(s=Math.min(s,e+t),o=Math.min(o,e+t)),n={schemeIdUri:i,value:r,startTime:s,endTime:o,id:n.getAttribute("id")||"",eventElement:n},this.a.onTimelineRegionAdded(n)}.bind(this))},is.Od=function(e,t,n){return e=O(e,this.b.retryParameters),null!=t&&(e.headers.Range="bytes="+t+"-"+(null!=n?n:"")),this.a.networkingEngine.request(1,e).then(function(e){return e.data})},Os.mpd=An,_s["application/dash+xml"]=An,Mn.prototype.toString=function(){function e(e){return e.name+'="'+e.value+'"'}return this.value?"#"+this.name+":"+this.value:0<this.a.length?"#"+this.name+":"+this.a.map(e).join(","):"#"+this.name},Mn.prototype.getAttribute=function(e){var t=this.a.filter(function(t){return t.name==e});return t.length?t[0]:null};var Ps="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY".split(" "),xs="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");t("shaka.net.DataUriPlugin",Qn),Qn.parse=function(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new u(2,1,1004,t);if(n=n.slice(1).join(":").split(","),2>n.length)throw new u(2,1,1004,t);var i=n[0],n=e.decodeURIComponent(n.slice(1).join(",")),i=i.split(";"),r=null;if(1<i.length&&(r=i[1]),"base64"==r)t=$(n).buffer;else{if(r)throw new u(2,1,1005,t);t=z(n)}return{data:t,contentType:i[0]}},ds.data=Qn,t("shaka.hls.HlsParser",Zn),is=Zn.prototype,is.configure=function(e){this.b=e},is.start=function(e,t){return this.c=t,this.j=e,this.c.networkingEngine.request(0,O([e],this.b.retryParameters)).then(function(t){return ei(this,t.data,e)}.bind(this))},is.stop=function(){return this.b=this.c=null,this.g={},Promise.resolve()},is.update=function(){},is.onExpirationUpdated=function(){};var Rs=[/^(avc)/,/^(hvc)/,/^(vp[8-9])$/,/^(av1)$/,/^(mp4v)/],Ds=[/^(vorbis)/,/^(opus)/,/^(mp4a)/,/^(ac-3)$/,/^(ec-3)$/],Fs={mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",ts:"video/mp2t"},js={mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",ts:"video/mp2t"},Ms={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){if("SAMPLE-AES-CENC"!=pi(e,"METHOD"))return null;var t=pi(e,"URI"),t=Qn.parse(t),t=new Uint8Array(t.data),t=N("com.widevine.alpha",[{initDataType:"cenc",initData:t}]);return(e=Bn(e,"KEYID"))&&(t.keyIds=[e.substr(2).toLowerCase()]),t}};Os.m3u8=Zn,_s["application/x-mpegurl"]=Zn,_s["application/vnd.apple.mpegurl"]=Zn,vi.prototype.parseInit=function(){},vi.prototype.parseMedia=function(e,t){var n=J(e),i=[],r=new DOMParser,a=null;try{a=r.parseFromString(n,"text/xml")}catch(e){throw new u(2,2,2005)}if(a){var s=a.getElementsByTagName("tt")[0];if(!s)throw new u(2,2,2005);r=s.getAttribute("ttp:frameRate"),a=s.getAttribute("ttp:subFrameRate");var o=s.getAttribute("ttp:frameRateMultiplier"),l=s.getAttribute("ttp:tickRate");if("default"!=(n=s.getAttribute("xml:space")||"default")&&"preserve"!=n)throw new u(2,2,2005);for(n="default"==n,r=new Ti(r,a,o,l),a=gi(s.getElementsByTagName("styling")[0]),o=gi(s.getElementsByTagName("layout")[0]),s=gi(s.getElementsByTagName("body")[0]),l=0;l<s.length;l++){var c=s[l],d=t.periodStart,h=r,f=a,p=o,m=n;if(c.hasAttribute("begin")||c.hasAttribute("end")||!/^\s*$/.test(c.textContent)){bi(c,m);var m=wi(c.getAttribute("begin"),h),v=wi(c.getAttribute("end"),h),h=wi(c.getAttribute("dur"),h),g=c.textContent;if(null==v&&null!=h&&(v=m+h),null==m||null==v)throw new u(2,2,2001);(d=we(m+d,v+d,g))?(m=Ei(c,"region",p),p=d,(v=yi(c,m,f,"tts:extent"))&&(h=Vs.exec(v))&&(p.size=Number(h[1])),h=yi(c,m,f,"tts:writingMode"),v=!0,"tb"==h||"tblr"==h?p.vertical="lr":"tbrl"==h?p.vertical="rl":v=!1,(h=yi(c,m,f,"tts:origin"))&&(h=Vs.exec(h))&&(v?(p.position=Number(h[2]),p.line=Number(h[1])):(p.position=Number(h[1]),p.line=Number(h[2])),p.snapToLines=!1),(f=yi(c,m,f,"tts:textAlign"))&&(p.align=f,"center"==f&&("center"!=p.align&&(p.align="middle"),p.position="auto"),p.positionAlign=Ys[f],p.lineAlign=zs[f]),f=d):f=null}else f=null;f&&i.push(f)}}return i};var Us=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Bs=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Gs=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Ks=/^(\d*\.?\d*)f$/,Js=/^(\d*\.?\d*)t$/,Hs=/^(?:(\d*\.?\d*)h)?(?:(\d*\.?\d*)m)?(?:(\d*\.?\d*)s)?(?:(\d*\.?\d*)ms)?$/,Vs=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,zs={left:"start",center:"center",right:"end",start:"start",end:"end"},Ys={left:"line-left",center:"center",right:"line-right"};Ee("application/ttml+xml",vi),Ai.prototype.parseInit=function(e){var t=!1;if((new Ht).C("moov",Vt).C("trak",Vt).C("mdia",Vt).C("minf",Vt).C("stbl",Vt).ca("stsd",zt).C("stpp",function(){t=!0}).parse(e),!t)throw new u(2,2,2007)},Ai.prototype.parseMedia=function(e,t){var n=!1,i=[];if((new Ht).C("mdat",Yt(function(e){n=!0,i=this.a.parseMedia(e.buffer,t)}.bind(this))).parse(e),!n)throw new u(2,2,2007);return i},Ee('application/mp4; codecs="stpp"',Ai),Ni.prototype.parseInit=function(){},Ni.prototype.parseMedia=function(e,t){var n=J(e),n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n"),n=n.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new u(2,2,2e3);var i=t.segmentStart;if(0<=n[0].indexOf("X-TIMESTAMP-MAP")){var r=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=n[0].match(/MPEGTS:(\d+)/m);r&&a&&(i=Li(new Vn(r[1])),i=t.periodStart+(Number(a[1])/9e4-i))}for(a=[],r=1;r<n.length;r++){var s=n[r].split("\n"),o=i;if(1==s.length&&!s[0]||/^NOTE($|[ \t])/.test(s[0]))var l=null;else{l=null,0>s[0].indexOf("--\x3e")&&(l=s[0],s.splice(0,1));var c=new Vn(s[0]),d=Li(c),h=zn(c,/[ \t]+--\x3e[ \t]+/g),f=Li(c);if(null==d||!h||null==f)throw new u(2,2,2001);if(s=we(d+o,f+o,s.slice(1).join("\n").trim())){for(zn(c,/[ \t]+/gm),o=Yn(c);o;)Ii(s,o),zn(c,/[ \t]+/gm),o=Yn(c);null!=l&&(s.id=l),l=s}else l=null}l&&a.push(l)}return a},Ee("text/vtt",Ni),Ee('text/vtt; codecs="vtt"',Ni),Ci.prototype.parseInit=function(e){var t=!1;if((new Ht).C("moov",Vt).C("trak",Vt).C("mdia",Vt).ca("mdhd",function(e){0==e.version?(e.s.I(4),e.s.I(4),this.a=e.s.D(),e.s.I(4)):(e.s.I(8),e.s.I(8),this.a=e.s.D(),e.s.I(8)),e.s.I(4)}.bind(this)).C("minf",Vt).C("stbl",Vt).ca("stsd",zt).C("wvtt",function(){t=!0}).parse(e),!this.a)throw new u(2,2,2008);if(!t)throw new u(2,2,2008)},Ci.prototype.parseMedia=function(e,t){var n=0,i=[],r=[],a=[],s=!1,o=!1,l=!1;if((new Ht).C("moof",Vt).C("traf",Vt).ca("tfdt",function(e){s=!0,n=e.version?e.s.Pa():e.s.D()}).ca("trun",function(e){o=!0;var t=e.version,n=e.Lc;e=e.s;var r=e.D();1&n&&e.I(4),4&n&&e.I(4);for(var a=[],s=0;s<r;s++){var u={duration:null,Lb:null};256&n&&(u.duration=e.D()),512&n&&e.I(4),1024&n&&e.I(4),2048&n&&(u.Lb=t?e.lc():e.D()),a.push(u)}i=a}).C("vtte",function(){r.push(null)}).C("vttc",Yt(function(e){r.push(e.buffer)})).C("mdat",function(e){l=!0,Vt(e)}).parse(e),!l&&!s&&!o)throw new u(2,2,2008);for(var c=n,d=0;d<i.length;d++){var h=i[d],f=r[d];if(h.duration){var p=h.Lb?n+h.Lb:c,c=p+h.duration;f&&a.push(ki(f,t.periodStart+p/this.a,t.periodStart+c/this.a))}}return a},Ee('application/mp4; codecs="wvtt"',Ci),is=Oi.prototype,is.m=function(){var t=this.b.m();return this.b=null,null!=this.f&&(e.clearInterval(this.f),this.f=null),null!=this.j&&(e.clearInterval(this.j),this.j=null),this.G=this.J=this.l=this.c=this.a=null,t},is.pb=function(){return this.g},is.yb=function(){this.o=!0,this.fc()},is.pd=function(){this.a.playbackRate!=(this.h||0>this.g?0:this.g)&&Di(this,this.a.playbackRate)},is.dc=function(){var e=Ri(this);.001>Math.abs(this.a.currentTime-e)?(D(this.b,this.a,"seeking",this.gc.bind(this)),D(this.b,this.a,"playing",this.ec.bind(this))):(F(this.b,this.a,"seeking",this.rd.bind(this)),this.a.currentTime=e)},is.rd=function(){D(this.b,this.a,"seeking",this.gc.bind(this)),D(this.b,this.a,"playing",this.ec.bind(this))},is.fc=function(){if(this.a.readyState){this.a.readyState!=this.B&&(this.i=!1,this.B=this.a.readyState);var e=this.l.smallGapLimit,t=this.a.currentTime,n=this.a.buffered;e:{if(n&&n.length&&!(1==n.length&&1e-6>n.end(0)-n.start(0))){var i=.1;/(Edge|Trident)\//.test(navigator.userAgent)&&(i=.5);for(var r=0;r<n.length;r++)if(n.start(r)>t&&(!r||n.end(r-1)-t<=i)){i=r;break e}}i=null}if(null==i){if(3>this.a.readyState&&0<this.a.playbackRate)if(this.P!=t)this.P=t,this.v=Date.now();else if(this.v<Date.now()-1e3)for(this.v=Date.now()+5e3,i=0;i<n.length;i++)if(t>=n.start(i)&&t<n.end(i)-.5){this.a.currentTime=this.a.currentTime;break}}else if((i||this.o)&&!((r=n.start(i))>=this.c.presentationTimeline.bb())){var a=r-t,e=a<=e,s=!1;e||this.i||(this.i=!0,a=new at("largegap",{currentTime:t,gapSize:a}),a.cancelable=!0,this.G(a),this.l.jumpLargeGaps&&!a.defaultPrevented&&(s=!0)),(e||s)&&(i&&n.end(i-1),ji(this,t,r))}}},is.gc=function(){this.o=!1;var e=this.a.currentTime,t=Fi(this,e);.001<Math.abs(t-e)?ji(this,e,t):(this.i=!1,this.J())},is.ec=function(){var e=this.a.currentTime,t=Fi(this,e);.001<Math.abs(t-e)&&ji(this,e,t)},Ui.prototype.m=function(){var e=this.j?this.j.m():Promise.resolve();return this.j=null,Ki(this),this.B=this.h=this.l=this.A=this.g=this.a=null,this.c=[],e},Ui.prototype.v=function(e){if(!this.c.some(function(t){return t.info.schemeIdUri==e.schemeIdUri&&t.info.startTime==e.startTime&&t.info.endTime==e.endTime})){var t={info:e,status:1};this.c.push(t);var n=new at("timelineregionadded",{detail:Bi(e)});this.h(n),this.o(!0,t)}},Ui.prototype.o=function(e,t){var n=t.info.startTime>this.a.currentTime?1:t.info.endTime<this.a.currentTime?3:2,i=2==t.status,r=2==n;n!=t.status&&((!e||i||r)&&(i||this.h(new at("timelineregionenter",{detail:Bi(t.info)})),r||this.h(new at("timelineregionexit",{detail:Bi(t.info)}))),t.status=n)},Ui.prototype.G=function(){this.f=null,Gi(this);var e=tt(this.g,this.a.currentTime);e!=this.i&&(-1!=this.i&&this.B(),this.i=e);var e=Le(this.a.buffered,this.a.currentTime),t=Ne(this.a.buffered)>=this.g.presentationTimeline.ua()-.1||this.a.ended;if(this.b){var n=1*Math.max(this.g.minBufferTime||0,this.A.rebufferingGoal);(t||e>=n)&&0!=this.b&&(this.b=!1,this.l(!1))}else!t&&.5>e&&1!=this.b&&(this.b=!0,this.l(!0));this.c.forEach(this.o.bind(this,!1))},is=Ji.prototype,is.m=function(){for(var e in this.c)fr(this.c[e]);return this.h=this.c=this.j=this.g=this.o=this.b=this.a=null,this.f=!0,Promise.resolve()},is.configure=function(e){this.h=e},is.init=function(){var e=this.a.$b(this.b.periods[tt(this.b,xi(this.a.Oa))]);return U(e)?Promise.reject(new u(2,5,5005)):Wi(this,e).then(function(){this.a&&this.a.gd&&this.a.gd()}.bind(this))},is.ie=function(e){if(!this.f&&!e.wa&&null!=e.qa&&!e.sa)if(e.qa=null,e.ra)dr(this,e,e.kb);else{try{var t=er(this,e);null!=t&&(hr(this,e,t),e.rb=!1)}catch(e){return void this.a.onError(e)}t=B(this.c),ur(this,e),t.every(function(e){return e.endOfStream})&&this.a.K.endOfStream().then(function(){this.b.presentationTimeline.pa(this.a.K.Y())}.bind(this))}},is.Cd=function(e,t,n){var i=n.s.Bb(),r=n.s.Bb(),a=n.s.D(),s=n.s.D(),o=n.s.D(),u=n.s.D();n=n.s.Ja(n.s.H.byteLength-n.s.u),e=e.startTime+t.startTime+s/a,"urn:mpeg:dash:event:2012"==i?this.a.hd():this.a.onEvent(new at("emsg",{detail:{startTime:e,endTime:e+o/a,schemeIdUri:i,value:r,timescale:a,presentationTimeDelta:s,eventDuration:o,id:u,messageData:n}}))},t("shaka.net.HttpPlugin",pr),ds.http=pr,ds.https=pr,is=mr.prototype,is.init=function(e,t){return Er(this,e,t).then(function(){var t=Object.keys(e);return Promise.all(t.map(function(e){return br(this,e).then(function(t){this.c[e]=t}.bind(this))}.bind(this)))}.bind(this))},is.m=function(){return Promise.all(this.b.map(function(e){try{e.transaction.abort()}catch(e){}return e.L.catch(E)})).then(function(){this.a&&(this.a.close(),this.a=null)}.bind(this))},is.get=function(e,t){var n;return yr(this,e,"readonly",function(e){n=e.get(t)}).then(function(){return n.result})},is.forEach=function(e,t){return yr(this,e,"readonly",function(e){e.openCursor().onsuccess=function(e){(e=e.target.result)&&(t(e.value),e.continue())}})},is.remove=function(e,t){return yr(this,e,"readwrite",function(e){e.delete(t)})};var qs={manifest:"key",segment:"key"};kr.prototype.m=function(){var e=this.j,t=this.l,n=this.i||Promise.resolve(),n=n.then(function(){return gr(e,t)});return this.b={},this.l=[],this.i=this.a=this.A=this.v=this.j=this.o=null,n},is=xr.prototype,is.configure=function(){},is.start=function(e){var t=/^offline:([0-9]+)$/.exec(e);if(!t)return Promise.reject(new u(2,1,9004,e));var n=Number(t[1]),i=Cr();return this.a=n,i?i.init(qs).then(function(){return i.get("manifest",n)}).then(function(e){if(!e)throw new u(2,9,9003,n);return Rr(e)}).then(function(e){return i.m().then(function(){return e})},function(e){return i.m().then(function(){throw e})}):Promise.reject(new u(2,9,9e3))},is.stop=function(){return Promise.resolve()},is.update=function(){},is.onExpirationUpdated=function(e,t){var n=Cr();n.init(qs).then(function(){return n.get("manifest",this.a)}.bind(this)).then(function(i){if(i&&!(0>i.sessionIds.indexOf(e))&&(void 0==i.expiration||i.expiration>t))return i.expiration=t,vr(n,"manifest",i)}).catch(function(){}).then(function(){return n.m()})},_s["application/x-offline-manifest"]=xr,t("shaka.offline.OfflineScheme",Dr),ds.offline=Dr,Fr.prototype.then=function(e){return this.a=this.a.then(e).then(function(e){return this.c?(this.h(),Promise.reject(this.i)):Promise.resolve(e)}.bind(this)),this},Fr.prototype.cancel=function(e){return this.b?Promise.resolve():(this.c=!0,this.i=e,this.g)},n(Mr),t("shaka.Player",Mr),Mr.prototype.m=function(){this.J=!0;var e=Promise.resolve();return this.G&&(e=this.G.cancel(new u(2,7,7e3))),e.then(function(){var e=Promise.all([this.la,Jr(this),this.l?this.l.m():null,this.o?this.o.m():null]);return this.b=this.o=this.Ob=this.l=this.A=this.f=null,e}.bind(this))},Mr.prototype.destroy=Mr.prototype.m,Mr.version="v2.1.2";var Xs={};Mr.registerSupportPlugin=function(e,t){Xs[e]=t},Mr.isBrowserSupported=function(){return!!(e.Promise&&e.Uint8Array&&Array.prototype.forEach&&e.MediaSource&&e.MediaSource.isTypeSupported&&e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration)},Mr.probeSupport=function(){return ve().then(function(e){e={manifest:wn(),media:ke(),drm:e};for(var t in Xs)e[t]=Xs[t]();return e})},Mr.prototype.load=function(e,t,n){var i=this.hb(),r=new Fr;this.G=r,this.dispatchEvent(new at("loading"));var a=Date.now();return jr(r.then(function(){return i}).then(function(){return this.i=Yr(),D(this.l,this.f,"playing",this.Sa.bind(this)),D(this.l,this.f,"pause",this.Sa.bind(this)),D(this.l,this.f,"ended",this.Sa.bind(this)),Sn(e,this.o,this.b.manifest.retryParameters,n)}.bind(this)).then(function(t){return this.h=new t,this.h.configure(this.b.manifest),t={networkingEngine:this.o,filterPeriod:this.fb.bind(this),onTimelineRegionAdded:this.vd.bind(this),onEvent:this.gb.bind(this),onError:this.xa.bind(this)},2<this.h.start.length?this.h.start(e,this.o,t.filterPeriod,t.onError,t.onEvent):this.h.start(e,t)}.bind(this)).then(function(t){if(0==t.periods.length)throw new u(2,4,4014);return this.c=t,this.Ya=e,this.j=new te(this.o,this.xa.bind(this),this.$d.bind(this),this.Zd.bind(this)),this.j.configure(this.b.drm),this.j.init(t,!1)}.bind(this)).then(function(){return this.c.periods.forEach(this.fb.bind(this)),this.Ua=Date.now()/1e3,this.ia=this.b.preferredAudioLanguage,this.Ba=this.b.preferredTextLanguage,Promise.all([ne(this.j,this.f),this.Wa])}.bind(this)).then(function(){return this.b.abr.manager.init(this.Jb.bind(this)),this.g=new Oi(this.f,this.c,this.b.streaming,t||null,this.ae.bind(this),this.gb.bind(this)),this.v=new Ui(this.f,this.c,this.b.streaming,this.xc.bind(this),this.gb.bind(this),this.Yd.bind(this)),this.ja=new Ce(this.f,this.N,this.A),this.a=new Ji(this.c,{Oa:this.g,K:this.ja,bd:this.o,$b:this.cd.bind(this),Zb:this.Ec.bind(this),onError:this.xa.bind(this),onEvent:this.gb.bind(this),hd:this.jd.bind(this),yb:this.sd.bind(this)}),this.a.configure(this.b.streaming),this.a.init()}.bind(this)).then(function(){if(this.b.streaming.startAtSegmentBoundary){var e=Wr(this,xi(this.g));Pi(this.g,e)}this.c.periods.forEach(this.fb.bind(this)),ea(this),Zr(this);var e=Hi(this.a),t=We(e,this.ia);this.b.abr.manager.setVariants(t),e.variants.some(function(e){return e.primary}),this.Xa.forEach(this.v.v.bind(this.v)),this.Xa=[],F(this.l,this.f,"loadeddata",function(){this.i.loadLatency=(Date.now()-a)/1e3}.bind(this)),this.G=null}.bind(this))).catch(function(e){return this.G==r&&(this.G=null,this.dispatchEvent(new at("unloading"))),Promise.reject(e)}.bind(this))},Mr.prototype.load=Mr.prototype.load,Mr.prototype.configure=function(e){e.abr&&e.abr.manager&&e.abr.manager!=this.b.abr.manager&&(this.b.abr.manager.stop(),e.abr.manager.init(this.Jb.bind(this))),I(this.b,e,zr(this),Vr(),""),Br(this)},Mr.prototype.configure=Mr.prototype.configure,Mr.prototype.getConfiguration=function(){var e=zr(this);return I(e,this.b,zr(this),Vr(),""),e},Mr.prototype.getConfiguration=Mr.prototype.getConfiguration,Mr.prototype.Pd=function(){var e=zr(this);e.abr&&e.abr.manager&&e.abr.manager!=this.b.abr.manager&&(this.b.abr.manager.stop(),e.abr.manager.init(this.Jb.bind(this))),this.b=zr(this),Br(this)},Mr.prototype.resetConfiguration=Mr.prototype.Pd,Mr.prototype.Qc=function(){return this.f},Mr.prototype.getMediaElement=Mr.prototype.Qc,Mr.prototype.Ub=function(){return this.o},Mr.prototype.getNetworkingEngine=Mr.prototype.Ub,Mr.prototype.Pc=function(){return this.Ya},Mr.prototype.getManifestUri=Mr.prototype.Pc,Mr.prototype.da=function(){return!!this.c&&this.c.presentationTimeline.da()},Mr.prototype.isLive=Mr.prototype.da,Mr.prototype.va=function(){return!!this.c&&this.c.presentationTimeline.va()},Mr.prototype.isInProgress=Mr.prototype.va,Mr.prototype.Rd=function(){var e=0,t=0;return this.c&&(t=this.c.presentationTimeline,e=t.ma(),t=t.bb()),{start:e,end:t}},Mr.prototype.seekRange=Mr.prototype.Rd,Mr.prototype.keySystem=function(){return this.j?this.j.keySystem():""},Mr.prototype.keySystem=Mr.prototype.keySystem,Mr.prototype.drmInfo=function(){return this.j?this.j.b:null},Mr.prototype.drmInfo=Mr.prototype.drmInfo,Mr.prototype.ab=function(){return this.j?this.j.ab():1/0},Mr.prototype.getExpiration=Mr.prototype.ab,Mr.prototype.Yc=function(){return this.ka},Mr.prototype.isBuffering=Mr.prototype.Yc,Mr.prototype.hb=function(){if(this.J)return Promise.resolve();this.dispatchEvent(new at("unloading"));var e=Promise.resolve();return this.G&&(e=this.G.cancel(new u(2,7,7e3))),e.then(function(){return this.la||(this.la=Hr(this).then(function(){this.la=null}.bind(this))),this.la}.bind(this))},Mr.prototype.unload=Mr.prototype.hb,Mr.prototype.pb=function(){return this.g?this.g.pb():0},Mr.prototype.getPlaybackRate=Mr.prototype.pb,Mr.prototype.le=function(e){this.g&&Di(this.g,e),this.a&&Yi(this.a,1!=e)},Mr.prototype.trickPlay=Mr.prototype.le,Mr.prototype.Fc=function(){this.g&&Di(this.g,1),this.a&&Yi(this.a,!1)},Mr.prototype.cancelTrickPlay=Mr.prototype.Fc,Mr.prototype.getTracks=function(){return this.Wb().concat(this.Vb())},Mr.prototype.getTracks=Mr.prototype.getTracks,Mr.prototype.Ud=function(e,t){"text"==e.type?this.rc(e):(this.configure({abr:{enabled:!1}}),this.sc(e,t))},Mr.prototype.selectTrack=Mr.prototype.Ud,Mr.prototype.Wb=function(){if(!this.c)return[];var e=tt(this.c,xi(this.g)),t=this.P[e]||{};return Ve(this.c.periods[e],t.audio,t.video)},Mr.prototype.getVariantTracks=Mr.prototype.Wb,Mr.prototype.Vb=function(){if(!this.c)return[];var e=tt(this.c,xi(this.g));return ze(this.c.periods[e],(this.P[e]||{}).text).filter(function(e){return 0>this.Va.indexOf(e.id)}.bind(this))},Mr.prototype.getTextTracks=Mr.prototype.Vb,Mr.prototype.rc=function(e){if(this.a&&(e=qe(Hi(this.a),e))){Gr(this,e,!1);var t={};t.text=e,qr(this,t,!0)}},Mr.prototype.selectTextTrack=Mr.prototype.rc,Mr.prototype.sc=function(e,t){if(this.a){var n={},i=Ye(Hi(this.a),e),r=Vi(this.a);if(i){if(!i.allowedByApplication||!i.allowedByKeySystem)return;i.audio&&(Kr(this,i.audio),i.audio!=r.audio&&(n.audio=i.audio)),i.video&&(Kr(this,i.video),i.video!=r.video&&(n.video=i.video))}B(n).forEach(function(e){Gr(this,e,!1)}.bind(this)),(i=r.text)&&(n.text=i),qr(this,n,t)}},Mr.prototype.selectVariantTrack=Mr.prototype.sc,Mr.prototype.Nc=function(){return this.a?Xe(Hi(this.a).variants).map(function(e){return e.language}).filter(T):[]},Mr.prototype.getAudioLanguages=Mr.prototype.Nc,Mr.prototype.Wc=function(){return this.a?Hi(this.a).textStreams.map(function(e){return e.language}).filter(T):[]},Mr.prototype.getTextLanguages=Mr.prototype.Wc,Mr.prototype.Sd=function(e){if(this.a){var t=Hi(this.a);this.ia=e,Qr(this,t)}},Mr.prototype.selectAudioLanguage=Mr.prototype.Sd,Mr.prototype.Td=function(e){if(this.a){var t=Hi(this.a);this.Ba=e,Qr(this,t)}},Mr.prototype.selectTextLanguage=Mr.prototype.Td,Mr.prototype.$c=function(){return"showing"==this.A.mode},Mr.prototype.isTextTrackVisible=Mr.prototype.$c,Mr.prototype.Wd=function(e){this.A.mode=e?"showing":"hidden",ta(this)},Mr.prototype.setTextTrackVisibility=Mr.prototype.Wd,Mr.prototype.Sc=function(){return this.c?new Date(1e3*this.c.presentationTimeline.f+1e3*this.f.currentTime):null},Mr.prototype.getPlayheadTimeAsDate=Mr.prototype.Sc,Mr.prototype.getStats=function(){Xr(this),this.Sa();var e=null,t=null,n=this.f&&this.f.getVideoPlaybackQuality?this.f.getVideoPlaybackQuality():{};return this.g&&this.c&&(e=tt(this.c,xi(this.g)),t=this.P[e],t=Ze(t.audio,t.video,this.c.periods[e].variants),e=t.video||{}),e||(e={}),t||(t={}),{width:e.width||0,height:e.height||0,streamBandwidth:t.bandwidth||0,decodedFrames:Number(n.totalVideoFrames),droppedFrames:Number(n.droppedVideoFrames),estimatedBandwidth:this.b.abr.manager.getBandwidthEstimate(),loadLatency:this.i.loadLatency,playTime:this.i.playTime,bufferingTime:this.i.bufferingTime,switchHistory:L(this.i.switchHistory),stateHistory:L(this.i.stateHistory)}},Mr.prototype.getStats=Mr.prototype.getStats,Mr.prototype.addTextTrack=function(e,t,n,i,r){if(!this.a)return Promise.reject();for(var a,s=Hi(this.a),o=0;o<this.c.periods.length;o++)if(this.c.periods[o]==s){if(o==this.c.periods.length-1){if(a=this.c.presentationTimeline.Y()-s.startTime,1/0==a)return Promise.reject()}else a=this.c.periods[o+1].startTime-s.startTime;break}var u={id:this.Bc++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(t){return 1!=t?null:new Gt(1,0,a,function(){return[e]},0,null)},initSegmentReference:null,presentationTimeOffset:0,mimeType:i,codecs:r||"",kind:n,encrypted:!1,keyId:null,language:t,type:"text",primary:!1,trickModeVideo:null,containsEmsgBoxes:!1};return this.Va.push(u.id),s.textStreams.push(u),zi(this.a,u).then(function(){if(!this.J)return this.Va.splice(this.Va.indexOf(u.id),1),Qr(this,s),ea(this),{id:u.id,active:!1,type:"text",bandwidth:0,language:t,kind:n,width:null,height:null}}.bind(this))},Mr.prototype.addTextTrack=Mr.prototype.addTextTrack,Mr.prototype.Hb=function(e,t){this.mb.width=e,this.mb.height=t},Mr.prototype.setMaxHardwareResolution=Mr.prototype.Hb,is=Mr.prototype,is.fb=function(e){var t=this.a?Vi(this.a):{};if(Je(this.j,t,e),t=0<Xe(e.variants).length,Ke(e,this.b.restrictions,this.mb)&&this.a&&Hi(this.a)==e&&ea(this),e=1>Xe(e.variants).length,!t)throw new u(2,4,4011);if(e)throw new u(2,4,4012)},is.be=function(e,t){this.b.abr.manager.segmentDownloaded(e,t)},is.xc=function(e){if(Xr(this),this.ka=e,this.Sa(),this.g){var t=this.g;e!=t.h&&(t.h=e,Di(t,t.g))}this.dispatchEvent(new at("buffering",{buffering:e}))},is.Yd=function(){ea(this)},is.Sa=function(){if(!this.J){var e=this.ka?"buffering":this.f.ended?"ended":this.f.paused?"paused":"playing",t=Date.now()/1e3;if(this.i.stateHistory.length){var n=this.i.stateHistory[this.i.stateHistory.length-1];if(n.duration=t-n.timestamp,e==n.state)return}this.i.stateHistory.push({timestamp:t,state:e,duration:0})}},is.ae=function(){if(this.v){var e=this.v;e.c.forEach(e.o.bind(e,!0))}this.a&&Xi(this.a)},is.cd=function(e){this.Za=!0,this.b.abr.manager.disable(),e=$r(this,e,We(e,this.ia),$e(e,this.Ba),!0);for(var t in this.B)e[t]=this.B[t].stream;this.B={};for(t in e)Gr(this,e[t],!0);return e},is.Ec=function(){this.Za=!1,this.b.abr.enabled&&this.b.abr.manager.enable();for(var e in this.B){var t=this.B[e];qi(this.a,e,t.stream,t.Ic)}this.B={}},is.jd=function(){this.h&&this.h.update&&this.h.update()},is.sd=function(){this.g&&this.g.yb()},is.Jb=function(e,t){var n,i=Vi(this.a);for(n in e){var r=e[n];i[n]!=r?Gr(this,r,!0):delete e[n]}if(!U(e)&&this.a){for(n in e)qi(this.a,n,e[n],t||!1);Zr(this)}},is.xa=function(e){this.J||this.dispatchEvent(new at("error",{detail:e}))},is.vd=function(e){this.v?this.v.v(e):this.Xa.push(e)},is.gb=function(e){this.dispatchEvent(e)},is.wd=function(){if(this.f.error){var e=this.f.error.code;if(1!=e){var t=this.f.error.msExtendedCode;t&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),this.xa(new u(2,3,3016,e,t))}}},is.$d=function(e){var t=["output-restricted","internal-error"],n=Hi(this.a),i=!1;n.variants.forEach(function(n){var r=[];n.audio&&r.push(n.audio),n.video&&r.push(n.video),r.forEach(function(r){var a=n.allowedByKeySystem;r.keyId&&(r=e[r.keyId],n.allowedByKeySystem=!!r&&0>t.indexOf(r)),a!=n.allowedByKeySystem&&(i=!0)})});var r=Vi(this.a);(r=Qe(r.audio,r.video,n.variants))&&!r.allowedByKeySystem&&Qr(this,n),i&&ea(this)},is.Zd=function(e,t){this.h&&this.h.onExpirationUpdated&&this.h.onExpirationUpdated(e,t),this.dispatchEvent(new at("expirationupdated"))},t("shaka.offline.Storage",na),na.support=ia,na.prototype.m=function(){var e=this.a,t=this.h?this.h.m().catch(function(){}).then(function(){if(e)return e.m()}):Promise.resolve();return this.i=this.f=this.h=this.a=null,t},na.prototype.destroy=na.prototype.m,na.prototype.configure=function(e){I(this.i,e,aa(this),{},"")},na.prototype.configure=na.prototype.configure,na.prototype.je=function(e,t,n){function i(e){a=e}if(this.v)return Promise.reject(new u(2,9,9006));this.v=!0;var r,a=null;return sa(this).then(function(){return ca(this),ra(this,e,i,n)}.bind(this)).then(function(n){if(ca(this),this.c=n.manifest,this.b=n.Jc,this.c.presentationTimeline.da()||this.c.presentationTimeline.va())throw new u(2,9,9005,e);this.c.periods.forEach(this.o.bind(this)),this.g=this.a.c.manifest++,this.l=0,n=this.c.periods.map(this.B.bind(this));var i=this.b.b,a=ae(this.b);if(i){if(!a.length)throw new u(2,9,9007,e);i.initData=[]}return r={key:this.g,originalManifestUri:e,duration:this.l,size:0,expiration:this.b.ab(),periods:n,sessionIds:a,drmInfo:i,appMetadata:t},Or(this.h,r)}.bind(this)).then(function(){if(ca(this),a)throw a;return oa(this)}.bind(this)).then(function(){return Sr(r)}.bind(this)).catch(function(e){return oa(this).catch(E).then(function(){throw e})}.bind(this))},na.prototype.store=na.prototype.je,na.prototype.remove=function(e){function t(e){6013!=e.code&&(s=e)}var n=e.offlineUri,i=/^offline:([0-9]+)$/.exec(n);if(!i)return Promise.reject(new u(2,9,9004,n));var r,a,s=null,o=Number(i[1]);return sa(this).then(function(){return ca(this),this.a.get("manifest",o)}.bind(this)).then(function(e){if(ca(this),!e)throw new u(2,9,9003,n);return r=e,e=Rr(r),a=new te(this.f.o,t,function(){},function(){}),a.configure(this.f.getConfiguration().drm),a.init(e,!0)}.bind(this)).then(function(){return ie(a,r.sessionIds)}.bind(this)).then(function(){return a.m()}.bind(this)).then(function(){if(ca(this),s)throw s;var t=r.periods.map(function(e){return e.streams.map(function(e){var t=e.segments.map(function(e){return e=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e.uri),Number(e[1])});return e.initSegmentUri&&(e=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e.initSegmentUri),t.push(Number(e[1]))),t}).reduce(y,[])}).reduce(y,[]),n=0,i=t.length,a=this.i.progressCallback;return gr(this.a,t,function(){n++,a(e,n/i)})}.bind(this)).then(function(){return ca(this),this.i.progressCallback(e,1),this.a.remove("manifest",o)}.bind(this))},na.prototype.remove=na.prototype.remove,na.prototype.list=function(){var e=[];return sa(this).then(function(){return ca(this),this.a.forEach("manifest",function(t){e.push(Sr(t))})}.bind(this)).then(function(){return e})},na.prototype.list=na.prototype.list,na.prototype.A=function(e){for(var t,n=[],i=Be(this.f.getConfiguration().preferredAudioLanguage),r=[0,fs,ps],a=e.filter(function(e){return"variant"==e.type}),r=r.map(function(e){return a.filter(function(t){return t=Be(t.language),Ue(e,i,t)})}),s=0;s<r.length;s++)if(r[s].length){t=r[s];break}t||(r=a.filter(function(e){return e.primary}),r.length&&(t=r)),t||(t=a,a.map(function(e){return e.language}).filter(T));var o=t.filter(function(e){return e.height&&480>=e.height});return o.length&&(o.sort(function(e,t){return t.height-e.height}),t=o.filter(function(e){return e.height==o[0].height})),t.sort(function(e,t){return e.bandwidth-t.bandwidth}),t.length&&n.push(t[Math.floor(t.length/2)]),n.push.apply(n,e.filter(function(e){return"text"==e.type})),n},na.prototype.o=function(e){var t={};if(this.j){var n=this.j.filter(function(e){return"variant"==e.type}),i=null;n.length&&(i=Ye(e,n[0])),i&&(i.video&&(t.video=i.video),i.audio&&(t.audio=i.audio))}Je(this.b,t,e),Ke(e,this.f.getConfiguration().restrictions,{width:1/0,height:1/0})},na.prototype.B=function(e){var t,n,i=Ve(e,null,null),r=ze(e,null),i=this.i.trackSelectionCallback(i.concat(r));for(this.j||(this.j=i,this.c.periods.forEach(this.o.bind(this))),r=i.length-1;0<r;--r){var a=!1;for(n=r-1;0<=n;--n)if(i[r].type==i[n].type&&i[r].kind==i[n].kind&&i[r].language==i[n].language){a=!0;break}if(a)break}for(a=[],r=0;r<i.length;r++)(t=Ye(e,i[r]))?(t.audio&&((n=a.filter(function(e){return e.id==t.audio.id})[0])?n.variantIds.push(t.id):(n=t.video?t.bandwidth/2:t.bandwidth,a.push(la(this,e,t.audio,n,t.id)))),t.video&&((n=a.filter(function(e){return e.id==t.video.id})[0])?n.variantIds.push(t.id):(n=t.audio?t.bandwidth/2:t.bandwidth,a.push(la(this,e,t.video,n,t.id))))):a.push(la(this,e,qe(e,i[r]),0));return{startTime:e.startTime,streams:a}},Xs.offline=ia,t("shaka.polyfill.installAll",function(){for(var e=0;e<Ws.length;++e)Ws[e]()});var Ws=[];t("shaka.polyfill.register",da),da(function(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,t=Document.prototype,t.exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitExitFullscreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",ha),document.addEventListener("webkitfullscreenerror",ha),document.addEventListener("mozfullscreenchange",ha),document.addEventListener("mozfullscreenerror",ha),document.addEventListener("MSFullscreenChange",ha),document.addEventListener("MSFullscreenError",ha)}}),da(function(){var t=navigator.userAgent;t&&0<=t.indexOf("CrKey")&&delete e.indexedDB}),fa.prototype.c=function(e){if(!(1<e.version)){var t=Z(e.s.Ja(16)),n=[];if(0<e.version)for(var i=e.s.D(),r=0;r<i;++r){var a=Z(e.s.Ja(16));n.push(a)}i=e.s.D(),e.s.I(i),this.b.push.apply(this.b,n),this.f.push(t),this.a.push({start:e.start,end:e.start+e.size-1})}},ma.prototype.createMediaKeys=function(){var e=new ga(this.keySystem);return Promise.resolve(e)},ma.prototype.getConfiguration=function(){return this.a},ga.prototype.createSession=function(e){if("temporary"!=(e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new ya(this.a)},ga.prototype.setServerCertificate=function(){return Promise.resolve(!1)},n(ya),is=ya.prototype,is.generateRequest=function(e,t){this.a=new C;try{this.c=this.g.createSession("video/mp4",new Uint8Array(t),null),D(this.f,this.c,"mskeymessage",this.nd.bind(this)),D(this.f,this.c,"mskeyadded",this.ld.bind(this)),D(this.f,this.c,"mskeyerror",this.md.bind(this)),Sa(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},is.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},is.update=function(e){this.b=new C;try{this.c.update(new Uint8Array(e))}catch(e){this.b.reject(e)}return this.b},is.close=function(){try{this.c.close(),this.closed.resolve(),j(this.f)}catch(e){this.closed.reject(e)}return this.closed},is.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},is.nd=function(e){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new at("message",{messageType:void 0==this.keyStatuses.qb()?"licenserequest":"licenserenewal",message:e.message.buffer}))},is.ld=function(){this.a?(Sa(this,"usable"),this.a.resolve(),this.a=null):this.b&&(Sa(this,"usable"),this.b.resolve(),this.b=null)},is.md=function(){var e=Error("EME PatchedMediaKeysMs key error");if(e.errorCode=this.c.error,this.a)this.a.reject(e),this.a=null;else if(this.b)this.b.reject(e),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:Sa(this,"output-not-allowed");default:Sa(this,"internal-error")}};var $s;is=Ta.prototype,is.Ib=function(e){this.size=void 0==e?0:1,this.a=e},is.qb=function(){return this.a},is.forEach=function(e){this.a&&e(this.a,$s)},is.get=function(e){if(this.has(e))return this.a},is.has=function(e){var t=$s;return!(!this.a||!ee(new Uint8Array(e),new Uint8Array(t)))},is.entries=function(){},is.keys=function(){},is.values=function(){},Ia.prototype.createSession=function(){},Ia.prototype.setServerCertificate=function(){},La.prototype.getConfiguration=function(){},La.prototype.createMediaKeys=function(){};var Qs="";Pa.prototype.createMediaKeys=function(){var e=new xa(this.a);return Promise.resolve(e)},Pa.prototype.getConfiguration=function(){return this.b},is=xa.prototype,is.createSession=function(e){var t=e||"temporary";if("temporary"!=t&&"persistent-license"!=t)throw new TypeError("Session type "+e+" is unsupported on this platform.");return e=this.b||document.createElement("video"),e.src||(e.src="about:blank"),t=new Fa(e,this.g,t),this.c.push(t),t},is.setServerCertificate=function(){return Promise.resolve(!1)},is.Ad=function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="webm",t.initData=e.initData,this.b.dispatchEvent(t)},is.zd=function(e){var t=Da(this,e.sessionId);t&&(e=new at("message",{messageType:void 0==t.keyStatuses.qb()?"licenserequest":"licenserenewal",message:e.message}),t.b&&(t.b.resolve(),t.b=null),t.dispatchEvent(e))},is.xd=function(e){(e=Da(this,e.sessionId))&&(Ma(e,"usable"),e.a&&e.a.resolve(),e.a=null)},is.yd=function(e){var t=Da(this,e.sessionId);if(t){var n=Error("EME v0.1b key error");n.errorCode=e.errorCode,n.errorCode.systemCode=e.systemCode,!e.sessionId&&t.b?(n.method="generateRequest",45==e.systemCode&&(n.message="Unsupported session type."),t.b.reject(n),t.b=null):e.sessionId&&t.a?(n.method="update",t.a.reject(n),t.a=null):(n=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Ma(t,"output-restricted"):1==n?Ma(t,"expired"):Ma(t,"internal-error"))}},n(Fa),is=Fa.prototype,is.Kb=function(e,t){if(this.a)this.a.then(this.Kb.bind(this,e,t)).catch(this.Kb.bind(this,e,t));else{if(this.a=e,"webkit-org.w3.clearkey"==this.c){var n=J(t),i=JSON.parse(n);"oct"!=i.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),n=$(i.keys[0].k),i=$(i.keys[0].kid)}else n=new Uint8Array(t),i=null;var r=ka("addKey");try{this.f[r](this.c,n,i,this.sessionId)}catch(e){this.a.reject(e),this.a=null}}},is.generateRequest=function(e,t){return ja(this,t,null)},is.load=function(e){return"persistent-license"==this.g?ja(this,null,e):Promise.reject(Error("Not a persistent session."))},is.update=function(e){var t=new C;return this.Kb(t,e),t},is.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=ka("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},is.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()};var Zs;is=Ua.prototype,is.Ib=function(e){this.size=void 0==e?0:1,this.a=e},is.qb=function(){return this.a},is.forEach=function(e){this.a&&e(this.a,Zs)},is.get=function(e){if(this.has(e))return this.a},is.has=function(e){var t=Zs;return!(!this.a||!ee(new Uint8Array(e),new Uint8Array(t)))},is.entries=function(){},is.keys=function(){},is.values=function(){},da(function(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?Ca("webkit"):HTMLMediaElement.prototype.generateKeyRequest?Ca(""):e.MSMediaKeys?($s=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=va,e.MediaKeys=ga,e.MediaKeySystemAccess=ma,navigator.requestMediaKeySystemAccess=pa):(navigator.requestMediaKeySystemAccess=Aa,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Na,e.MediaKeys=Ia,e.MediaKeySystemAccess=La))}),da(function(){if(e.MediaSource){var t=navigator.vendor,n=navigator.appVersion;!t||!n||0>t.indexOf("Apple")||(0<=n.indexOf("Version/8")?e.MediaSource=null:0<=n.indexOf("Version/9")?Ba():0<=n.indexOf("Version/10")&&(Ba(),Ga()))}});var eo=0;Ha.prototype.then=function(e,t){var n=new Ha;switch(this.za){case 1:Xa(this,n,e);break;case 2:Xa(this,n,t);break;case eo:this.c.push({L:n,nb:e}),this.b.push({L:n,nb:t})}return n},Ha.prototype.catch=function(e){return this.then(void 0,e)},Ha.prototype.fa=function(e){if(this.za==eo){for(this.jb=e,this.za=1,e=0;e<this.c.length;++e)Xa(this,this.c[e].L,this.c[e].nb);this.c=[],this.b=[]}},Ha.prototype.a=function(e){if(this.za==eo){for(this.jb=e,this.za=2,e=0;e<this.b.length;++e)Xa(this,this.b[e].L,this.b[e].nb);this.c=[],this.b=[]}};var to=null,no=[];da(function(t){e.setImmediate?(Qa=function(t){return e.setImmediate(t)},Za=function(t){return e.clearImmediate(t)}):(Qa=function(t){return e.setTimeout(t,0)},Za=function(t){return e.clearTimeout(t)}),e.Promise&&!t||(e.Promise=Ha,e.Promise.resolve=Va,e.Promise.reject=za,e.Promise.all=Ya,e.Promise.race=qa,e.Promise.prototype.then=Ha.prototype.then,e.Promise.prototype.catch=Ha.prototype.catch)}),da(function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=es)}}),da(function(){if(!e.VTTCue&&e.TextTrackCue){var t=TextTrackCue.length;if(3==t)e.VTTCue=ts;else if(6==t)e.VTTCue=ns;else{try{var n=!!ts(1,2,"")}catch(e){n=!1}n&&(e.VTTCue=ts)}}})}).call(r,this),void 0!==e&&e.exports?e.exports=r.shaka:void 0!==(i=function(){return r.shaka}.call(t,n,t,e))&&(e.exports=i)}()},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=p[i.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(c(i.parts[a],t))}else{for(var s=[],a=0;a<i.parts.length;a++)s.push(c(i.parts[a],t));p[i.id]={id:i.id,refs:1,parts:s}}}}function r(e){for(var t=[],n={},i=0;i<e.length;i++){var r=e[i],a=r[0],s=r[1],o=r[2],u=r[3],l={css:s,media:o,sourceMap:u};n[a]?n[a].parts.push(l):t.push(n[a]={id:a,parts:[l]})}return t}function a(e,t){var n=v(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=y[y.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),y.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function s(e){e.parentNode.removeChild(e);var t=y.indexOf(e);t>=0&&y.splice(t,1)}function o(e){var t=document.createElement("style");return e.attrs.type="text/css",l(t,e.attrs),a(e,t),t}function u(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",l(t,e.attrs),a(e,t),t}function l(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function c(e,t){var n,i,r;if(t.singleton){var a=b++;n=g||(g=o(t)),i=d.bind(null,n,a,!1),r=d.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(t),i=f.bind(null,n,t),r=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=o(t),i=h.bind(null,n),r=function(){s(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}function d(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=w(t,r);else{var a=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(a,s[t]):e.appendChild(a)}}function h(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t,n){var i=n.css,r=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||a)&&(i=E(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var s=new Blob([i],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(s),o&&URL.revokeObjectURL(o)}var p={},m=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),v=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}(function(e){return document.querySelector(e)}),g=null,b=0,y=[],E=n(23);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},void 0===t.singleton&&(t.singleton=m()),void 0===t.insertInto&&(t.insertInto="head"),void 0===t.insertAt&&(t.insertAt="bottom");var n=r(e);return i(n,t),function(e){for(var a=[],s=0;s<n.length;s++){var o=n[s],u=p[o.id];u.refs--,a.push(u)}if(e){i(r(e),t)}for(var s=0;s<a.length;s++){var u=a[s];if(0===u.refs){for(var l=0;l<u.parts.length;l++)u.parts[l]();delete p[u.id]}}}};var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var r=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(r))return e;var a;return a=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(a)+")"})}}])});
//# sourceMappingURL=fjplayer.min.js.map