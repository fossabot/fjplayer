<!DOCTYPE>
<html>

<head>
    <title>fjplayer demo</title>
    <script type="text/javascript" src="../dist/fjplayer.js"></script>
    <script type="text/javascript" src="demo-data.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <style type="text/css">
        .containerma {
            font-size: 11px;
        }
    </style>
    <script type="text/javascript">
        var ver = null;
        var playlist = null;
        var player = null;
        var select = null;

        function fjplayerEvent(e, args) {
            console.warn(" We are having an event : ", e, args);
        };

        function playMe(item) {
            playlist.addItem(item);
            player.on(fjplayer.PlayerEvents.STREAM_LOADED, fjplayerEvent);
            player.loadPlaylist(playlist);
            player.startPlaylist(0, true, false, true);

        }

        function loadfromList() {
            var key = select.options[select.selectedIndex].value;
            playMe(data[key]);
        }

        function loadfromInputs() {
            console.warn(' **** TODO ***** !!!');
        }

        function ClearPlayer() {
            player.stop();
        }

        function SetItem(key) {
            console.log(" Title : ", data[key].FJTitle);
            document.getElementById('title').value = data[key].FJTitle;
            console.log(" Type : ", data[key].FJType);
            if (data[key].FJType === 'dash') {
                document.getElementById('dashType').checked = true;
            } else {
                document.getElementById('mp4Type').checked = true;
            }
            console.log(" Class : ", data[key].FJClass);
            if (data[key].FJClass === 'vod') {
                document.getElementById('vodClass').checked = true;
            } else {
                document.getElementById('liveClass').checked = true;
            }
            console.log(" Src : ", data[key].FJSrc);
            document.getElementById('src').value = data[key].FJSrc;
            console.log(" Thumbs : ", data[key].FJThumbs);
            if (data[key].FJThumbs === undefined) {
                document.getElementById('thumbs').value = '';
            } else {
                document.getElementById('thumbs').value = data[key].FJThumbs;
            }
            console.log(" Poster : ", data[key].FJPoster);
            if (data[key].FJPoster === undefined) {
                document.getElementById('poster').value = '';
            } else {
                document.getElementById('poster').value = data[key].FJPoster;
            }
        };

        function updateChoice() {
            var key = select.options[select.selectedIndex].value;
            SetItem(key);
        }
        window.onload = function() {
            var key, first = true;
            select = document.getElementById('Mainsel');
            ver = new fjplayer.Version();
            console.info('VERSION', ver.getVersion());
            console.info('Hash HEAD', ver.getShortHash());
            playlist = new fjplayer.Playlist();
            player = new fjplayer.Player('fjserverID1', 'playercontainer');

            for (key in data) {
                if (data.hasOwnProperty(key)) {
                    if (first === true) {
                        SetItem(key);
                        first = false;
                    }
                    var opt = document.createElement('option');
                    opt.innerHTML = key;
                    opt.value = key;
                    select.appendChild(opt);
                }
            }
        };
    </script>
</head>

<body>

    <div class="container containerma ">
        <div class="panel panel-default">
            <div class="panel-body">

                <div class="form-group row">
                    <div class="col-md-10">
                        <form>
                            <div class="form-group">
                                <select class="form-control" id="Mainsel" onchange="updateChoice();">                                    
                                </select>
                            </div>
                        </form>
                    </div>
                    <div class=" col-md-2 ">
                        <button type="button" class="btn btn-info" onclick="loadfromList();"> load from list</button>
                    </div>
                </div>
                <div class="row">
                    <label class="col-md-2 col-form-label">Class :</label>
                    <div class="form-group  col-md-4">
                        <form>
                            <label class="radio-inline">
                                <input id="vodClass" type="radio" name="class">vod
                            </label>
                            <label class="radio-inline">
                                <input id="liveClass" type="radio" name="class">live
                            </label>
                        </form>
                    </div>
                    <label class="col-md-2 col-form-label">Type :</label>
                    <div class="form-group  col-md-4">
                        <form>
                            <label class="radio-inline">
                                <input id="dashType" type="radio" name="type">dash
                            </label>
                            <label class="radio-inline">
                                <input id="mp4Type" type="radio" name="type">video/mp4
                            </label>
                        </form>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-md-2 col-form-label">Title :</label>
                    <div class="col-md-8">
                        <input id="title" class="form-control" type="text">
                    </div>
                    <div class=" col-md-2 ">
                        <button type="button" class="btn btn-danger" onclick="ClearPlayer();"> Clear Player</button>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-md-2 col-form-label">Poster :</label>
                    <div class="col-md-10">
                        <input id="poster" class="form-control" type="text">
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-md-2 col-form-label">URL src : </label>
                    <div class="col-md-10">
                        <input id="src" class="form-control" type="url">
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-md-2 col-form-label">Thumbs :</label>
                    <div class="col-md-8">
                        <input id="thumbs" class="form-control" type="url">
                    </div>
                    <div class=" col-md-2 ">
                        <button type="button" class="btn btn-warning" onclick="loadfromInputs();"> load from inputs</button>
                    </div>
                </div>

                <div class=" row">
                    <div class="col-md-12">
                        <div id="playercontainer"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /container -->
</body>

</html>